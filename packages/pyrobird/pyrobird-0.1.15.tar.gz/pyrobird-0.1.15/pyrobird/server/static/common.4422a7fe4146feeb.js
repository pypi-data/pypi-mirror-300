"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[2076],{7497:(C,M,_)=>{_.d(M,{a:()=>o});var a=_(4438),x=_(177);const D=["leftPaneContainer"],E=["rightPaneContainer"],y=[[["","header",""]],[["","centralPane",""]],[["","footer",""]],[["","leftPane",""]],[["","rightPane",""]]],c=["[header]","[centralPane]","[footer]","[leftPane]","[rightPane]"],r=l=>({"flex-basis":l});function v(l,d){}function f(l,d){if(1&l&&(a.j41(0,"div",11),a.SdG(1,3),a.DNE(2,v,0,0,"ng-template",null,0,a.C5r),a.k0s()),2&l){const i=a.XpG();a.Aen(a.eq3(2,r,i.leftPaneWidth+"px"))}}function n(l,d){if(1&l){const i=a.RV6();a.j41(0,"div",12),a.bIt("mousedown",function(h){a.eBV(i);const u=a.XpG();return a.Njj(u.onMouseDownLeft(h))}),a.k0s()}}function t(l,d){if(1&l){const i=a.RV6();a.j41(0,"div",13),a.bIt("mousedown",function(h){a.eBV(i);const u=a.XpG();return a.Njj(u.onMouseDownRight(h))}),a.k0s()}}function e(l,d){}function s(l,d){if(1&l&&(a.j41(0,"div",14),a.SdG(1,4),a.DNE(2,e,0,0,"ng-template",null,1,a.C5r),a.k0s()),2&l){const i=a.XpG();a.Aen(a.eq3(2,r,i.rightPaneWidth+"px"))}}let o=(()=>{class l{constructor(){this.isResizingLeft=!1,this.isResizingRight=!1,this.leftPaneWidth=250,this.rightPaneWidth=250,this.isLeftPaneVisible=!0,this.isRightPaneVisible=!1}onMouseDownLeft(i){this.isResizingLeft=!0,i.preventDefault()}onMouseDownRight(i){this.isResizingRight=!0,i.preventDefault()}onMouseMove(i){if(this.isResizingLeft){const h=window.innerWidth-this.rightPaneWidth-100;this.leftPaneWidth=Math.max(100,Math.min(i.clientX,h)),i.preventDefault()}else if(this.isResizingRight){const h=window.innerWidth-this.leftPaneWidth-100;let u=window.innerWidth-i.clientX;this.rightPaneWidth=Math.max(100,Math.min(u,h)),i.preventDefault()}}onMouseUp(){this.isResizingLeft=!1,this.isResizingRight=!1}addComponentToLeftPane(i,m){this.leftPaneContainer.clear();const h=this.leftPaneContainer.createComponent(i);return m&&Object.assign(h.instance,m),h}addComponentToRightPane(i,m){this.rightPaneContainer.clear();const h=this.rightPaneContainer.createComponent(i);return m&&Object.assign(h.instance,m),h}toggleLeftPane(){this.isLeftPaneVisible=!this.isLeftPaneVisible}toggleRightPane(){this.isRightPaneVisible=!this.isRightPaneVisible}static{this.\u0275fac=function(m){return new(m||l)}}static{this.\u0275cmp=a.VBU({type:l,selectors:[["app-display-shell"]],viewQuery:function(m,h){if(1&m&&(a.GBs(D,7,a.c1b),a.GBs(E,7,a.c1b)),2&m){let u;a.mGM(u=a.lsd())&&(h.leftPaneContainer=u.first),a.mGM(u=a.lsd())&&(h.rightPaneContainer=u.first)}},hostBindings:function(m,h){1&m&&a.bIt("mousemove",function(p){return h.onMouseMove(p)},!1,a.EBC)("mouseup",function(){return h.onMouseUp()},!1,a.EBC)},standalone:!0,features:[a.aNF],ngContentSelectors:c,decls:12,vars:4,consts:[["leftPaneContainer",""],["rightPaneContainer",""],[1,"display-shell"],[1,"header"],[1,"main-content"],["class","pane left-pane",3,"style",4,"ngIf"],["class","divider left-divider",3,"mousedown",4,"ngIf"],[1,"central-pane"],["class","divider right-divider",3,"mousedown",4,"ngIf"],["class","pane right-pane",3,"style",4,"ngIf"],[1,"footer"],[1,"pane","left-pane"],[1,"divider","left-divider",3,"mousedown"],[1,"divider","right-divider",3,"mousedown"],[1,"pane","right-pane"]],template:function(m,h){1&m&&(a.NAR(y),a.j41(0,"div",2)(1,"div",3),a.SdG(2),a.k0s(),a.j41(3,"div",4),a.DNE(4,f,4,4,"div",5)(5,n,1,0,"div",6),a.j41(6,"div",7),a.SdG(7,1),a.k0s(),a.DNE(8,t,1,0,"div",8)(9,s,4,4,"div",9),a.k0s(),a.j41(10,"div",10),a.SdG(11,2),a.k0s()()),2&m&&(a.R7$(4),a.Y8G("ngIf",h.isLeftPaneVisible),a.R7$(),a.Y8G("ngIf",h.isLeftPaneVisible),a.R7$(3),a.Y8G("ngIf",h.isRightPaneVisible),a.R7$(),a.Y8G("ngIf",h.isRightPaneVisible))},dependencies:[x.MD,x.bT],styles:[".display-shell[_ngcontent-%COMP%]{padding-top:62px;margin-top:-62px;display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;box-sizing:border-box}.header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;background-color:#2e2e2e;border-bottom:1px solid #ddd;box-sizing:border-box}.main-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.pane[_ngcontent-%COMP%]{overflow:auto;min-width:0}.left-pane[_ngcontent-%COMP%], .right-pane[_ngcontent-%COMP%]{background-color:#2e2e2e}.central-pane[_ngcontent-%COMP%]{flex:1;background-color:#424242;overflow:auto}.divider[_ngcontent-%COMP%]{width:5px;cursor:col-resize;background-color:#ccc;-webkit-user-select:none;user-select:none}.left-divider[_ngcontent-%COMP%], .right-divider[_ngcontent-%COMP%]{cursor:col-resize}"]})}}return l})()},2695:(C,M,_)=>{_.r(M),_.d(M,{TLinePainter:()=>v});var a=_(467),x=_(6998),D=_(6224),E=_(9025),y=_(6714),c=_(6370);const r=(0,x.BIT)(14);class v extends D.JW{moveStart(n,t){const e=Math.sqrt((this.x1-this.x2)**2+(this.y1-this.y2)**2),s=Math.sqrt((n-this.x1)**2+(t-this.y1)**2)/e,o=Math.sqrt((n-this.x2)**2+(t-this.y2)**2)/e;this.side=s>.9?1:o>.9?-1:0}moveDrag(n,t){1!==this.side&&(this.x1+=n,this.y1+=t),-1!==this.side&&(this.x2+=n,this.y2+=t),this.draw_g.select("path").attr("d",this.createPath())}moveEnd(n){if(n)return;const t=this.getObject();let e="";t.fX1=this.svgToAxis("x",this.x1,this.isndc),t.fX2=this.svgToAxis("x",this.x2,this.isndc),t.fY1=this.svgToAxis("y",this.y1,this.isndc),t.fY2=this.svgToAxis("y",this.y2,this.isndc),1!==this.side&&(e+=`SetX1(${t.fX1});;SetY1(${t.fY1});;`),-1!==this.side&&(e+=`SetX2(${t.fX2});;SetY2(${t.fY2});;`),this.submitCanvExec(e+"Notify();;")}prepareDraw(){const n=this.getObject();this.isndc=n.TestBit(r);const t=this.getAxisToSvgFunc(this.isndc,!0,!0);this.x1=t.x(n.fX1),this.y1=t.y(n.fY1),this.x2=t.x(n.fX2),this.y2=t.y(n.fY2),this.createAttLine({attr:n})}createPath(){const n=Math.round(this.x1),t=Math.round(this.x2),e=Math.round(this.y1),s=Math.round(this.y2);return`M${n},${e}`+(n===t?`V${s}`:e===s?`H${t}`:`L${t},${s}`)}addExtras(){}redraw(){this.createG(),this.prepareDraw();const n=this.draw_g.append("svg:path").attr("d",this.createPath()).call(this.lineatt.func);return this.getObject()?.$do_not_draw?n.remove():(this.addExtras(n),(0,y.X2)(this),(0,c.wh)(this,c.Ew)),this}static draw(n,t,e){return(0,a.A)(function*(){const s=new v(n,t,e);return(0,E.ensureTCanvas)(s,!1).then(()=>s.redraw())})()}}},9109:(C,M,_)=>{_.d(M,{Y:()=>E});var a=_(467),x=_(6998),D=_(1069);function E(){return y.apply(this,arguments)}function y(){return(y=(0,a.A)(function*(){const c=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,x.isObject)(c)&&c.grx&&c.gry&&c.grz))return this;const r=this.getObject(),f=r.fP;let n=1,t=0;for(let i=0;i<f.length;i+=3)f[i]<c.scale_xmin||f[i]>c.scale_xmax||f[i+1]<c.scale_ymin||f[i+1]>c.scale_ymax||f[i+2]<c.scale_zmin||f[i+2]>c.scale_zmax||++t;x.settings.OptimizeDraw>0&&t>5e4&&(n=Math.floor(t/5e4),n<=2&&(n=2));const e=Math.floor(t/n),s=new D._l(e,c.webgl,c.size_x3d/100),o=new Int32Array(e);let l=0,d=0;for(let i=0;i<f.length;i+=3)f[i]<c.scale_xmin||f[i]>c.scale_xmax||f[i+1]<c.scale_ymin||f[i+1]>c.scale_ymax||f[i+2]<c.scale_zmin||f[i+2]>c.scale_zmax||n>1&&(l=(l+1)%n,0!==l)||(o[d++]=i,s.addPoint(c.grx(f[i]),c.gry(f[i+1]),c.grz(f[i+2])));return s.createPoints({color:this.getColor(r.fMarkerColor),style:r.fMarkerStyle}).then(i=>(i.tip_color=3===r.fMarkerColor?16711680:65280,i.tip_name=r.fName||"Poly3D",i.poly=r,i.fp=c,i.scale0=.7*s.scale,i.index=o,c.add3DMesh(i,this,!0),i.tooltip=function(m){let h=Math.floor(m.index/this.nvertex);if(h<0||h>=this.index.length)return null;h=this.index[h];const u=this.fp,p=u.grx(this.poly.fP[h]),g=u.gry(this.poly.fP[h+1]),P=u.grz(this.poly.fP[h+2]);return{x1:p-this.scale0,x2:p+this.scale0,y1:g-this.scale0,y2:g+this.scale0,z1:P-this.scale0,z2:P+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+h/3,"x: "+u.axisAsText("x",this.poly.fP[h]),"y: "+u.axisAsText("y",this.poly.fP[h+1]),"z: "+u.axisAsText("z",this.poly.fP[h+2])]}},c.render3D(100),this))})).apply(this,arguments)}},230:(C,M,_)=>{_.r(M),_.d(M,{TF1Painter:()=>n,produceTAxisLogScale:()=>v,scanTF1Options:()=>f});var a=_(467),x=_(6998),D=_(9041),E=_(6224),y=_(3277),c=_(2953),r=_(3693);function v(t,e,s,o){let l,d;o>0?(d=Math.log(o),l=s>0?Math.log(s):d-5):(d=-10,l=-15),t.fNbins=e,t.fXbins=new Array(e+1);for(let i=0;i<=e;++i)t.fXbins[i]=Math.exp(l+i/e*(d-l));t.fXmin=Math.exp(l),t.fXmax=Math.exp(d)}function f(t){(0,x.isStr)(t)||(t="");let e=t.indexOf(";webcanv_hist"),s=!1,o=0;return e>=0&&(s=!0,t=t.slice(0,e)),e=t.indexOf(";force_saved"),e>=0&&(o=2,t=t.slice(0,e)),e=t.indexOf(";prefer_saved"),e>=0&&(o=1,t=t.slice(0,e)),{opt:t,webcanv_hist:s,use_saved:o}}class n extends c.N{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??x.clTF1}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(e){if(!e||this.getClassName()!==e._typename)return!1;delete e.evalPar;const s=this.getHisto();if(this.webcanv_hist){const o=this.getPadPainter()?.findInPrimitives("Func",x.clTH1D);o&&this.updateAxes(s,o,this.getFramePainter())}return this.$func=e,this.createTF1Histogram(e,s),this.scanContent(),!0}redraw(e){return!this._use_saved_points&&("logx"===e||"zoom"===e)&&(this.createTF1Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(e)}createTF1Histogram(e,s){const o=this.getFramePainter(),l=this.getPadPainter()?.getRootPad(!0),d=l?.fLogx,i=o?.getGrFuncs(this.second_x,this.second_y);let m=e.fXmin,h=e.fXmax,u=Math.max(e.fNpx,100);if(i?.zoom_xmin!==i?.zoom_xmax){const g=(h-m)/u;m<i.zoom_xmin&&i.zoom_xmin<h&&(m=Math.max(m,i.zoom_xmin-g)),m<i.zoom_xmax&&i.zoom_xmax<h&&(h=Math.min(h,i.zoom_xmax+g))}this._use_saved_points=e.fSave.length>3&&(x.settings.PreferSavedPoints||this.use_saved>1);const p=g=>{s.fNcells!==g+2&&(s.fNcells=g+2,s.fArray=new Float32Array(s.fNcells)),s.fArray.fill(0),s.fXaxis.fNbins=g,s.fXaxis.fXbins=[]};if(delete this._fail_eval,!this._use_saved_points){let g=!1;if(!e.evalPar)try{(0,r.Dx)(e)||(g=!0)}catch{g=!0}p(u),d?v(s.fXaxis,u,m,h):(s.fXaxis.fXmin=m,s.fXaxis.fXmax=h);for(let P=0;P<u&&!g;P++){const T=s.fXaxis.GetBinCenter(P+1);let O=0;try{O=e.evalPar(T)}catch{g=!0}g||s.setBinContent(P+1,Number.isFinite(O)?O:0)}g&&(this._fail_eval=!0),g&&e.fSave.length>3&&(this._use_saved_points=!0)}if(this._use_saved_points){u=e.fSave.length-3;let g=null;if(m=e.fSave[u+1],h=e.fSave[u+2],m===h){const P=this.getMainPainter();(0,x.isFunc)(P?.getHisto)&&(g=P?.getHisto()?.fXaxis)}if(g){p(s.fXaxis.fNbins),Object.assign(s.fXaxis,g);for(let P=0;P<u;++P){const T=e.fSave[P];s.setBinContent(P+1,Number.isFinite(T)?T:0)}}else{p(e.fNpx),s.fXaxis.fXmin=e.fXmin,s.fXaxis.fXmax=e.fXmax;for(let P=0;P<e.fNpx;++P){const T=(0,r.YI)(e,s.fXaxis.GetBinCenter(P+1));s.setBinContent(P+1,Number.isFinite(T)?T:0)}}}s.fName="Func",(0,x.setHistogramTitle)(s,e.fTitle),s.fMinimum=e.fMinimum,s.fMaximum=e.fMaximum,s.fLineColor=e.fLineColor,s.fLineStyle=e.fLineStyle,s.fLineWidth=e.fLineWidth,s.fFillColor=e.fFillColor,s.fFillStyle=e.fFillStyle,s.fMarkerColor=e.fMarkerColor,s.fMarkerStyle=e.fMarkerStyle,s.fMarkerSize=e.fMarkerSize,s.fBits|=x.kNoStats}extractAxesProperties(e){super.extractAxesProperties(e);const s=this.$func,o=s?.fSave.length??0;o>3&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,s.fSave[o-2]),this.xmax=Math.max(this.xmax,s.fSave[o-1])),s&&(this.xmin=Math.min(this.xmin,s.fXmin),this.xmax=Math.max(this.xmax,s.fXmax))}canZoomInside(e,s,o){const l=this.$func?.fSave.length??0;if(l>3&&this._use_saved_points&&"x"===e){const d=l-2;return Math.abs(this.$func.fSave[l-1]-this.$func.fSave[l-2])/d<Math.abs(o-s)}return"x"===e||"y"===e}getTF1Tooltips(e){delete this.$tmp_tooltip;const s=[this.getObjectHint()],o=this.getFramePainter()?.getGrFuncs(this.options.second_x,this.options.second_y);if(!o||!(0,x.isFunc)(this.$func?.evalPar))return s.push("grx = "+e.x,"gry = "+e.y),s;const l=o.revertAxis("x",e.x);let d=0,i=0,m=!1;try{d=this.$func.evalPar(l),i=Math.round(o.gry(d))}catch{m=!0}return s.push("x = "+o.axisAsText("x",l),"value = "+(m?"<fail>":(0,D.lg)(d,x.gStyle.fStatFormat))),m||(this.$tmp_tooltip={y:d,gry:i}),s}processTooltipEvent(e){if(this._use_saved_points)return super.processTooltipEvent(e);let s=this.draw_g?.selectChild(".tooltip_bin");if(!this.draw_g||!e)return s?.remove(),null;const o={name:this.$func?.fName,title:this.$func?.fTitle,x:e.x,y:e.y,color1:this.lineatt?.color??"green",color2:this.fillatt?.getFillColorAlt("blue")??"blue",lines:this.getTF1Tooltips(e),exact:!0,menu:!0};return e.disabled?s.remove():(s.empty()&&(s=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").style("fill","none").attr("r",(this.lineatt?.width??1)+4)),s.attr("cx",e.x).attr("cy",this.$tmp_tooltip.gry??e.y).call(this.lineatt?.func)),o}fillWebObjectOptions(e){e.fcust=this._fail_eval&&!this.use_saved?"func_fail":""}static draw(e,s,o){return(0,a.A)(function*(){const l=f(o);let d;o=l.opt,delete l.opt,l.webcanv_hist&&(d=new E.JW(e).getPadPainter()?.findInPrimitives("Func",x.clTH1D)),d||(d=(0,x.createHistogram)(x.clTH1D,100),d.fBits|=x.kNoStats),!o&&(0,E.Nn)(e)&&(o="same");const i=new n(e,d);return i.$func=s,Object.assign(i,l),i.createTF1Histogram(s,d),y.mf._drawHist(i,o)})()}}},895:(C,M,_)=>{_.d(M,{k:()=>y});var a=_(467),x=_(4693),D=_(1516),E=_(1069);class y extends x.TGraphPainter{drawBins3D(r,v){if(!(r.mode3d&&r.grx&&r.gry&&r.grz&&r.toplevel))return console.log("Frame painter missing base 3d elements");if(r.zoom_xmin!==r.zoom_xmax&&(this.options.pos3d<r.zoom_xmin||this.options.pos3d>r.zoom_xmax))return;this.createGraphDrawAttributes(!0);const f=this.optimizeBins(1e3);let n=0,t=f.length-1;if(r.zoom_ymin!==r.zoom_ymax){for(;n<t&&f[n].x<r.zoom_ymin;)n++;for(;n<t&&f[t].x>r.zoom_ymax;)t--}if(n===t)return;const e=[],s=r.grx(this.options.pos3d);let o=f[n];for(let d=n+1;d<=t;++d){const i=f[d];e.push(s,r.gry(o.x),r.grz(o.y),s,r.gry(i.x),r.grz(i.y)),o=i}const l=(0,E.Fc)(e,(0,E.DH)(this,v));r.add3DMesh(l,this,!0),r.render3D(100)}drawAxisHisto(){var r=this;return(0,a.A)(function*(){return D.TH1Painter.draw(r.getDom(),r.createHistogram(),r.options.Axis)})()}static draw(r,v,f){return(0,a.A)(function*(){return y._drawGraph(new y(r,v),f)})()}}},2826:(C,M,_)=>{_.r(M),_.d(M,{TLinePainter:()=>v});var a=_(467),x=_(5461),D=_(3641),E=_(4080),y=_(3307),c=_(1713);const r=(0,x.BIT)(14);class v extends D.JW{moveStart(n,t){const e=Math.sqrt((this.x1-this.x2)**2+(this.y1-this.y2)**2),s=Math.sqrt((n-this.x1)**2+(t-this.y1)**2)/e,o=Math.sqrt((n-this.x2)**2+(t-this.y2)**2)/e;this.side=s>.9?1:o>.9?-1:0}moveDrag(n,t){1!==this.side&&(this.x1+=n,this.y1+=t),-1!==this.side&&(this.x2+=n,this.y2+=t),this.draw_g.select("path").attr("d",this.createPath())}moveEnd(n){if(n)return;const t=this.getObject();let e="";t.fX1=this.svgToAxis("x",this.x1,this.isndc),t.fX2=this.svgToAxis("x",this.x2,this.isndc),t.fY1=this.svgToAxis("y",this.y1,this.isndc),t.fY2=this.svgToAxis("y",this.y2,this.isndc),1!==this.side&&(e+=`SetX1(${t.fX1});;SetY1(${t.fY1});;`),-1!==this.side&&(e+=`SetX2(${t.fX2});;SetY2(${t.fY2});;`),this.submitCanvExec(e+"Notify();;")}prepareDraw(){const n=this.getObject();this.isndc=n.TestBit(r);const t=this.getAxisToSvgFunc(this.isndc,!0,!0);this.x1=t.x(n.fX1),this.y1=t.y(n.fY1),this.x2=t.x(n.fX2),this.y2=t.y(n.fY2),this.createAttLine({attr:n})}createPath(){const n=Math.round(this.x1),t=Math.round(this.x2),e=Math.round(this.y1),s=Math.round(this.y2);return`M${n},${e}`+(n===t?`V${s}`:e===s?`H${t}`:`L${t},${s}`)}addExtras(){}redraw(){this.createG(),this.prepareDraw();const n=this.draw_g.append("svg:path").attr("d",this.createPath()).call(this.lineatt.func);return this.getObject()?.$do_not_draw?n.remove():(this.addExtras(n),(0,y.X2)(this),(0,c.wh)(this,c.Ew)),this}static draw(n,t,e){return(0,a.A)(function*(){const s=new v(n,t,e);return(0,E.ensureTCanvas)(s,!1).then(()=>s.redraw())})()}}},5562:(C,M,_)=>{_.d(M,{Y:()=>E});var a=_(467),x=_(5461),D=_(5308);function E(){return y.apply(this,arguments)}function y(){return(y=(0,a.A)(function*(){const c=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,x.isObject)(c)&&c.grx&&c.gry&&c.grz))return this;const r=this.getObject(),f=r.fP;let n=1,t=0;for(let i=0;i<f.length;i+=3)f[i]<c.scale_xmin||f[i]>c.scale_xmax||f[i+1]<c.scale_ymin||f[i+1]>c.scale_ymax||f[i+2]<c.scale_zmin||f[i+2]>c.scale_zmax||++t;x.settings.OptimizeDraw>0&&t>5e4&&(n=Math.floor(t/5e4),n<=2&&(n=2));const e=Math.floor(t/n),s=new D._l(e,c.webgl,c.size_x3d/100),o=new Int32Array(e);let l=0,d=0;for(let i=0;i<f.length;i+=3)f[i]<c.scale_xmin||f[i]>c.scale_xmax||f[i+1]<c.scale_ymin||f[i+1]>c.scale_ymax||f[i+2]<c.scale_zmin||f[i+2]>c.scale_zmax||n>1&&(l=(l+1)%n,0!==l)||(o[d++]=i,s.addPoint(c.grx(f[i]),c.gry(f[i+1]),c.grz(f[i+2])));return s.createPoints({color:this.getColor(r.fMarkerColor),style:r.fMarkerStyle}).then(i=>(i.tip_color=3===r.fMarkerColor?16711680:65280,i.tip_name=r.fName||"Poly3D",i.poly=r,i.fp=c,i.scale0=.7*s.scale,i.index=o,c.add3DMesh(i,this,!0),i.tooltip=function(m){let h=Math.floor(m.index/this.nvertex);if(h<0||h>=this.index.length)return null;h=this.index[h];const u=this.fp,p=u.grx(this.poly.fP[h]),g=u.gry(this.poly.fP[h+1]),P=u.grz(this.poly.fP[h+2]);return{x1:p-this.scale0,x2:p+this.scale0,y1:g-this.scale0,y2:g+this.scale0,z1:P-this.scale0,z2:P+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+h/3,"x: "+u.axisAsText("x",this.poly.fP[h]),"y: "+u.axisAsText("y",this.poly.fP[h+1]),"z: "+u.axisAsText("z",this.poly.fP[h+2])]}},c.render3D(100),this))})).apply(this,arguments)}},5727:(C,M,_)=>{_.r(M),_.d(M,{TF1Painter:()=>f,produceTAxisLogScale:()=>v});var a=_(467),x=_(5461),D=_(3282),E=_(3641),y=_(6084),c=_(8527),r=_(1568);function v(n,t,e,s){let o,l;s>0?(l=Math.log(s),o=e>0?Math.log(e):l-5):(l=-10,o=-15),n.fNbins=t,n.fXbins=new Array(t+1);for(let d=0;d<=t;++d)n.fXbins[d]=Math.exp(o+d/t*(l-o));n.fXmin=Math.exp(o),n.fXmax=Math.exp(l)}class f extends c.N{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??x.clTF1}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(t){if(!t||this.getClassName()!==t._typename)return!1;delete t.evalPar;const e=this.getHisto();if(this.webcanv_hist){const s=this.getPadPainter()?.findInPrimitives("Func",x.clTH1D);s&&this.updateAxes(e,s,this.getFramePainter())}return this.$func=t,this.createTF1Histogram(t,e),this.scanContent(),!0}redraw(t){return!this._use_saved_points&&("logx"===t||"zoom"===t)&&(this.createTF1Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(t)}createTF1Histogram(t,e){const s=this.getFramePainter(),o=this.getPadPainter()?.getRootPad(!0),l=o?.fLogx,d=s?.getGrFuncs(this.second_x,this.second_y);let i=t.fXmin,m=t.fXmax;d?.zoom_xmin!==d?.zoom_xmax&&(i=Math.min(i,d.zoom_xmin),m=Math.max(m,d.zoom_xmax)),this._use_saved_points=t.fSave.length>3&&(x.settings.PreferSavedPoints||this.force_saved);const h=u=>{e.fNcells!==u+2&&(e.fNcells=u+2,e.fArray=new Float32Array(e.fNcells)),e.fArray.fill(0),e.fXaxis.fNbins=u,e.fXaxis.fXbins=[]};if(delete this._fail_eval,!this._use_saved_points){const u=Math.max(t.fNpx,100);let p=!1;if(!t.evalPar)try{(0,r.Dx)(t)||(p=!0)}catch{p=!0}h(u),l?v(e.fXaxis,u,i,m):(e.fXaxis.fXmin=i,e.fXaxis.fXmax=m);for(let g=0;g<u&&!p;g++){const P=e.fXaxis.GetBinCenter(g+1);let T=0;try{T=t.evalPar(P)}catch{p=!0}p||e.setBinContent(g+1,Number.isFinite(T)?T:0)}p&&(this._fail_eval=!0),p&&t.fSave.length>3&&(this._use_saved_points=!0)}if(this._use_saved_points){const u=t.fSave.length-3;let p=null;if(i=t.fSave[u+1],m=t.fSave[u+2],i===m){const g=this.getMainPainter();(0,x.isFunc)(g?.getHisto)&&(p=g?.getHisto()?.fXaxis)}if(p){h(e.fXaxis.fNbins),Object.assign(e.fXaxis,p);for(let g=0;g<u;++g){const P=t.fSave[g];e.setBinContent(g+1,Number.isFinite(P)?P:0)}}else{h(t.fNpx),e.fXaxis.fXmin=t.fXmin,e.fXaxis.fXmax=t.fXmax;for(let g=0;g<t.fNpx;++g){const P=(0,r.YI)(t,e.fXaxis.GetBinCenter(g+1));e.setBinContent(g+1,Number.isFinite(P)?P:0)}}}e.fName="Func",(0,x.setHistogramTitle)(e,t.fTitle),e.fMinimum=t.fMinimum,e.fMaximum=t.fMaximum,e.fLineColor=t.fLineColor,e.fLineStyle=t.fLineStyle,e.fLineWidth=t.fLineWidth,e.fFillColor=t.fFillColor,e.fFillStyle=t.fFillStyle,e.fMarkerColor=t.fMarkerColor,e.fMarkerStyle=t.fMarkerStyle,e.fMarkerSize=t.fMarkerSize,e.fBits|=x.kNoStats}extractAxesProperties(t){super.extractAxesProperties(t);const e=this.$func,s=e?.fSave.length??0;s>3&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,e.fSave[s-2]),this.xmax=Math.max(this.xmax,e.fSave[s-1])),e&&(this.xmin=Math.min(this.xmin,e.fXmin),this.xmax=Math.max(this.xmax,e.fXmax))}canZoomInside(t,e,s){if(this.$func?.fSave.length>0&&this._use_saved_points&&"x"===t){const o=this.$func.fNpx;return Math.abs(this.$func.fSave[o+2]-this.$func.fSave[o+1])/o<Math.abs(s-e)}return"x"===t||"y"===t}getTF1Tooltips(t){delete this.$tmp_tooltip;const e=[this.getObjectHint()],s=this.getFramePainter()?.getGrFuncs(this.options.second_x,this.options.second_y);if(!s||!(0,x.isFunc)(this.$func?.evalPar))return e.push("grx = "+t.x,"gry = "+t.y),e;const o=s.revertAxis("x",t.x);let l=0,d=0,i=!1;try{l=this.$func.evalPar(o),d=Math.round(s.gry(l))}catch{i=!0}return e.push("x = "+s.axisAsText("x",o),"value = "+(i?"<fail>":(0,D.lg)(l,x.gStyle.fStatFormat))),i||(this.$tmp_tooltip={y:l,gry:d}),e}processTooltipEvent(t){if(this._use_saved_points)return super.processTooltipEvent(t);let e=this.draw_g?.selectChild(".tooltip_bin");if(!this.draw_g||!t)return e?.remove(),null;const s={name:this.$func?.fName,title:this.$func?.fTitle,x:t.x,y:t.y,color1:this.lineatt?.color??"green",color2:this.fillatt?.getFillColorAlt("blue")??"blue",lines:this.getTF1Tooltips(t),exact:!0,menu:!0};return t.disabled?e.remove():(e.empty()&&(e=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").style("fill","none").attr("r",(this.lineatt?.width??1)+4)),e.attr("cx",t.x).attr("cy",this.$tmp_tooltip.gry??t.y).call(this.lineatt?.func)),s}fillWebObjectOptions(t){t.fcust=this._fail_eval?"func_fail":""}static draw(t,e,s){return(0,a.A)(function*(){(0,x.isStr)(s)||(s="");let i,o=s.indexOf(";webcanv_hist"),l=!1,d=!1;o>=0&&(l=!0,s=s.slice(0,o)),o=s.indexOf(";force_saved"),o>=0&&(d=!0,s=s.slice(0,o)),l&&(i=new E.JW(t).getPadPainter()?.findInPrimitives("Func",x.clTH1D)),i||(i=(0,x.createHistogram)(x.clTH1D,100),i.fBits|=x.kNoStats),!s&&(0,E.Nn)(t)&&(s="same");const m=new f(t,i);return m.$func=e,m.webcanv_hist=l,m.force_saved=d,m.createTF1Histogram(e,i),y.mf._drawHist(m,s)})()}}},8884:(C,M,_)=>{_.d(M,{k:()=>y});var a=_(467),x=_(3026),D=_(3829),E=_(5308);class y extends x.TGraphPainter{drawBins3D(r,v){if(!(r.mode3d&&r.grx&&r.gry&&r.grz&&r.toplevel))return console.log("Frame painter missing base 3d elements");if(r.zoom_xmin!==r.zoom_xmax&&(this.options.pos3d<r.zoom_xmin||this.options.pos3d>r.zoom_xmax))return;this.createGraphDrawAttributes(!0);const f=this.optimizeBins(1e3);let n=0,t=f.length-1;if(r.zoom_ymin!==r.zoom_ymax){for(;n<t&&f[n].x<r.zoom_ymin;)n++;for(;n<t&&f[t].x>r.zoom_ymax;)t--}if(n===t)return;const e=[],s=r.grx(this.options.pos3d);let o=f[n];for(let d=n+1;d<=t;++d){const i=f[d];e.push(s,r.gry(o.x),r.grz(o.y),s,r.gry(i.x),r.grz(i.y)),o=i}const l=(0,E.Fc)(e,(0,E.DH)(this,v));r.add3DMesh(l,this,!0),r.render3D(100)}drawAxisHisto(){var r=this;return(0,a.A)(function*(){return D.TH1Painter.draw(r.getDom(),r.createHistogram(),r.options.Axis)})()}static draw(r,v,f){return(0,a.A)(function*(){return y._drawGraph(new y(r,v),f)})()}}}}]);