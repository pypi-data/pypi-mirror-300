function miniumRequestStack(){if(!global.__minium__.request_stack){var a=function(a,b){if("https://weapp.tencent.com/jscov_driver/CollectCovTimer"!=a.url){var e=(getCurrentPages().pop()||{}).__wxWebviewId__;if(e){var f;c.has(e)?f=c.get(e):(f=new Map,c.set(e,f)),f.set(b,[Date.now(),a.url]),d.set(b,{pageId:e,requestMap:f})}}},b=function(a,b){if(d.has(b)){var e=d.get(b),f=e.pageId,g=e.requestMap;d["delete"](b),g["delete"](b),0===g.size&&c["delete"](f)}},c=global.__minium__.request_stack=new Map;global.__minium__.wait_util=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,d=(getCurrentPages().pop()||{}).__wxWebviewId__;return new Promise(function(e){var f=2*b,g=setInterval(function(){f--;var b=c.has(d)?c.get(d).size:0;console.debug("[minitest] current stack size: ",b),b<=a?(clearInterval(g),e(!0)):0>=f&&(clearInterval(g),console.warn("".concat(c.has(d)?Array.from(c.get(d)):"empty stack")),e(!1))},500)})};var d=new Map;return global.__minium__.setCall("request","requestStack",{before:a,callback:b},!0),!0}return!1}