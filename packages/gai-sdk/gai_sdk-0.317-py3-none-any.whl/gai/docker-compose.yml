services:
#     gai-ttt:
#         image: kakkoii1337/gai-ttt-svr-exllamav2:1.0.3
#         container_name: gai-ttt
#         environment:
#             DEFAULT_GENERATOR: "ttt-exllamav2-mistral7b"
#             LOG_LEVEL: "DEBUG"
#             TZ: "Asia/Singapore"
#             SWAGGER_URL: "/doc"
#         deploy:
#             resources:
#                 reservations:
#                     devices:
#                         - capabilities: [gpu]
#                           driver: nvidia
#                           count: all
#         ports:
#             - "12031:12031"
#             - "5678:5678"
#         networks:
#             - gai-sandbox
#         volumes:
#             - ~/.gai:/root/.gai
#         command: python -m debugpy --listen 0.0.0.0:5678 main.py
#         #command: sleep infinity
#     gai-rag:
#         image: kakkoii1337/gai-rag-svr:1.0.10
#         container_name: gai-rag
#         environment:
#             DOCKER_BUILDKIT: 1
#             LOG_LEVEL: "DEBUG"
#             TZ: "Asia/Singapore"
#             SWAGGER_URL: "/doc"
#             DEFAULT_GENERATOR: "rag-instructor-sentencepiece"
#         deploy:
#             resources:
#                 reservations:
#                     devices:
#                         - capabilities: [gpu]
#                           driver: nvidia
#                           count: all
#         ports:
#             - "12036:12036"
#             - "5679:5679"
#         networks:
#             - gai-sandbox
#         volumes:
#             - ~/.gai:/app/.gai
#     gai-tti:
#         image: kakkoii1337/gai-tti-svr:1.0.9
#         container_name: gai-tti
#         environment:
#             CLI_ARGS: "--listen --api --xformers --medvram --no-download-sd-model --ckpt /stable-diffusion-webui/models/Stable-diffusion/runwayml/v1-5-pruned-emaonly.safetensors"
#         deploy:
#             resources:
#                 reservations:
#                     devices:
#                         - capabilities: [gpu]
#                           driver: nvidia
#                           count: all
#         ports:
#             - "12035:12035"
#         networks:
#             - gai-sandbox
#         volumes:
#             - ~/.gai/models/Stable-diffusion:/stable-diffusion-webui/models/Stable-diffusion
#             - ~/.gai/models/VAE:/stable-diffusion-webui/models/VAE

    nats01:
        image: nats:latest
        container_name: nats01
        ports:
            - "4222:4222" # Client port
            - "8222:8222" # Monitoring port
            - "6222:6222" # Cluster port
        command:
            - "--cluster"
            - "nats://0.0.0.0:6222"
            # - "--routes"
            # - "nats://nats02:6223"
            # - "--routes"
            # - "nats://nats03:6224"
        restart: unless-stopped


# networks:
#     gai-sandbox:
#         external: true
