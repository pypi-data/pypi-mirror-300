var _o=Object.defineProperty;var cl=e=>{throw TypeError(e)};var Ao=(e,n,t)=>n in e?_o(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var K=(e,n,t)=>Ao(e,typeof n!="symbol"?n+"":n,t),Ut=(e,n,t)=>n.has(e)||cl("Cannot "+t);var c=(e,n,t)=>(Ut(e,n,"read from private field"),t?t.call(e):n.get(e)),D=(e,n,t)=>n.has(e)?cl("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),I=(e,n,t,l)=>(Ut(e,n,"write to private field"),l?l.call(e,t):n.set(e,t),t),x=(e,n,t)=>(Ut(e,n,"access private method"),t);var yt=(e,n,t,l)=>({set _(o){I(e,n,o,t)},get _(){return c(e,n,l)}});import{x as xo,a as Eo,k as fn,W as Jt,U as Io,C as Lo,$ as Fo,M as Ho}from"./@vavt-gYAenMAp.js";import{d as J,i as M,c as m,r as ve,a as q,w as H,o as Y,b as bt,e as Yt,s as Je,f as ge,n as Pe,T as Oo,h as Mo,F as Nt,p as Re,t as je,g as Po}from"./@vue-CCsYaBvc.js";import{E as Be,H as Ul,s as Gl,k as Ro,d as Do,h as No,i as Bo,a as ul,m as jo,u as zo,r as Wo,b as Vo,c as De,e as Gt,f as Uo,p as Go,C as lt,l as qo,g as Ko,S as Xo,j as Zo}from"./@codemirror-DmN_zXa9.js";import{a as C}from"./@lezer-GBmThkPu.js";import{m as Qo}from"./medium-zoom-bWEtUbjf.js";import{c as Jo}from"./copy-to-clipboard-B1uT6SkR.js";import{M as Yo}from"./markdown-it-DI8MEbma.js";import{r as ei}from"./markdown-it-image-figures-BD49Kf-b.js";import{T as ti}from"./markdown-it-task-lists-BNI9E7ji.js";import{p as qt}from"./vite-plugin-node-polyfills-Cgl3E5jI.js";const f="md-editor",ni="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.js",li="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.css",G="https://cdnjs.cloudflare.com/ajax/libs",oi=`${G}/highlight.js/11.8.0/highlight.min.js`,dl={main:`${G}/prettier/2.8.0/standalone.js`,markdown:`${G}/prettier/2.8.0/parser-markdown.js`},ii={css:`${G}/cropperjs/1.5.13/cropper.min.css`,js:`${G}/cropperjs/1.5.13/cropper.min.js`},ai=`${G}/screenfull.js/5.2.0/screenfull.min.js`,ql=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Kl=["markdownTotal","=","scrollSwitch"],fl={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Img Link",upload:"Upload Img",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},ri=`${G}/mermaid/10.6.1/mermaid.esm.min.mjs`,si={js:`${G}/KaTeX/0.16.9/katex.min.js`,css:`${G}/KaTeX/0.16.9/katex.min.css`},en={a11y:{light:`${G}/highlight.js/11.8.0/styles/a11y-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/a11y-dark.min.css`},atom:{light:`${G}/highlight.js/11.8.0/styles/atom-one-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/atom-one-dark.min.css`},github:{light:`${G}/highlight.js/11.8.0/styles/github.min.css`,dark:`${G}/highlight.js/11.8.0/styles/github-dark.min.css`},gradient:{light:`${G}/highlight.js/11.8.0/styles/gradient-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/gradient-dark.min.css`},kimbie:{light:`${G}/highlight.js/11.8.0/styles/kimbie-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/kimbie-dark.min.css`},paraiso:{light:`${G}/highlight.js/11.8.0/styles/paraiso-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${G}/highlight.js/11.8.0/styles/qtcreator-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${G}/highlight.js/11.8.0/styles/stackoverflow-light.min.css`,dark:`${G}/highlight.js/11.8.0/styles/stackoverflow-dark.min.css`}},le={editorExtensions:{highlight:{js:oi,css:en},prettier:{standaloneJs:dl.main,parserMarkdownJs:dl.markdown},cropper:{...ii},iconfont:ni,iconfontClass:li,screenfull:{js:ai},mermaid:{js:ri},katex:{...si}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,n)=>n,markdownItConfig:()=>{},markdownItPlugins:e=>e,iconfontType:"svg",mermaidConfig:e=>e},wt=170,Ae=({instance:e,ctx:n,props:t={}},l="default")=>{const o=(e==null?void 0:e.$slots[l])||(n==null?void 0:n.slots[l]);return(o?o(e):"")||t[l]},ci={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"}},ot=J({props:ci,setup(e,n){const t=`${f}-dropdown-hidden`,l=ve({overlayClass:[t],overlayStyle:{},triggerHover:!1,overlayHover:!1}),o=q(),i=q(),a=()=>{var r,d;l.triggerHover=!0;const p=o.value,k=i.value;if(!p||!k)return;const b=p.getBoundingClientRect(),v=p.offsetTop,w=p.offsetLeft,g=b.height,y=b.width,S=((r=document.querySelector(e.relative))==null?void 0:r.scrollLeft)||0,T=((d=document.querySelector(e.relative))==null?void 0:d.clientWidth)||0;let A=w-k.offsetWidth/2+y/2-S;A+k.offsetWidth>S+T&&(A=S+T-k.offsetWidth),A<0&&(A=0),l.overlayStyle={...l.overlayStyle,top:v+g+"px",left:A+"px"},e.onChange(!0)},h=()=>{l.overlayHover=!0};H(()=>e.visible,r=>{r?l.overlayClass=l.overlayClass.filter(d=>d!==t):l.overlayClass.push(t)});let s=-1;const u=r=>{o.value===r.target?l.triggerHover=!1:l.overlayHover=!1,clearTimeout(s),s=window.setTimeout(()=>{!l.overlayHover&&!l.triggerHover&&e.onChange(!1)},10)};return Y(()=>{o.value.addEventListener("mouseenter",a),o.value.addEventListener("mouseleave",u),i.value.addEventListener("mouseenter",h),i.value.addEventListener("mouseleave",u)}),bt(()=>{o.value.removeEventListener("mouseenter",a),o.value.removeEventListener("mouseleave",u),i.value.removeEventListener("mouseenter",h),i.value.removeEventListener("mouseleave",u)}),()=>{const r=Ae({ctx:n}),d=Ae({props:e,ctx:n},"overlay"),p=Yt(r instanceof Array?r[0]:r,{ref:o,key:"cloned-dropdown-trigger"}),k=m("div",{class:[`${f}-dropdown`,l.overlayClass],style:l.overlayStyle,ref:i},[m("div",{class:`${f}-dropdown-overlay`},[d instanceof Array?d[0]:d])]);return[p,k]}}}),ui={title:{type:String,default:""},visible:{type:Boolean},trigger:{type:[String,Object]},onChange:{type:Function},overlay:{type:[String,Object]},insert:{type:Function},language:{type:String},theme:{type:String},previewTheme:{type:String},default:{type:[String,Object]}},_t=J({name:"DropdownToolbar",props:ui,emits:["onChange"],setup(e,n){const t=M("editorId");return()=>{const l=Ae({props:e,ctx:n},"trigger"),o=Ae({props:e,ctx:n},"overlay"),i=Ae({props:e,ctx:n});return m(ot,{relative:`#${t}-toolbar-wrapper`,visible:e.visible,onChange:a=>{e.onChange instanceof Function?e.onChange(a):n.emit("onChange",a)},overlay:o},{default:()=>[m("div",{class:`${f}-toolbar-item`,title:e.title||""},[l,i])]})}}});_t.install=e=>(e.component(_t.name,_t),e);var di=Object.defineProperty,fi=(e,n,t)=>n in e?di(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,hi=(e,n,t)=>(fi(e,n+"",t),t);class mi{constructor(){hi(this,"pools",{})}remove(n,t,l){const i=this.pools[n]&&this.pools[n][t];i&&(this.pools[n][t]=i.filter(a=>a!==l))}clear(n){this.pools[n]={}}on(n,t){return this.pools[n]||(this.pools[n]={}),this.pools[n][t.name]||(this.pools[n][t.name]=[]),this.pools[n][t.name].push(t.callback),this.pools[n][t.name].includes(t.callback)}emit(n,t,...l){this.pools[n]||(this.pools[n]={});const i=this.pools[n][t];i&&i.forEach(a=>{try{a(...l)}catch(h){console.error(`${t} monitor event exception！`,h)}})}}const $=new mi,Bt="onSave",hn="changeCatalogVisible",Xl="changeFullscreen",hl="pageFullscreenChanged",ml="fullscreenChanged",gl="previewChanged",vl="previewOnlyChanged",pl="htmlPreviewChanged",bl="catalogVisibleChanged",At="buildFinished",Ye="errorCatcher",B="replace",jt="uploadImage",tn="openModals",Zl="ctrlZ",Ql="ctrlShiftZ",xt="catalogChanged",Jl="pushCatalog",mn="rerender",Yl="eventListener",yl=(e,n)=>{const t=l=>{const o=e.parentElement||document.body,i=o.offsetWidth,a=o.offsetHeight,{clientWidth:h,clientHeight:s}=document.documentElement,u=l.offsetX,r=l.offsetY,d=k=>{let b=k.x+document.body.scrollLeft-document.body.clientLeft-u,v=k.y+document.body.scrollTop-document.body.clientTop-r;b=b<1?1:b<h-i-1?b:h-i-1,v=v<1?1:v<s-a-1?v:s-a-1,n?n(b,v):(o.style.left=`${b}px`,o.style.top=`${v}px`)};document.addEventListener("mousemove",d);const p=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p)};document.addEventListener("mouseup",p)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}},ye=(e,n,t="")=>{var l;const o=document.getElementById(n.id);if(o)t!==""&&(Reflect.get(window,t)?(l=n.onload)==null||l.call(o,new Event("load")):n.onload&&o.addEventListener("load",n.onload));else{const i={...n};i.onload=null;const a=vi(e,i);n.onload&&a.addEventListener("load",n.onload),document.head.appendChild(a)}},gi=(e,n)=>{const t=document.getElementById(n.id);t==null||t.remove(),ye(e,n)},vi=(e,n)=>{const t=document.createElement(e);return Object.keys(n).forEach(l=>{n[l]!==void 0&&(t[l]=n[l])}),t},pi=(e,n="image.png")=>{const t=e.split(","),l=t[0].match(/:(.*?);/);if(l){const o=l[1],i=atob(t[1]);let a=i.length;const h=new Uint8Array(a);for(;a--;)h[a]=i.charCodeAt(a);return new File([h],n,{type:o})}return null},bi=e=>{if(!e)return e;const n=e.split(`
`),t=['<span rn-wrapper aria-hidden="true">'];return n.forEach(()=>{t.push("<span></span>")}),t.push("</span>"),`<span class="${f}-code-block">${e}</span>${t.join("")}`},yi=(e,n)=>{if(!e||!n)return 0;const t=e==null?void 0:e.getBoundingClientRect();if(n===document.documentElement)return t.top-n.clientTop;const l=n==null?void 0:n.getBoundingClientRect();return t.top-l.top},wi=(()=>{let e=0;return n=>n+ ++e})(),wl=(()=>{let e=0;return()=>++e})(),ki=J({props:{name:{type:String,default:""}},setup(e){return()=>m("svg",{class:`${f}-icon`,"aria-hidden":"true"},[m("use",{"xlink:href":`#${f}-icon-${e.name}`},null)])}}),R=J({props:{name:{type:String,default:""}},setup(e){const n=M("customIcon");return()=>{const t=n.value[e.name];return typeof t=="object"?typeof t.component=="object"?Mo(t.component,t.props):m("span",{innerHTML:t.component},null):m(ki,{name:e.name},null)}}}),Ci={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},it=J({name:"MdModal",props:Ci,emits:["onClose"],setup(e,n){const t=M("theme"),l=q(e.visible),o=q([`${f}-modal`]),i=q(),a=q(),h=q(),s=Je();let u=()=>{};const r=ve({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),d=ge(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});H(()=>e.isFullscreen,b=>{b?u():Pe(()=>{u=yl(a.value,(v,w)=>{r.initPos.left=v+"px",r.initPos.top=w+"px"})})}),H(()=>e.visible,b=>{b?(r.maskStyle.zIndex=le.editorConfig.zIndex+wl(),r.modalStyle.zIndex=le.editorConfig.zIndex+wl(),o.value.push("zoom-in"),l.value=b,Pe(()=>{const v=i.value.offsetWidth/2,w=i.value.offsetHeight/2,g=document.documentElement.clientWidth/2,y=document.documentElement.clientHeight/2;r.initPos.left=g-v+"px",r.initPos.top=y-w+"px",e.isFullscreen||(u=yl(a.value,(S,T)=>{r.initPos.left=S+"px",r.initPos.top=T+"px"}))}),setTimeout(()=>{o.value=o.value.filter(v=>v!=="zoom-in")},140)):(o.value.push("zoom-out"),u(),setTimeout(()=>{o.value=o.value.filter(v=>v!=="zoom-out"),l.value=b},130))});const p=ge(()=>({display:l.value?"block":"none"})),k=ge(()=>typeof e.style=="string"?[e.style,p.value].join("; "):e.style instanceof Object?{...p.value,...e.style}:p.value);return Y(()=>{h.value=document.body}),()=>{const b=Ae({ctx:n}),v=Ae({props:e,ctx:n},"title");return h.value?m(Oo,{to:h.value},{default:()=>[m("div",{ref:s,class:`${f}-modal-container`,"data-theme":t.value},[m("div",{class:e.class,style:k.value},[e.showMask&&m("div",{class:`${f}-modal-mask`,style:r.maskStyle,onClick:()=>{e.onClose?e.onClose():n.emit("onClose")}},null),m("div",{class:o.value,style:{...r.modalStyle,...r.initPos,...d.value},ref:i},[m("div",{class:`${f}-modal-header`,ref:a},[v||""]),m("div",{class:`${f}-modal-body`},[b]),m("div",{class:`${f}-modal-func`},[e.showAdjust&&m("div",{class:`${f}-modal-adjust`,onClick:w=>{w.stopPropagation(),e.isFullscreen?r.initPos=r.historyPos:(r.historyPos=r.initPos,r.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[m(R,{name:e.isFullscreen?"suoxiao":"fangda"},null)]),m("div",{class:`${f}-modal-close`,onClick:w=>{w.stopPropagation(),e.onClose?e.onClose():n.emit("onClose")}},[m(R,{name:"close"},null)])])])])])]}):""}}});it.install=e=>(e.component(it.name,it),e);const tt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,eo=new Set,nn=typeof qt=="object"&&qt?qt:{},to=(e,n,t,l)=>{typeof nn.emitWarning=="function"?nn.emitWarning(e,n,t,l):console.error(`[${t}] ${n}: ${e}`)};let Pt=globalThis.AbortController,kl=globalThis.AbortSignal;var zl;if(typeof Pt>"u"){kl=class{constructor(){K(this,"onabort");K(this,"_onabort",[]);K(this,"reason");K(this,"aborted",!1)}addEventListener(l,o){this._onabort.push(o)}},Pt=class{constructor(){K(this,"signal",new kl);n()}abort(l){var o,i;if(!this.signal.aborted){this.signal.reason=l,this.signal.aborted=!0;for(const a of this.signal._onabort)a(l);(i=(o=this.signal).onabort)==null||i.call(o,l)}}};let e=((zl=nn.env)==null?void 0:zl.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const n=()=>{e&&(e=!1,to("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",n))}}const Ti=e=>!eo.has(e),We=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),no=e=>We(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Et:null:null;class Et extends Array{constructor(n){super(n),this.fill(0)}}var at;const Xe=class Xe{constructor(n,t){K(this,"heap");K(this,"length");if(!c(Xe,at))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(n),this.length=0}static create(n){const t=no(n);if(!t)return[];I(Xe,at,!0);const l=new Xe(n,t);return I(Xe,at,!1),l}push(n){this.heap[this.length++]=n}pop(){return this.heap[--this.length]}};at=new WeakMap,D(Xe,at,!1);let ln=Xe;var Wl,Vl,xe,we,Ee,Ie,rt,st,ne,Le,te,U,L,he,ke,de,ae,Fe,re,He,Oe,Ce,Me,Ke,me,_,an,Ze,Ne,vt,Te,lo,Qe,ct,pt,Ve,Ue,rn,It,Lt,V,sn,dt,Ge,cn;const pn=class pn{constructor(n){D(this,_);D(this,xe);D(this,we);D(this,Ee);D(this,Ie);D(this,rt);D(this,st);K(this,"ttl");K(this,"ttlResolution");K(this,"ttlAutopurge");K(this,"updateAgeOnGet");K(this,"updateAgeOnHas");K(this,"allowStale");K(this,"noDisposeOnSet");K(this,"noUpdateTTL");K(this,"maxEntrySize");K(this,"sizeCalculation");K(this,"noDeleteOnFetchRejection");K(this,"noDeleteOnStaleGet");K(this,"allowStaleOnFetchAbort");K(this,"allowStaleOnFetchRejection");K(this,"ignoreFetchAbort");D(this,ne);D(this,Le);D(this,te);D(this,U);D(this,L);D(this,he);D(this,ke);D(this,de);D(this,ae);D(this,Fe);D(this,re);D(this,He);D(this,Oe);D(this,Ce);D(this,Me);D(this,Ke);D(this,me);D(this,Ze,()=>{});D(this,Ne,()=>{});D(this,vt,()=>{});D(this,Te,()=>!1);D(this,Qe,n=>{});D(this,ct,(n,t,l)=>{});D(this,pt,(n,t,l,o)=>{if(l||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});K(this,Wl,"LRUCache");const{max:t=0,ttl:l,ttlResolution:o=1,ttlAutopurge:i,updateAgeOnGet:a,updateAgeOnHas:h,allowStale:s,dispose:u,disposeAfter:r,noDisposeOnSet:d,noUpdateTTL:p,maxSize:k=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:w,memoMethod:g,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:A,ignoreFetchAbort:O}=n;if(t!==0&&!We(t))throw new TypeError("max option must be a nonnegative integer");const P=t?no(t):Array;if(!P)throw new Error("invalid max value: "+t);if(I(this,xe,t),I(this,we,k),this.maxEntrySize=b||c(this,we),this.sizeCalculation=v,this.sizeCalculation){if(!c(this,we)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(I(this,st,g),w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(I(this,rt,w),I(this,Ke,!!w),I(this,te,new Map),I(this,U,new Array(t).fill(void 0)),I(this,L,new Array(t).fill(void 0)),I(this,he,new P(t)),I(this,ke,new P(t)),I(this,de,0),I(this,ae,0),I(this,Fe,ln.create(t)),I(this,ne,0),I(this,Le,0),typeof u=="function"&&I(this,Ee,u),typeof r=="function"?(I(this,Ie,r),I(this,re,[])):(I(this,Ie,void 0),I(this,re,void 0)),I(this,Me,!!c(this,Ee)),I(this,me,!!c(this,Ie)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!O,this.maxEntrySize!==0){if(c(this,we)!==0&&!We(c(this,we)))throw new TypeError("maxSize must be a positive integer if specified");if(!We(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");x(this,_,lo).call(this)}if(this.allowStale=!!s,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!h,this.ttlResolution=We(o)||o===0?o:1,this.ttlAutopurge=!!i,this.ttl=l||0,this.ttl){if(!We(this.ttl))throw new TypeError("ttl must be a positive integer if specified");x(this,_,an).call(this)}if(c(this,xe)===0&&this.ttl===0&&c(this,we)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!c(this,xe)&&!c(this,we)){const E="LRU_CACHE_UNBOUNDED";Ti(E)&&(eo.add(E),to("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",E,pn))}}static unsafeExposeInternals(n){return{starts:c(n,Oe),ttls:c(n,Ce),sizes:c(n,He),keyMap:c(n,te),keyList:c(n,U),valList:c(n,L),next:c(n,he),prev:c(n,ke),get head(){return c(n,de)},get tail(){return c(n,ae)},free:c(n,Fe),isBackgroundFetch:t=>{var l;return x(l=n,_,V).call(l,t)},backgroundFetch:(t,l,o,i)=>{var a;return x(a=n,_,Lt).call(a,t,l,o,i)},moveToTail:t=>{var l;return x(l=n,_,dt).call(l,t)},indexes:t=>{var l;return x(l=n,_,Ve).call(l,t)},rindexes:t=>{var l;return x(l=n,_,Ue).call(l,t)},isStale:t=>{var l;return c(l=n,Te).call(l,t)}}}get max(){return c(this,xe)}get maxSize(){return c(this,we)}get calculatedSize(){return c(this,Le)}get size(){return c(this,ne)}get fetchMethod(){return c(this,rt)}get memoMethod(){return c(this,st)}get dispose(){return c(this,Ee)}get disposeAfter(){return c(this,Ie)}getRemainingTTL(n){return c(this,te).has(n)?1/0:0}*entries(){for(const n of x(this,_,Ve).call(this))c(this,L)[n]!==void 0&&c(this,U)[n]!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield[c(this,U)[n],c(this,L)[n]])}*rentries(){for(const n of x(this,_,Ue).call(this))c(this,L)[n]!==void 0&&c(this,U)[n]!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield[c(this,U)[n],c(this,L)[n]])}*keys(){for(const n of x(this,_,Ve).call(this)){const t=c(this,U)[n];t!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield t)}}*rkeys(){for(const n of x(this,_,Ue).call(this)){const t=c(this,U)[n];t!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield t)}}*values(){for(const n of x(this,_,Ve).call(this))c(this,L)[n]!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield c(this,L)[n])}*rvalues(){for(const n of x(this,_,Ue).call(this))c(this,L)[n]!==void 0&&!x(this,_,V).call(this,c(this,L)[n])&&(yield c(this,L)[n])}[(Vl=Symbol.iterator,Wl=Symbol.toStringTag,Vl)](){return this.entries()}find(n,t={}){for(const l of x(this,_,Ve).call(this)){const o=c(this,L)[l],i=x(this,_,V).call(this,o)?o.__staleWhileFetching:o;if(i!==void 0&&n(i,c(this,U)[l],this))return this.get(c(this,U)[l],t)}}forEach(n,t=this){for(const l of x(this,_,Ve).call(this)){const o=c(this,L)[l],i=x(this,_,V).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&n.call(t,i,c(this,U)[l],this)}}rforEach(n,t=this){for(const l of x(this,_,Ue).call(this)){const o=c(this,L)[l],i=x(this,_,V).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&n.call(t,i,c(this,U)[l],this)}}purgeStale(){let n=!1;for(const t of x(this,_,Ue).call(this,{allowStale:!0}))c(this,Te).call(this,t)&&(x(this,_,Ge).call(this,c(this,U)[t],"expire"),n=!0);return n}info(n){const t=c(this,te).get(n);if(t===void 0)return;const l=c(this,L)[t],o=x(this,_,V).call(this,l)?l.__staleWhileFetching:l;if(o===void 0)return;const i={value:o};if(c(this,Ce)&&c(this,Oe)){const a=c(this,Ce)[t],h=c(this,Oe)[t];if(a&&h){const s=a-(tt.now()-h);i.ttl=s,i.start=Date.now()}}return c(this,He)&&(i.size=c(this,He)[t]),i}dump(){const n=[];for(const t of x(this,_,Ve).call(this,{allowStale:!0})){const l=c(this,U)[t],o=c(this,L)[t],i=x(this,_,V).call(this,o)?o.__staleWhileFetching:o;if(i===void 0||l===void 0)continue;const a={value:i};if(c(this,Ce)&&c(this,Oe)){a.ttl=c(this,Ce)[t];const h=tt.now()-c(this,Oe)[t];a.start=Math.floor(Date.now()-h)}c(this,He)&&(a.size=c(this,He)[t]),n.unshift([l,a])}return n}load(n){this.clear();for(const[t,l]of n){if(l.start){const o=Date.now()-l.start;l.start=tt.now()-o}this.set(t,l.value,l)}}set(n,t,l={}){var p,k,b,v,w;if(t===void 0)return this.delete(n),this;const{ttl:o=this.ttl,start:i,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:h=this.sizeCalculation,status:s}=l;let{noUpdateTTL:u=this.noUpdateTTL}=l;const r=c(this,pt).call(this,n,t,l.size||0,h);if(this.maxEntrySize&&r>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),x(this,_,Ge).call(this,n,"set"),this;let d=c(this,ne)===0?void 0:c(this,te).get(n);if(d===void 0)d=c(this,ne)===0?c(this,ae):c(this,Fe).length!==0?c(this,Fe).pop():c(this,ne)===c(this,xe)?x(this,_,It).call(this,!1):c(this,ne),c(this,U)[d]=n,c(this,L)[d]=t,c(this,te).set(n,d),c(this,he)[c(this,ae)]=d,c(this,ke)[d]=c(this,ae),I(this,ae,d),yt(this,ne)._++,c(this,ct).call(this,d,r,s),s&&(s.set="add"),u=!1;else{x(this,_,dt).call(this,d);const g=c(this,L)[d];if(t!==g){if(c(this,Ke)&&x(this,_,V).call(this,g)){g.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=g;y!==void 0&&!a&&(c(this,Me)&&((p=c(this,Ee))==null||p.call(this,y,n,"set")),c(this,me)&&((k=c(this,re))==null||k.push([y,n,"set"])))}else a||(c(this,Me)&&((b=c(this,Ee))==null||b.call(this,g,n,"set")),c(this,me)&&((v=c(this,re))==null||v.push([g,n,"set"])));if(c(this,Qe).call(this,d),c(this,ct).call(this,d,r,s),c(this,L)[d]=t,s){s.set="replace";const y=g&&x(this,_,V).call(this,g)?g.__staleWhileFetching:g;y!==void 0&&(s.oldValue=y)}}else s&&(s.set="update")}if(o!==0&&!c(this,Ce)&&x(this,_,an).call(this),c(this,Ce)&&(u||c(this,vt).call(this,d,o,i),s&&c(this,Ne).call(this,s,d)),!a&&c(this,me)&&c(this,re)){const g=c(this,re);let y;for(;y=g==null?void 0:g.shift();)(w=c(this,Ie))==null||w.call(this,...y)}return this}pop(){var n;try{for(;c(this,ne);){const t=c(this,L)[c(this,de)];if(x(this,_,It).call(this,!0),x(this,_,V).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(c(this,me)&&c(this,re)){const t=c(this,re);let l;for(;l=t==null?void 0:t.shift();)(n=c(this,Ie))==null||n.call(this,...l)}}}has(n,t={}){const{updateAgeOnHas:l=this.updateAgeOnHas,status:o}=t,i=c(this,te).get(n);if(i!==void 0){const a=c(this,L)[i];if(x(this,_,V).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(c(this,Te).call(this,i))o&&(o.has="stale",c(this,Ne).call(this,o,i));else return l&&c(this,Ze).call(this,i),o&&(o.has="hit",c(this,Ne).call(this,o,i)),!0}else o&&(o.has="miss");return!1}peek(n,t={}){const{allowStale:l=this.allowStale}=t,o=c(this,te).get(n);if(o===void 0||!l&&c(this,Te).call(this,o))return;const i=c(this,L)[o];return x(this,_,V).call(this,i)?i.__staleWhileFetching:i}async fetch(n,t={}){const{allowStale:l=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:s=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:r=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:k=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:w=!1,status:g,signal:y}=t;if(!c(this,Ke))return g&&(g.fetch="get"),this.get(n,{allowStale:l,updateAgeOnGet:o,noDeleteOnStaleGet:i,status:g});const S={allowStale:l,updateAgeOnGet:o,noDeleteOnStaleGet:i,ttl:a,noDisposeOnSet:h,size:s,sizeCalculation:u,noUpdateTTL:r,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:b,ignoreFetchAbort:k,status:g,signal:y};let T=c(this,te).get(n);if(T===void 0){g&&(g.fetch="miss");const A=x(this,_,Lt).call(this,n,T,S,v);return A.__returned=A}else{const A=c(this,L)[T];if(x(this,_,V).call(this,A)){const j=l&&A.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",j&&(g.returnedStale=!0)),j?A.__staleWhileFetching:A.__returned=A}const O=c(this,Te).call(this,T);if(!w&&!O)return g&&(g.fetch="hit"),x(this,_,dt).call(this,T),o&&c(this,Ze).call(this,T),g&&c(this,Ne).call(this,g,T),A;const P=x(this,_,Lt).call(this,n,T,S,v),F=P.__staleWhileFetching!==void 0&&l;return g&&(g.fetch=O?"stale":"refresh",F&&O&&(g.returnedStale=!0)),F?P.__staleWhileFetching:P.__returned=P}}async forceFetch(n,t={}){const l=await this.fetch(n,t);if(l===void 0)throw new Error("fetch() returned undefined");return l}memo(n,t={}){const l=c(this,st);if(!l)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:i,...a}=t,h=this.get(n,a);if(!i&&h!==void 0)return h;const s=l(n,h,{options:a,context:o});return this.set(n,s,a),s}get(n,t={}){const{allowStale:l=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:a}=t,h=c(this,te).get(n);if(h!==void 0){const s=c(this,L)[h],u=x(this,_,V).call(this,s);return a&&c(this,Ne).call(this,a,h),c(this,Te).call(this,h)?(a&&(a.get="stale"),u?(a&&l&&s.__staleWhileFetching!==void 0&&(a.returnedStale=!0),l?s.__staleWhileFetching:void 0):(i||x(this,_,Ge).call(this,n,"expire"),a&&l&&(a.returnedStale=!0),l?s:void 0)):(a&&(a.get="hit"),u?s.__staleWhileFetching:(x(this,_,dt).call(this,h),o&&c(this,Ze).call(this,h),s))}else a&&(a.get="miss")}delete(n){return x(this,_,Ge).call(this,n,"delete")}clear(){return x(this,_,cn).call(this,"delete")}};xe=new WeakMap,we=new WeakMap,Ee=new WeakMap,Ie=new WeakMap,rt=new WeakMap,st=new WeakMap,ne=new WeakMap,Le=new WeakMap,te=new WeakMap,U=new WeakMap,L=new WeakMap,he=new WeakMap,ke=new WeakMap,de=new WeakMap,ae=new WeakMap,Fe=new WeakMap,re=new WeakMap,He=new WeakMap,Oe=new WeakMap,Ce=new WeakMap,Me=new WeakMap,Ke=new WeakMap,me=new WeakMap,_=new WeakSet,an=function(){const n=new Et(c(this,xe)),t=new Et(c(this,xe));I(this,Ce,n),I(this,Oe,t),I(this,vt,(i,a,h=tt.now())=>{if(t[i]=a!==0?h:0,n[i]=a,a!==0&&this.ttlAutopurge){const s=setTimeout(()=>{c(this,Te).call(this,i)&&x(this,_,Ge).call(this,c(this,U)[i],"expire")},a+1);s.unref&&s.unref()}}),I(this,Ze,i=>{t[i]=n[i]!==0?tt.now():0}),I(this,Ne,(i,a)=>{if(n[a]){const h=n[a],s=t[a];if(!h||!s)return;i.ttl=h,i.start=s,i.now=l||o();const u=i.now-s;i.remainingTTL=h-u}});let l=0;const o=()=>{const i=tt.now();if(this.ttlResolution>0){l=i;const a=setTimeout(()=>l=0,this.ttlResolution);a.unref&&a.unref()}return i};this.getRemainingTTL=i=>{const a=c(this,te).get(i);if(a===void 0)return 0;const h=n[a],s=t[a];if(!h||!s)return 1/0;const u=(l||o())-s;return h-u},I(this,Te,i=>{const a=t[i],h=n[i];return!!h&&!!a&&(l||o())-a>h})},Ze=new WeakMap,Ne=new WeakMap,vt=new WeakMap,Te=new WeakMap,lo=function(){const n=new Et(c(this,xe));I(this,Le,0),I(this,He,n),I(this,Qe,t=>{I(this,Le,c(this,Le)-n[t]),n[t]=0}),I(this,pt,(t,l,o,i)=>{if(x(this,_,V).call(this,l))return 0;if(!We(o))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(o=i(l,t),!We(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o}),I(this,ct,(t,l,o)=>{if(n[t]=l,c(this,we)){const i=c(this,we)-n[t];for(;c(this,Le)>i;)x(this,_,It).call(this,!0)}I(this,Le,c(this,Le)+n[t]),o&&(o.entrySize=l,o.totalCalculatedSize=c(this,Le))})},Qe=new WeakMap,ct=new WeakMap,pt=new WeakMap,Ve=function*({allowStale:n=this.allowStale}={}){if(c(this,ne))for(let t=c(this,ae);!(!x(this,_,rn).call(this,t)||((n||!c(this,Te).call(this,t))&&(yield t),t===c(this,de)));)t=c(this,ke)[t]},Ue=function*({allowStale:n=this.allowStale}={}){if(c(this,ne))for(let t=c(this,de);!(!x(this,_,rn).call(this,t)||((n||!c(this,Te).call(this,t))&&(yield t),t===c(this,ae)));)t=c(this,he)[t]},rn=function(n){return n!==void 0&&c(this,te).get(c(this,U)[n])===n},It=function(n){var i,a;const t=c(this,de),l=c(this,U)[t],o=c(this,L)[t];return c(this,Ke)&&x(this,_,V).call(this,o)?o.__abortController.abort(new Error("evicted")):(c(this,Me)||c(this,me))&&(c(this,Me)&&((i=c(this,Ee))==null||i.call(this,o,l,"evict")),c(this,me)&&((a=c(this,re))==null||a.push([o,l,"evict"]))),c(this,Qe).call(this,t),n&&(c(this,U)[t]=void 0,c(this,L)[t]=void 0,c(this,Fe).push(t)),c(this,ne)===1?(I(this,de,I(this,ae,0)),c(this,Fe).length=0):I(this,de,c(this,he)[t]),c(this,te).delete(l),yt(this,ne)._--,t},Lt=function(n,t,l,o){const i=t===void 0?void 0:c(this,L)[t];if(x(this,_,V).call(this,i))return i;const a=new Pt,{signal:h}=l;h==null||h.addEventListener("abort",()=>a.abort(h.reason),{signal:a.signal});const s={signal:a.signal,options:l,context:o},u=(v,w=!1)=>{const{aborted:g}=a.signal,y=l.ignoreFetchAbort&&v!==void 0;if(l.status&&(g&&!w?(l.status.fetchAborted=!0,l.status.fetchError=a.signal.reason,y&&(l.status.fetchAbortIgnored=!0)):l.status.fetchResolved=!0),g&&!y&&!w)return d(a.signal.reason);const S=k;return c(this,L)[t]===k&&(v===void 0?S.__staleWhileFetching?c(this,L)[t]=S.__staleWhileFetching:x(this,_,Ge).call(this,n,"fetch"):(l.status&&(l.status.fetchUpdated=!0),this.set(n,v,s.options))),v},r=v=>(l.status&&(l.status.fetchRejected=!0,l.status.fetchError=v),d(v)),d=v=>{const{aborted:w}=a.signal,g=w&&l.allowStaleOnFetchAbort,y=g||l.allowStaleOnFetchRejection,S=y||l.noDeleteOnFetchRejection,T=k;if(c(this,L)[t]===k&&(!S||T.__staleWhileFetching===void 0?x(this,_,Ge).call(this,n,"fetch"):g||(c(this,L)[t]=T.__staleWhileFetching)),y)return l.status&&T.__staleWhileFetching!==void 0&&(l.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw v},p=(v,w)=>{var y;const g=(y=c(this,rt))==null?void 0:y.call(this,n,i,s);g&&g instanceof Promise&&g.then(S=>v(S===void 0?void 0:S),w),a.signal.addEventListener("abort",()=>{(!l.ignoreFetchAbort||l.allowStaleOnFetchAbort)&&(v(void 0),l.allowStaleOnFetchAbort&&(v=S=>u(S,!0)))})};l.status&&(l.status.fetchDispatched=!0);const k=new Promise(p).then(u,r),b=Object.assign(k,{__abortController:a,__staleWhileFetching:i,__returned:void 0});return t===void 0?(this.set(n,b,{...s.options,status:void 0}),t=c(this,te).get(n)):c(this,L)[t]=b,b},V=function(n){if(!c(this,Ke))return!1;const t=n;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Pt},sn=function(n,t){c(this,ke)[t]=n,c(this,he)[n]=t},dt=function(n){n!==c(this,ae)&&(n===c(this,de)?I(this,de,c(this,he)[n]):x(this,_,sn).call(this,c(this,ke)[n],c(this,he)[n]),x(this,_,sn).call(this,c(this,ae),n),I(this,ae,n))},Ge=function(n,t){var o,i,a,h;let l=!1;if(c(this,ne)!==0){const s=c(this,te).get(n);if(s!==void 0)if(l=!0,c(this,ne)===1)x(this,_,cn).call(this,t);else{c(this,Qe).call(this,s);const u=c(this,L)[s];if(x(this,_,V).call(this,u)?u.__abortController.abort(new Error("deleted")):(c(this,Me)||c(this,me))&&(c(this,Me)&&((o=c(this,Ee))==null||o.call(this,u,n,t)),c(this,me)&&((i=c(this,re))==null||i.push([u,n,t]))),c(this,te).delete(n),c(this,U)[s]=void 0,c(this,L)[s]=void 0,s===c(this,ae))I(this,ae,c(this,ke)[s]);else if(s===c(this,de))I(this,de,c(this,he)[s]);else{const r=c(this,ke)[s];c(this,he)[r]=c(this,he)[s];const d=c(this,he)[s];c(this,ke)[d]=c(this,ke)[s]}yt(this,ne)._--,c(this,Fe).push(s)}}if(c(this,me)&&((a=c(this,re))!=null&&a.length)){const s=c(this,re);let u;for(;u=s==null?void 0:s.shift();)(h=c(this,Ie))==null||h.call(this,...u)}return l},cn=function(n){var t,l,o;for(const i of x(this,_,Ue).call(this,{allowStale:!0})){const a=c(this,L)[i];if(x(this,_,V).call(this,a))a.__abortController.abort(new Error("deleted"));else{const h=c(this,U)[i];c(this,Me)&&((t=c(this,Ee))==null||t.call(this,a,h,n)),c(this,me)&&((l=c(this,re))==null||l.push([a,h,n]))}}if(c(this,te).clear(),c(this,L).fill(void 0),c(this,U).fill(void 0),c(this,Ce)&&c(this,Oe)&&(c(this,Ce).fill(0),c(this,Oe).fill(0)),c(this,He)&&c(this,He).fill(0),I(this,de,0),I(this,ae,0),c(this,Fe).length=0,I(this,Le,0),I(this,ne,0),c(this,me)&&c(this,re)){const i=c(this,re);let a;for(;a=i==null?void 0:i.shift();)(o=c(this,Ie))==null||o.call(this,...a)}};let on=pn;function $i(e,n){for(var t=0;t<n.length;t++){const l=n[t];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(l,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Si=(e,n)=>{const t=M("editorId"),{noImgZoomIn:l}=e,o=fn(()=>{const i=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);i.length!==0&&Qo(i,{background:"#00000073"})});Y(()=>{!l&&e.setting.preview&&o()}),H([n,je(e.setting,"preview")],()=>{!l&&e.setting.preview&&o()})},_i=(e,n,t)=>{const l=M("editorId"),o=M("usedLanguageText"),i=()=>{document.querySelectorAll(`#${l} .${f}-preview .${f}-code`).forEach(s=>{let u=-1;const r=s.querySelector(`.${f}-copy-button`);r&&(r.onclick=d=>{d.preventDefault(),clearTimeout(u);const k=(s.querySelector("input:checked + pre code")||s.querySelector("pre code")).textContent,b=Jo(e.formatCopiedText(k)),{text:v,successTips:w,failTips:g}=o.value.copyCode,y=b?w:g;r.dataset.isIcon?r.dataset.tips=y:r.innerHTML=y,u=window.setTimeout(()=>{r.dataset.isIcon?r.dataset.tips=v:r.innerHTML=v},1500)})})},a=()=>{Pe(i)},h=s=>{s&&Pe(i)};H([n,t],a),H(()=>e.setting.preview,h),H(()=>e.setting.htmlPreview,h),H(()=>o.value,i),Y(i)},Ai=e=>{const n=M("highlight"),t=Je(le.editorExtensions.highlight.instance);return Y(()=>{e.noHighlight||t.value||(ye("link",{...n.value.css,rel:"stylesheet",id:`${f}-hlCss`}),ye("script",{...n.value.js,id:`${f}-hljs`,onload(){t.value=window.hljs}},"hljs"))}),H(()=>n.value.css,()=>{e.noHighlight||gi("link",{...n.value.css,rel:"stylesheet",id:`${f}-hlCss`})}),t},xi=e=>{const n=M("theme"),{editorExtensions:t,editorExtensionsAttrs:l,mermaidConfig:o}=le,i=Je(t.mermaid.instance),a=Je(-1),h=new on({max:1e3,ttl:6e5}),s=()=>{const r=i.value;!e.noMermaid&&r&&(r.initialize(o({startOnLoad:!1,theme:n.value==="dark"?"dark":"default"})),a.value=a.value+1)};return H(()=>n.value,()=>{h.clear(),s()}),Y(()=>{var r,d;if(e.noMermaid||i.value)return;const p=t.mermaid.js;/\.mjs/.test(p)?(ye("link",{...(r=l.mermaid)==null?void 0:r.js,rel:"modulepreload",href:p,id:`${f}-mermaid-m`}),import(p).then(k=>{i.value=k.default,s()})):ye("script",{...(d=l.mermaid)==null?void 0:d.js,src:p,id:`${f}-mermaid`,onload(){i.value=window.mermaid,s()}},"mermaid")}),{mermaidRef:i,reRenderRef:a,replaceMermaid:()=>{Pe(()=>{if(!e.noMermaid&&i.value){const r=document.querySelectorAll(`div.${f}-mermaid`),d=document.createElement("div");d.style.width=document.body.offsetWidth+"px",d.style.height=document.body.offsetHeight+"px",d.style.position="fixed",d.style.zIndex="-10000",d.style.top="-10000";let p=r.length;p>0&&document.body.appendChild(d),r.forEach(async k=>{let b=h.get(k.innerText);if(!b){const w=Jt(),g=i.value.renderAsync||i.value.render;let y="";try{y=await g(w,k.innerText,d)}catch{}b=await e.sanitizeMermaid(typeof y=="string"?y:y.svg),h.set(k.innerText,b)}const v=document.createElement("p");v.className=`${f}-mermaid`,v.setAttribute("data-processed",""),v.innerHTML=b,k.dataset.line!==void 0&&(v.dataset.line=k.dataset.line),k.replaceWith(v),--p===0&&d.remove()})}})}}},Ei=e=>{const n=Je(le.editorExtensions.katex.instance);return Y(()=>{if(e.noKatex||n.value)return;const{editorExtensions:t}=le;ye("script",{src:t.katex.js,id:`${f}-katex`,onload(){n.value=window.katex}},"katex"),ye("link",{rel:"stylesheet",href:t.katex.css,id:`${f}-katexCss`})}),n},Ii=(e,n)=>{const t=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(l,o,i,a,h)=>{const s=l[o],u=s.content.trim();if(s.info==="mermaid"){let r;return l[o].map&&l[o].level===0&&(r=l[o].map[0],l[o].attrSet("data-line",String(r))),`<div class="${f}-mermaid" ${r!==void 0?"data-line="+r:""} data-mermaid-theme=${n.themeRef.value}>${u}</div>`}return t(l,o,i,a,h)}},Li=Ii,Rt=(e,n)=>{const t=e.attrs?e.attrs.slice():[];return n.forEach(l=>{const o=e.attrIndex(l[0]);o<0?t.push(l):(t[o]=t[o].slice(),t[o][1]+=` ${l[1]}`)}),t},Cl=(e,n)=>{let t=!0,l=!0;const o=e.posMax,i=n>0?e.src.charCodeAt(n-1):-1,a=n+1<=o?e.src.charCodeAt(n+1):-1;return(i===32||i===9||a>=48&&a<=57)&&(l=!1),(a===32||a===9)&&(t=!1),{can_open:t,can_close:l}},Fi=(e,n)=>{let t,l,o,i;if(e.src[e.pos]!=="$")return!1;if(o=Cl(e,e.pos),!o.can_open)return n||(e.pending+="$"),e.pos+=1,!0;const a=e.pos+1;for(t=a;(t=e.src.indexOf("$",t))!==-1;){for(i=t-1;e.src[i]==="\\";)i-=1;if((t-i)%2==1)break;t+=1}return t===-1?(n||(e.pending+="$"),e.pos=a,!0):t-a===0?(n||(e.pending+="$$"),e.pos=a+1,!0):(o=Cl(e,t),o.can_close?(n||(l=e.push("math_inline","math",0),l.markup="$",l.content=e.src.slice(a,t)),e.pos=t+1,!0):(n||(e.pending+="$"),e.pos=a,!0))},Hi=(e,n,t,l)=>{let o,i,a,h,s=!1,u=e.bMarks[n]+e.tShift[n],r=e.eMarks[n];if(u+2>r||e.src.slice(u,u+2)!=="$$")return!1;if(u+=2,o=e.src.slice(u,r),l)return!0;for(o.trim().slice(-2)==="$$"&&(o=o.trim().slice(0,-2),s=!0),a=n;!s&&(a++,!(a>=t||(u=e.bMarks[a]+e.tShift[a],r=e.eMarks[a],u<r&&e.tShift[a]<e.blkIndent)));)e.src.slice(u,r).trim().slice(-2)==="$$"&&(h=e.src.slice(0,r).lastIndexOf("$$"),i=e.src.slice(u,h),s=!0);e.line=a+1;const d=e.push("math_block","math",0);return d.block=!0,d.content=(o&&o.trim()?o+`
`:"")+e.getLines(n+1,a,e.tShift[n],!0)+(i&&i.trim()?i:""),d.map=[n,e.line],d.markup="$$",!0},Oi=(e,{katexRef:n})=>{const t=(o,i,a,h,s)=>{const u=o[i],r={attrs:Rt(u,[["class",`${f}-katex-inline`]])};if(n.value){const d=n.value.renderToString(u.content,{throwOnError:!1});return`<span ${s.renderAttrs(r)} data-processed>${d}</span>`}else return`<span ${s.renderAttrs(r)}>${u.content}</span>`},l=(o,i,a,h,s)=>{const u=o[i],r={attrs:Rt(u,[["class",`${f}-katex-block`]])};if(n.value){const d=n.value.renderToString(u.content,{throwOnError:!1,displayMode:!0});return`<p ${s.renderAttrs(r)} data-processed>${d}</p>`}else return`<p ${s.renderAttrs(r)}>${u.content}</p>`};e.inline.ruler.after("escape","math_inline",Fi),e.block.ruler.after("blockquote","math_block",Hi,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=t,e.renderer.rules.math_block=l},Mi=Oi,Pi=(e,n)=>{n=n||{};const t=3,l=n.marker||"!",o=l.charCodeAt(0),i=l.length;let a="",h="";const s=(r,d,p,k,b)=>{const v=r[d];return v.type==="admonition_open"?r[d].attrPush(["class",`${f}-admonition ${f}-admonition-${v.info}`]):v.type==="admonition_title_open"&&r[d].attrPush(["class",`${f}-admonition-title`]),b.renderToken(r,d,p)},u=r=>{const d=r.trim().split(" ",2);h="",a=d[0],d.length>1&&(h=r.substring(a.length+2))};e.block.ruler.before("code","admonition",(r,d,p,k)=>{let b,v,w,g=!1,y=r.bMarks[d]+r.tShift[d],S=r.eMarks[d];if(o!==r.src.charCodeAt(y))return!1;for(b=y+1;b<=S&&l[(b-y)%i]===r.src[b];b++);const T=Math.floor((b-y)/i);if(T!==t)return!1;b-=(b-y)%i;const A=r.src.slice(y,b),O=r.src.slice(b,S);if(u(O),k)return!0;for(v=d;v++,!(v>=p||(y=r.bMarks[v]+r.tShift[v],S=r.eMarks[v],y<S&&r.sCount[v]<r.blkIndent));)if(o===r.src.charCodeAt(y)&&!(r.sCount[v]-r.blkIndent>=4)){for(b=y+1;b<=S&&l[(b-y)%i]===r.src[b];b++);if(!(Math.floor((b-y)/i)<T)&&(b-=(b-y)%i,b=r.skipSpaces(b),!(b<S))){g=!0;break}}const P=r.parentType,E=r.lineMax;return r.parentType="root",r.lineMax=v,w=r.push("admonition_open","div",1),w.markup=A,w.block=!0,w.info=a,w.map=[d,v],h&&(w=r.push("admonition_title_open","p",1),w.markup=A+" "+a,w.map=[d,v],w=r.push("inline","",0),w.content=h,w.map=[d,r.line-1],w.children=[],w=r.push("admonition_title_close","p",-1),w.markup=A+" "+a),r.md.block.tokenize(r,d+1,v),w=r.push("admonition_close","div",-1),w.markup=r.src.slice(y,b),w.block=!0,r.parentType=P,r.lineMax=E,r.line=v+(g?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=s,e.renderer.rules.admonition_title_open=s,e.renderer.rules.admonition_title_close=s,e.renderer.rules.admonition_close=s},Ri=Pi,Di=(e,n)=>{e.renderer.rules.heading_open=(t,l)=>{var o;const i=t[l],a=((o=t[l+1].children)==null?void 0:o.reduce((s,u)=>s+(["text","code_inline"].includes(u.type)&&u.content||""),""))||"",h=i.markup.length;return n.headsRef.value.push({text:a,level:h}),i.map&&i.level===0&&i.attrSet("id",n.mdHeadingId(a,h,n.headsRef.value.length)),e.renderer.renderToken(t,l,n)},e.renderer.rules.heading_close=(t,l,o,i,a)=>a.renderToken(t,l,o)},Ni=Di,Bi=(e,n)=>{if(typeof n[e]=="string")return n[e];const t=`<i class="${f}-iconfont ${f}-icon-${e}"></i>`;switch(le.iconfontType){case"svg":return`<svg class="${f}-icon" aria-hidden="true"><use xlink:href="#${f}-icon-${e}"></use></svg>`;default:return t}},ji=Bi,zi=(e,n)=>{const t=e.renderer.rules.fence,l=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=d=>d.info?l(d.info).trim():"",h=d=>{const p=a(d),[k=null,b=""]=(o.exec(p)||[]).slice(1);return[k,b]},s=d=>{const p=a(d);return p?p.split(/(\s+)/g)[0]:""},u=d=>{const p=d.info.match(i)||[],k=p[1]==="open"||p[1]!=="close"&&n.codeFoldable&&d.content.trim().split(`
`).length<n.autoFoldThreshold,b=p[1]||n.codeFoldable?"details":"div",v=p[1]||n.codeFoldable?"summary":"div";return{open:k,tagContainer:b,tagHeader:v}},r=(d,p,k,b,v)=>{var w;if(d[p].hidden)return"";const g=(w=n.usedLanguageTextRef.value)==null?void 0:w.copyCode.text,y=n.customIconRef.value.copy||g,S=!!n.customIconRef.value.copy,T=`<span class="${f}-collapse-tips">${ji("collapse-tips",n.customIconRef.value)}</span>`,[A]=h(d[p]);if(A===null){const{open:ee,tagContainer:ie,tagHeader:Se}=u(d[p]),be=[["class",`${f}-code`]];ee&&be.push(["open",""]);const fe={attrs:Rt(d[p],be)};d[p].info=d[p].info.replace(i,"");const Q=t(d,p,k,b,v);return`<${ie} ${v.renderAttrs(fe)}>
        <${Se} class="${f}-code-head">
          <div class="${f}-code-flag"><span></span><span></span><span></span></div>
          <div class="${f}-code-action">
            <span class="${f}-code-lang">${d[p].info.trim()}</span>
            <span class="${f}-copy-button" data-tips="${g}"${S?" data-is-icon=true":""}">${y}</span>
            ${ie==="details"?T:""}
          </div>
        </${Se}>${Q}</${ie}>`}let O,P,E,F,j="",z="",W="";const{open:Z,tagContainer:oe,tagHeader:se}=u(d[p]),pe=[["class",`${f}-code`]];Z&&pe.push(["open",""]);const $e={attrs:Rt(d[p],pe)};for(let ee=p;ee<d.length&&(O=d[ee],[P,E]=h(O),P===A);ee++){O.info=O.info.replace(o,"").replace(i,""),O.hidden=!0;const ie=`${f}-codetab-${n.editorId}-${p}-${ee-p}`;F=ee-p>0?"":"checked",j+=`<li>
          <input type="radio" name="${f}-codetab-label-${n.editorId}-${p}" class="${ie}" ${F}>
          <label onclick="document.querySelectorAll('.${ie}').forEach(e => e.click())">${E||s(O)}</label>
        </li>`,z+=`<input type="radio" name="${f}-codetab-pre-${n.editorId}-${p}" class="${ie}" ${F}>
      ${t(d,ee,k,b,v)}`,W+=`<input type="radio" name="${f}-codetab-lang-${n.editorId}-${p}" class="${ie}" ${F}>
      <span class=${f}-code-lang>${s(O)}</span>`}return`<${oe} ${v.renderAttrs($e)}>
    <${se} class="${f}-code-head">
      <div class="${f}-code-flag">
        <ul class="${f}-codetab-label">${j}</ul>
      </div>
      <div class="${f}-code-action">
        <span class="${f}-codetab-lang">${W}</span>
        <span class="${f}-copy-button" data-tips="${g}"${S?" data-is-icon=true":""}">${y}</span>
        ${oe==="details"?T:""}
      </div>
    </${se}>${z}</${oe}>`};e.renderer.rules.fence=r,e.renderer.rules.code_block=r},Wi=zi;function Vi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var un={exports:{}},X={},dn={exports:{}},et={};function oo(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Ui(e,n,t){}function Gi(e,n,t){}var qi=/javascript\s*\:/img;function Ki(e,n){return qi.test(n)?"":n}et.whiteList=oo();et.getDefaultWhiteList=oo;et.onAttr=Ui;et.onIgnoreAttr=Gi;et.safeAttrValue=Ki;var Xi={indexOf:function(e,n){var t,l;if(Array.prototype.indexOf)return e.indexOf(n);for(t=0,l=e.length;t<l;t++)if(e[t]===n)return t;return-1},forEach:function(e,n,t){var l,o;if(Array.prototype.forEach)return e.forEach(n,t);for(l=0,o=e.length;l<o;l++)n.call(t,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},ut=Xi;function Zi(e,n){e=ut.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,l=!1,o=0,i=0,a="";function h(){if(!l){var r=ut.trim(e.slice(o,i)),d=r.indexOf(":");if(d!==-1){var p=ut.trim(r.slice(0,d)),k=ut.trim(r.slice(d+1));if(p){var b=n(o,a.length,p,k,r);b&&(a+=b+"; ")}}}o=i+1}for(;i<t;i++){var s=e[i];if(s==="/"&&e[i+1]==="*"){var u=e.indexOf("*/",i+2);if(u===-1)break;i=u+1,o=i+1,l=!1}else s==="("?l=!0:s===")"?l=!1:s===";"?l||h():s===`
`&&h()}return ut.trim(a)}var Qi=Zi,kt=et,Ji=Qi;function Tl(e){return e==null}function Yi(e){var n={};for(var t in e)n[t]=e[t];return n}function io(e){e=Yi(e||{}),e.whiteList=e.whiteList||kt.whiteList,e.onAttr=e.onAttr||kt.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||kt.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||kt.safeAttrValue,this.options=e}io.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var n=this,t=n.options,l=t.whiteList,o=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue,h=Ji(e,function(s,u,r,d,p){var k=l[r],b=!1;if(k===!0?b=k:typeof k=="function"?b=k(d):k instanceof RegExp&&(b=k.test(d)),b!==!0&&(b=!1),d=a(r,d),!!d){var v={position:u,sourcePosition:s,source:p,isWhite:b};if(b){var w=o(r,d,v);return Tl(w)?r+":"+d:w}else{var w=i(r,d,v);if(!Tl(w))return w}}});return h};var ea=io;(function(e,n){var t=et,l=ea;function o(a,h){var s=new l(h);return s.process(a)}n=e.exports=o,n.FilterCSS=l;for(var i in t)n[i]=t[i];typeof window<"u"&&(window.filterCSS=e.exports)})(dn,dn.exports);var gn=dn.exports,vn={indexOf:function(e,n){var t,l;if(Array.prototype.indexOf)return e.indexOf(n);for(t=0,l=e.length;t<l;t++)if(e[t]===n)return t;return-1},forEach:function(e,n,t){var l,o;if(Array.prototype.forEach)return e.forEach(n,t);for(l=0,o=e.length;l<o;l++)n.call(t,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var n=/\s|\n|\t/,t=n.exec(e);return t?t.index:-1}},ta=gn.FilterCSS,na=gn.getDefaultWhiteList,Dt=vn;function ao(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ro=new ta;function la(e,n,t){}function oa(e,n,t){}function ia(e,n,t){}function aa(e,n,t){}function so(e){return e.replace(sa,"&lt;").replace(ca,"&gt;")}function ra(e,n,t,l){if(t=go(t),n==="href"||n==="src"){if(t=Dt.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(n==="background"){if(Ct.lastIndex=0,Ct.test(t))return""}else if(n==="style"){if($l.lastIndex=0,$l.test(t)||(Sl.lastIndex=0,Sl.test(t)&&(Ct.lastIndex=0,Ct.test(t))))return"";l!==!1&&(l=l||ro,t=l.process(t))}return t=vo(t),t}var sa=/</g,ca=/>/g,ua=/"/g,da=/&quot;/g,fa=/&#([a-zA-Z0-9]*);?/gim,ha=/&colon;?/gim,ma=/&newline;?/gim,Ct=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,$l=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Sl=/u\s*r\s*l\s*\(.*/gi;function co(e){return e.replace(ua,"&quot;")}function uo(e){return e.replace(da,'"')}function fo(e){return e.replace(fa,function(t,l){return l[0]==="x"||l[0]==="X"?String.fromCharCode(parseInt(l.substr(1),16)):String.fromCharCode(parseInt(l,10))})}function ho(e){return e.replace(ha,":").replace(ma," ")}function mo(e){for(var n="",t=0,l=e.length;t<l;t++)n+=e.charCodeAt(t)<32?" ":e.charAt(t);return Dt.trim(n)}function go(e){return e=uo(e),e=fo(e),e=ho(e),e=mo(e),e}function vo(e){return e=co(e),e=so(e),e}function ga(){return""}function va(e,n){typeof n!="function"&&(n=function(){});var t=!Array.isArray(e);function l(a){return t?!0:Dt.indexOf(e,a)!==-1}var o=[],i=!1;return{onIgnoreTag:function(a,h,s){if(l(a))if(s.isClosing){var u="[/removed]",r=s.position+u.length;return o.push([i!==!1?i:s.position,r]),i=!1,u}else return i||(i=s.position),"[removed]";else return n(a,h,s)},remove:function(a){var h="",s=0;return Dt.forEach(o,function(u){h+=a.slice(s,u[0]),s=u[1]}),h+=a.slice(s),h}}}function pa(e){for(var n="",t=0;t<e.length;){var l=e.indexOf("<!--",t);if(l===-1){n+=e.slice(t);break}n+=e.slice(t,l);var o=e.indexOf("-->",l);if(o===-1)break;t=o+3}return n}function ba(e){var n=e.split("");return n=n.filter(function(t){var l=t.charCodeAt(0);return l===127?!1:l<=31?l===10||l===13:!0}),n.join("")}X.whiteList=ao();X.getDefaultWhiteList=ao;X.onTag=la;X.onIgnoreTag=oa;X.onTagAttr=ia;X.onIgnoreTagAttr=aa;X.safeAttrValue=ra;X.escapeHtml=so;X.escapeQuote=co;X.unescapeQuote=uo;X.escapeHtmlEntities=fo;X.escapeDangerHtml5Entities=ho;X.clearNonPrintableCharacter=mo;X.friendlyAttrValue=go;X.escapeAttrValue=vo;X.onIgnoreTagStripAll=ga;X.StripTagBody=va;X.stripCommentTag=pa;X.stripBlankChar=ba;X.attributeWrapSign='"';X.cssFilter=ro;X.getDefaultCSSWhiteList=na;var zt={},qe=vn;function ya(e){var n=qe.spaceIndex(e),t;return n===-1?t=e.slice(1,-1):t=e.slice(1,n+1),t=qe.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function wa(e){return e.slice(0,2)==="</"}function ka(e,n,t){var l="",o=0,i=!1,a=!1,h=0,s=e.length,u="",r="";e:for(h=0;h<s;h++){var d=e.charAt(h);if(i===!1){if(d==="<"){i=h;continue}}else if(a===!1){if(d==="<"){l+=t(e.slice(o,h)),i=h,o=h;continue}if(d===">"||h===s-1){l+=t(e.slice(o,i)),r=e.slice(i,h+1),u=ya(r),l+=n(i,l.length,u,r,wa(r)),o=h+1,i=!1;continue}if(d==='"'||d==="'")for(var p=1,k=e.charAt(h-p);k.trim()===""||k==="=";){if(k==="="){a=d;continue e}k=e.charAt(h-++p)}}else if(d===a){a=!1;continue}}return o<s&&(l+=t(e.substr(o))),l}var Ca=/[^a-zA-Z0-9\\_:.-]/gim;function Ta(e,n){var t=0,l=0,o=[],i=!1,a=e.length;function h(p,k){if(p=qe.trim(p),p=p.replace(Ca,"").toLowerCase(),!(p.length<1)){var b=n(p,k||"");b&&o.push(b)}}for(var s=0;s<a;s++){var u=e.charAt(s),r,d;if(i===!1&&u==="="){i=e.slice(t,s),t=s+1,l=e.charAt(t)==='"'||e.charAt(t)==="'"?t:Sa(e,s+1);continue}if(i!==!1&&s===l){if(d=e.indexOf(u,s+1),d===-1)break;r=qe.trim(e.slice(l+1,d)),h(i,r),i=!1,s=d,t=s+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(d=$a(e,s),d===-1){r=qe.trim(e.slice(t,s)),h(r),i=!1,t=s+1;continue}else{s=d-1;continue}else if(d=_a(e,s-1),d===-1){r=qe.trim(e.slice(t,s)),r=_l(r),h(i,r),i=!1,t=s+1;continue}else continue}return t<e.length&&(i===!1?h(e.slice(t)):h(i,_l(qe.trim(e.slice(t))))),qe.trim(o.join(" "))}function $a(e,n){for(;n<e.length;n++){var t=e[n];if(t!==" ")return t==="="?n:-1}}function Sa(e,n){for(;n<e.length;n++){var t=e[n];if(t!==" ")return t==="'"||t==='"'?n:-1}}function _a(e,n){for(;n>0;n--){var t=e[n];if(t!==" ")return t==="="?n:-1}}function Aa(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function _l(e){return Aa(e)?e.substr(1,e.length-2):e}zt.parseTag=ka;zt.parseAttr=Ta;var xa=gn.FilterCSS,_e=X,po=zt,Ea=po.parseTag,Ia=po.parseAttr,Ft=vn;function Tt(e){return e==null}function La(e){var n=Ft.spaceIndex(e);if(n===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ft.trim(e.slice(n+1,-1));var t=e[e.length-1]==="/";return t&&(e=Ft.trim(e.slice(0,-1))),{html:e,closing:t}}function Fa(e){var n={};for(var t in e)n[t]=e[t];return n}function Ha(e){var n={};for(var t in e)Array.isArray(e[t])?n[t.toLowerCase()]=e[t].map(function(l){return l.toLowerCase()}):n[t.toLowerCase()]=e[t];return n}function bo(e){e=Fa(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=_e.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Ha(e.whiteList||e.allowList):e.whiteList=_e.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":_e.attributeWrapSign,e.onTag=e.onTag||_e.onTag,e.onTagAttr=e.onTagAttr||_e.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||_e.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||_e.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||_e.safeAttrValue,e.escapeHtml=e.escapeHtml||_e.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new xa(e.css))}bo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var n=this,t=n.options,l=t.whiteList,o=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,h=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,r=n.attributeWrapSign,d=n.cssFilter;t.stripBlankChar&&(e=_e.stripBlankChar(e)),t.allowCommentTag||(e=_e.stripCommentTag(e));var p=!1;t.stripIgnoreTagBody&&(p=_e.StripTagBody(t.stripIgnoreTagBody,i),i=p.onIgnoreTag);var k=Ea(e,function(b,v,w,g,y){var S={sourcePosition:b,position:v,isClosing:y,isWhite:Object.prototype.hasOwnProperty.call(l,w)},T=o(w,g,S);if(!Tt(T))return T;if(S.isWhite){if(S.isClosing)return"</"+w+">";var A=La(g),O=l[w],P=Ia(A.html,function(E,F){var j=Ft.indexOf(O,E)!==-1,z=a(w,E,F,j);return Tt(z)?j?(F=s(w,E,F,d),F?E+"="+r+F+r:E):(z=h(w,E,F,j),Tt(z)?void 0:z):z});return g="<"+w,P&&(g+=" "+P),A.closing&&(g+=" /"),g+=">",g}else return T=i(w,g,S),Tt(T)?u(g):T},u);return p&&(k=p.remove(k)),k};var Oa=bo;(function(e,n){var t=X,l=zt,o=Oa;function i(h,s){var u=new o(s);return u.process(h)}n=e.exports=i,n.filterXSS=i,n.FilterXSS=o,function(){for(var h in t)n[h]=t[h];for(var s in l)n[s]=l[s]}(),typeof window<"u"&&(window.filterXSS=e.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(un,un.exports);var mt=un.exports;const Ma=Vi(mt),Pa=$i({__proto__:null,default:Ma},[mt]),Al={img:["class"],input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]},Ra=(e,n)=>{const{extendedWhiteList:t={},xss:l={}}=n;let o;if(typeof l=="function")o=new mt.FilterXSS(l(Pa));else{const i=mt.getDefaultWhiteList();[...Object.keys(t),...Object.keys(Al)].forEach(h=>{const s=i[h]||[],u=Al[h]||[],r=t[h]||[];i[h]=[...new Set([...s,...u,...r])]}),o=new mt.FilterXSS({whiteList:i,...l})}e.core.ruler.after("linkify","xss",i=>{for(let a=0;a<i.tokens.length;a++){const h=i.tokens[a];switch(h.type){case"html_block":{h.content=o.process(h.content);break}case"inline":{(h.children||[]).forEach(u=>{u.type==="html_inline"&&(u.content=o.process(u.content))});break}}}})},Da=Ra,Na=e=>{e.core.ruler.push("init-line-number",n=>(n.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},Ba=(e,n)=>{const{editorConfig:t,markdownItConfig:l,markdownItPlugins:o}=le,i=M("editorId"),a=M("language"),h=M("usedLanguageText"),s=M("showCodeRowNumber"),u=M("theme"),r=M("customIcon"),d=q([]),p=Ai(e),k=Ei(e),{reRenderRef:b,replaceMermaid:v}=xi(e),w=Yo({html:!0,breaks:!0,linkify:!0});l(w,{editorId:i});const g=[{type:"image",plugin:ei,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Ri,options:{}},{type:"taskList",plugin:ti,options:{}},{type:"heading",plugin:Ni,options:{mdHeadingId:e.mdHeadingId,headsRef:d}},{type:"code",plugin:Wi,options:{editorId:i,usedLanguageTextRef:h,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:r}},{type:"xss",plugin:Da,options:{}}];e.noKatex||g.push({type:"katex",plugin:Mi,options:{katexRef:k}}),e.noMermaid||g.push({type:"mermaid",plugin:Li,options:{themeRef:u}}),o(g,{editorId:i}).forEach(E=>{w.use(E.plugin,E.options)});const y=w.options.highlight;w.set({highlight:(E,F,j)=>{if(y){const Z=y(E,F,j);if(Z)return Z}let z;!e.noHighlight&&p.value?p.value.getLanguage(F)?z=p.value.highlight(E,{language:F,ignoreIllegals:!0}).value:z=p.value.highlightAuto(E).value:z=w.utils.escapeHtml(E);const W=s?bi(z.replace(/^\n+|\n+$/g,"")):`<span class="${f}-code-block">${z.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${F}" language=${F}>${W}</code></pre>`}}),Na(w);const S=q(`_article-key_${Jt()}`),T=q(e.sanitize(w.render(e.modelValue))),A=()=>{$.emit(i,At,T.value),e.onHtmlChanged(T.value),e.onGetCatalog(d.value),$.emit(i,xt,d.value),v()};Y(A);const O=()=>{d.value=[],T.value=e.sanitize(w.render(e.modelValue)),A()},P=ge(()=>(e.noKatex||k.value)&&(e.noHighlight||p.value));return H([je(e,"modelValue"),P,b,a],fn(O,n?0:t.renderDelay)),H(()=>e.setting.preview,()=>{e.setting.preview&&Pe(()=>{$.emit(i,xt,d.value)})}),Y(()=>{$.on(i,{name:Jl,callback(){$.emit(i,xt,d.value)}}),$.on(i,{name:mn,callback:()=>{S.value=`_article-key_${Jt()}`,O()}})}),{html:T,key:S}},ja=Ba,yo={modelValue:{type:String,default:""},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}},za={...yo,updateModelValue:{type:Function,default:()=>{}},onChange:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWitdh:{type:String},onInputBoxWitdhChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},wo=J({name:"ContentPreview",props:yo,setup(e){const n=M("editorId"),t=M("previewTheme"),l=M("showCodeRowNumber"),{html:o,key:i}=ja(e,e.previewOnly);return _i(e,o,i),Si(e,o),()=>m(Nt,null,[e.setting.preview&&m("div",{id:`${n}-preview-wrapper`,class:`${f}-preview-wrapper`,key:"content-preview-wrapper"},[m("div",{key:i.value,id:`${n}-preview`,class:[`${f}-preview`,`${t==null?void 0:t.value}-theme`,l&&`${f}-scrn`],innerHTML:o.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&m("div",{id:`${n}-html-wrapper`,class:`${f}-preview-wrapper`,key:"html-preview-wrapper"},[m("div",{class:`${f}-html`},[o.value])])])}}),Wa=(e,n)=>{const{editorId:t}=e,l=ve({buildFinished:!1,html:""});H(()=>e.modelValue,()=>{l.buildFinished=!1}),Y(()=>{$.on(t,{name:At,callback(o){l.buildFinished=!0,l.html=o}}),$.on(t,{name:Bt,callback(){const o=new Promise(i=>{if(l.buildFinished)i(l.html);else{const a=h=>{i(h),$.remove(t,At,a)};$.on(t,{name:At,callback:a})}});e.onSave?e.onSave(e.modelValue,o):n.emit("onSave",e.modelValue,o)}})})},ko=e=>{const{editorId:n}=e,t=le.editorExtensions.highlight,l=le.editorExtensionsAttrs.highlight;Re("editorId",n),Re("theme",ge(()=>e.theme)),Re("language",ge(()=>e.language)),Re("highlight",ge(()=>{const{js:i}=t,a={...en,...t.css},{js:h,css:s={}}=l||{},u=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,r=a[e.codeTheme]?a[e.codeTheme][u]:en.atom[u],d=a[e.codeTheme]&&s[e.codeTheme]?s[e.codeTheme][u]:s.atom?s.atom[u]:{};return{js:{src:i,...h},css:{href:r,...d}}})),Re("showCodeRowNumber",e.showCodeRowNumber);const o=ge(()=>{const i={...fl,...le.editorConfig.languageUserDefined};return xo(Eo(fl["en-US"]),i[e.language]||{})});Re("usedLanguageText",o),Re("previewTheme",ge(()=>e.previewTheme)),Re("customIcon",ge(()=>e.customIcon))},Va=e=>{ko(e),Re("tabWidth",e.tabWidth)},Co=e=>{Y(()=>{const{editorExtensions:n,editorExtensionsAttrs:t,iconfontType:l}=le;e.noIconfont||(l==="svg"?ye("script",{...t.iconfont,src:n.iconfont,id:`${f}-icon`}):ye("link",{...t.iconfontClass,rel:"stylesheet",href:n.iconfontClass,id:`${f}-icon-class`}))})},Ua=e=>{const{noPrettier:n,noUploadImg:t}=e,{editorExtensions:l,editorExtensionsAttrs:o}=le,i=n||l.prettier.prettierInstance,a=n||l.prettier.parserMarkdownInstance,h=t||l.cropper.instance;Y(()=>{if(!h){const{js:s={},css:u={}}=o.cropper||{};ye("link",{...u,rel:"stylesheet",href:l.cropper.css,id:`${f}-cropperCss`}),ye("script",{...s,src:l.cropper.js,id:`${f}-cropper`})}if(!i){const{standaloneJs:s={}}=o.prettier||{};ye("script",{...s,src:l.prettier.standaloneJs,id:`${f}-prettier`})}if(!a){const{parserMarkdownJs:s={}}=o.prettier||{};ye("script",{...s,src:l.prettier.parserMarkdownJs,id:`${f}-prettierMD`})}}),Co(e)},Ga=(e,n)=>{const{editorId:t}=e;Y(()=>{$.on(t,{name:Ye,callback:l=>{e.onError instanceof Function?e.onError(l):n.emit("onError",l)}})})},qa=(e,n)=>{const{editorId:t}=e,l=ve({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),o=ve({...l}),i=(s,u)=>{const r=u===void 0?!l[s]:u;switch(s){case"preview":{l.htmlPreview=!1,l.previewOnly=!1;break}case"htmlPreview":{l.preview=!1,l.previewOnly=!1;break}case"previewOnly":{r?!l.preview&&!l.htmlPreview&&(l.preview=!0):(o.preview||(l.preview=!1),o.htmlPreview||(l.htmlPreview=!1));break}}o[s]=r,l[s]=r};let a="";const h=()=>{l.pageFullscreen||l.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=a};return H(()=>[l.pageFullscreen,l.fullscreen],h),Y(()=>{$.on(t,{name:jt,callback(s,u){const r=d=>{$.emit(t,B,"image",{desc:"",urls:d}),u&&u()};e.onUploadImg?e.onUploadImg(s,r):n.emit("onUploadImg",s,r)}}),a=document.body.style.overflow,h()}),[l,i]},Ka=e=>{const{editorId:n}=e,t=q(!1);return Y(()=>{$.on(n,{name:hn,callback:o=>{o===void 0?t.value=!t.value:t.value=o}})}),ge(()=>!e.toolbarsExclude.includes("catalog")&&e.toolbars.includes("catalog")&&t.value)},Xa=(e,n,t,l,o,i)=>{const{editorId:a}=e;H(()=>l.pageFullscreen,s=>{$.emit(a,hl,s)}),H(()=>l.fullscreen,s=>{$.emit(a,ml,s)}),H(()=>l.preview,s=>{$.emit(a,gl,s)}),H(()=>l.previewOnly,s=>{$.emit(a,vl,s)}),H(()=>l.htmlPreview,s=>{$.emit(a,pl,s)}),H(t,s=>{$.emit(a,bl,s)});const h={on(s,u){switch(s){case"pageFullscreen":{$.on(a,{name:hl,callback(r){u(r)}});break}case"fullscreen":{$.on(a,{name:ml,callback(r){u(r)}});break}case"preview":{$.on(a,{name:gl,callback(r){u(r)}});break}case"previewOnly":{$.on(a,{name:vl,callback(r){u(r)}});break}case"htmlPreview":{$.on(a,{name:pl,callback(r){u(r)}});break}case"catalog":{$.on(a,{name:bl,callback(r){u(r)}});break}}},togglePageFullscreen(s){o("pageFullscreen",s)},toggleFullscreen(s){$.emit(a,Xl,s)},togglePreview(s){o("preview",s)},togglePreviewOnly(s){o("previewOnly",s)},toggleHtmlPreview(s){o("htmlPreview",s)},toggleCatalog(s){$.emit(a,hn,s)},triggerSave(){$.emit(a,Bt)},insert(s){$.emit(a,B,"universal",{generate:s})},focus(s){var u;(u=i.value)==null||u.focus(s)},rerender(){$.emit(a,mn)},getSelectedText(){var s;return(s=i.value)==null?void 0:s.getSelectedText()},resetHistory(){var s;(s=i.value)==null||s.resetHistory()},domEventHandlers(s){$.emit(a,Yl,s)},execCommand(s){$.emit(a,B,s)}};n.expose(h)},Za=e=>e,To={modelValue:{type:String,default:""},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function},onGetCatalog:{type:Function},editorId:{type:String,default:()=>wi("md-editor-v3_")},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:Za},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},noIconfont:{type:Boolean},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}},Qa={...To,onChange:{type:Function},onSave:{type:Function},onUploadImg:{type:Function},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:ql},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array},placeholder:{type:String,default:""},defToolbars:{type:[String,Object]},onError:{type:Function},footers:{type:Array,default:Kl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object]},noUploadImg:{type:Boolean},autoFocus:{type:Boolean},disabled:{type:Boolean},readOnly:{type:Boolean},maxLength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function},onFocus:{type:Function},completions:{type:Array},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function},onDrop:{type:Function},inputBoxWitdh:{type:String,default:"50%"},onInputBoxWitdhChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},$o=["onHtmlChanged","onGetCatalog"],Ja=[...$o,"onChange","onSave","onUploadImg","onError","update:modelValue","onBlur","onFocus","onInput","onDrop","onInputBoxWitdhChange"],Ya=(e,n)=>{const{editorId:t}=e,l={rerender(){$.emit(t,mn)}};n.expose(l)},Ht=J({name:"MdPreview",props:To,emits:$o,setup(e,n){const{editorId:t,noKatex:l,noMermaid:o,noHighlight:i}=e;return ko(e),Co(e),Ya(e,n),bt(()=>{$.clear(t)}),()=>m("div",{id:t,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,`${f}-previewOnly`],style:e.style},[m(wo,{modelValue:e.modelValue,onHtmlChanged:a=>{e.onHtmlChanged?e.onHtmlChanged(a):n.emit("onHtmlChanged",a)},onGetCatalog:a=>{e.onGetCatalog?e.onGetCatalog(a):n.emit("onGetCatalog",a)},mdHeadingId:e.mdHeadingId,noMermaid:o,sanitize:e.sanitize,noKatex:l,formatCopiedText:e.formatCopiedText,noHighlight:i,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null)])}});Ht.install=e=>(e.component(Ht.name,Ht),e);const er={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},scrollElement:{type:[String,Object],default:""},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},So=J({props:er,setup(e){return()=>{const{tocItem:n,mdHeadingId:t,scrollElement:l,onClick:o,scrollElementOffsetTop:i}=e;return m("div",{class:[`${f}-catalog-link`,n.active&&`${f}-catalog-active`],onClick:a=>{o(a,n),a.stopPropagation();const h=t(n.text,n.level,n.index),s=document.getElementById(h),u=l instanceof Element?l:document.querySelector(l);if(s&&u){let r=s.offsetParent,d=s.offsetTop;if(u.contains(r))for(;r&&u!=r;)d+=r==null?void 0:r.offsetTop,r=r==null?void 0:r.offsetParent;u==null||u.scrollTo({top:d-i,behavior:"smooth"})}}},[m("span",{title:n.text},[n.text]),m("div",{class:`${f}-catalog-wrapper`},[n.children&&n.children.map(a=>m(So,{mdHeadingId:t,key:`${n.text}-link-${a.level}-${a.text}`,tocItem:a,scrollElement:l,onClick:o,scrollElementOffsetTop:i},null))])])}}}),tr=So,nr={editorId:{type:String},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object]},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function},onActive:{type:Function}},gt=J({name:"MdCatalog",props:nr,emits:["onClick","onActive"],setup(e,n){const t=e.editorId,l=ve({list:[],show:!1,scrollElement:e.scrollElement||`#${t}-preview-wrapper`}),o=Je(),i=ge(()=>{const u=[];return l.list.forEach((r,d)=>{const{text:p,level:k}=r,b={level:k,text:p,index:d+1,active:o.value===r};if(u.length===0)u.push(b);else{let v=u[u.length-1];if(b.level>v.level)for(let w=v.level+1;w<=6;w++){const{children:g}=v;if(!g){v.children=[b];break}if(v=g[g.length-1],b.level<=v.level){g.push(b);break}}else u.push(b)}}),u}),a=()=>l.scrollElement instanceof HTMLElement?l.scrollElement:document.querySelector(l.scrollElement),h=u=>{if(u.length===0)return l.list=[],!1;const{activeHead:r}=u.reduce((d,p,k)=>{const b=document.getElementById(e.mdHeadingId(p.text,p.level,k+1));if(b instanceof HTMLElement){const v=a(),w=yi(b,v);if(w<e.offsetTop&&w>d.minTop)return{activeHead:p,minTop:w}}return d},{activeHead:u[0],minTop:Number.MIN_SAFE_INTEGER});o.value=r,l.list=u},s=()=>{h(l.list)};return H(()=>o.value,u=>{const r=u?{...u}:void 0;e.onActive?e.onActive(r):n.emit("onActive",r)}),Y(()=>{let u=window;const r=()=>{const d=a();u=d===document.documentElement?window:d};$.on(t,{name:xt,callback:d=>{u==null||u.removeEventListener("scroll",s),h(d),r(),u==null||u.addEventListener("scroll",s)}}),$.emit(t,Jl),r(),u==null||u.addEventListener("scroll",s)}),bt(()=>{var u;const r=a();(u=r===document.documentElement?window:r)==null||u.removeEventListener("scroll",s)}),()=>m("div",{class:`${f}-catalog${e.theme==="dark"?"-dark":""} ${e.class}`},[i.value.map(u=>m(tr,{mdHeadingId:e.mdHeadingId,tocItem:u,key:`link-${u.level}-${u.text}`,scrollElement:l.scrollElement,onClick:(r,d)=>{e.onClick?e.onClick(r,d):n.emit("onClick",r,d)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])}});gt.install=e=>(e.component(gt.name,gt),e);const lr={title:{type:String,default:""},trigger:{type:[String,Object]},onClick:{type:Function},insert:{type:Function},language:{type:String},theme:{type:String}},Ot=J({name:"NormalToolbar",props:lr,emits:["onClick"],setup(e,n){return()=>{const t=Ae({props:e,ctx:n},"trigger");return m("div",{class:`${f}-toolbar-item`,title:e.title,onClick:l=>{e.onClick instanceof Function?e.onClick(l):n.emit("onClick",l)}},[t])}}});Ot.install=e=>(e.component(Ot.name,Ot),e);function or(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Po(e)}const ir={title:{type:String,default:""},modalTitle:{type:String,default:""},visible:{type:Boolean},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object]},onClick:{type:Function},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function},class:{type:String},style:{type:[Object,String]},showMask:{type:Boolean,default:!0},insert:{type:Function},language:{type:String},theme:{type:String},previewTheme:{type:String}},Mt=J({name:"ModalToolbar",props:ir,emits:["onClick","onClose","onAdjust"],setup(e,n){return()=>{const t=Ae({props:e,ctx:n},"trigger"),l=Ae({props:e,ctx:n},"default");return m(Nt,null,[m("div",{class:`${f}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():n.emit("onClick")}},[t]),m(it,{style:e.style,class:e.class,width:e.width,height:e.height,title:e.modalTitle,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose instanceof Function?e.onClose():n.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:o=>{e.onAdjust instanceof Function?e.onAdjust(o):n.emit("onAdjust",o)}},or(l)?l:{default:()=>[l]})])}}});Mt.install=e=>(e.component(Mt.name,Mt),e);var ar=Object.defineProperty,rr=(e,n,t)=>n in e?ar(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ze=(e,n,t)=>(rr(e,typeof n!="symbol"?n+"":n,t),t);const sr=J({setup(){return()=>m("div",{class:`${f}-divider`},null)}}),cr={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean}},ur=e=>{const n=M("editorId"),{editorExtensions:t,editorExtensionsAttrs:l}=le;let o=t.screenfull.instance;const i=q(!1),a=u=>{if(!o){$.emit(n,Ye,{name:"fullscreen",message:"fullscreen is undefined"});return}o.isEnabled?(i.value=!0,(u===void 0?!o.isFullscreen:u)?o.request():o.exit()):console.error("browser does not support screenfull!")},h=()=>{o&&o.isEnabled&&o.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},s=()=>{o=window.screenfull,h()};return Y(()=>{var u;h(),o||ye("script",{...(u=l.screenfull)==null?void 0:u.js,src:t.screenfull.js,id:`${f}-screenfull`,onload:s},"screenfull")}),Y(()=>{$.on(n,{name:Xl,callback:a})}),{fullscreenHandler:a}},dr={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},fr=J({name:"TableShape",props:dr,setup(e){const n=ve({x:-1,y:-1}),t=()=>{const o=[...e.tableShape];return(!o[2]||o[2]<o[0])&&(o[2]=o[0]),(!o[3]||o[3]<o[3])&&(o[3]=o[1]),o},l=q(t());return H(()=>e.tableShape,()=>{l.value=t()}),()=>m("div",{class:`${f}-table-shape`,onMouseleave:()=>{l.value=t(),n.x=-1,n.y=-1}},[new Array(l.value[1]).fill("").map((o,i)=>m("div",{class:`${f}-table-shape-row`,key:`table-shape-row-${i}`},[new Array(l.value[0]).fill("").map((a,h)=>m("div",{class:`${f}-table-shape-col`,key:`table-shape-col-${h}`,onMouseenter:()=>{n.x=i,n.y=h,h+1===l.value[0]&&h+1<l.value[2]?l.value[0]++:h+2<l.value[0]&&l.value[0]>e.tableShape[0]&&l.value[0]--,i+1===l.value[1]&&i+1<l.value[3]?l.value[1]++:i+2<l.value[1]&&l.value[1]>e.tableShape[1]&&l.value[1]--},onClick:()=>{e.onSelected(n)}},[m("div",{class:[`${f}-table-shape-col-default`,i<=n.x&&h<=n.y&&`${f}-table-shape-col-include`]},null)]))]))])}}),hr=fr,mr={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},gr=J({props:mr,setup(e){const n=M("usedLanguageText"),t=M("editorId"),l=ge(()=>{var i,a;switch(e.type){case"link":return(i=n.value.linkModalTips)==null?void 0:i.linkTitle;case"image":return(a=n.value.linkModalTips)==null?void 0:a.imageTitle;default:return""}}),o=ve({desc:"",url:""});return H(()=>e.visible,i=>{i||setTimeout(()=>{o.desc="",o.url=""},200)}),()=>m(it,{title:l.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var i,a,h,s,u;return[m("div",{class:`${f}-form-item`},[m("label",{class:`${f}-label`,for:`link-desc-${t}`},[(i=n.value.linkModalTips)==null?void 0:i.descLabel]),m("input",{placeholder:(a=n.value.linkModalTips)==null?void 0:a.descLabelPlaceHolder,class:`${f}-input`,id:`link-desc-${t}`,type:"text",value:o.desc,onChange:r=>{o.desc=r.target.value},autocomplete:"off"},null)]),m("div",{class:`${f}-form-item`},[m("label",{class:`${f}-label`,for:`link-url-${t}`},[(h=n.value.linkModalTips)==null?void 0:h.urlLabel]),m("input",{placeholder:(s=n.value.linkModalTips)==null?void 0:s.urlLabelPlaceHolder,class:`${f}-input`,id:`link-url-${t}`,type:"text",value:o.url,onChange:r=>{o.url=r.target.value},autocomplete:"off"},null)]),m("div",{class:`${f}-form-item`},[m("button",{class:[`${f}-btn`,`${f}-btn-row`],type:"button",onClick:()=>{e.onOk(o),o.desc="",o.url=""}},[(u=n.value.linkModalTips)==null?void 0:u.buttonOK])])]}})}}),vr={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},pr=J({props:vr,setup(e){const n=M("usedLanguageText"),t=M("editorId");let l=le.editorExtensions.cropper.instance;const o=q(),i=q(),a=q(),h=ve({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let s=null;H(()=>e.visible,()=>{e.visible&&!h.cropperInited&&(l=l||window.Cropper,o.value.onchange=()=>{if(!l){$.emit(t,Ye,{name:"Cropper",message:"Cropper is undefined"});return}const r=o.value.files||[];if(h.imgSelected=!0,(r==null?void 0:r.length)>0){const d=new FileReader;d.onload=p=>{h.imgSrc=p.target.result,Pe(()=>{s=new l(i.value,{viewMode:2,preview:`.${f}-clip-preview-target`})})},d.readAsDataURL(r[0])}})}),H(()=>[h.imgSelected],()=>{a.value.style=""}),H(()=>h.isFullscreen,()=>{Pe(()=>{s==null||s.destroy(),a.value.style="",i.value&&(s=new l(i.value,{viewMode:2,preview:`.${f}-clip-preview-target`}))})});const u=()=>{s.clear(),s.destroy(),s=null,o.value.value="",h.imgSelected=!1};return()=>{var r;return m(it,{class:`${f}-modal-clip`,title:(r=n.value.clipModalTips)==null?void 0:r.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:h.isFullscreen,onAdjust:d=>{h.isFullscreen=d},width:"668px",height:"421px"},{default:()=>{var d,p;return[m("div",{class:`${f}-form-item ${f}-clip`},[m("div",{class:`${f}-clip-main`},[h.imgSelected?m("div",{class:`${f}-clip-cropper`},[m("img",{src:h.imgSrc,ref:i,style:{display:"none"},alt:""},null),m("div",{class:`${f}-clip-delete`,onClick:u},[m(R,{name:"delete"},null)])]):m("div",{class:`${f}-clip-upload`,onClick:()=>{o.value.click()}},[m(R,{name:"upload"},null)])]),m("div",{class:`${f}-clip-preview`},[m("div",{class:`${f}-clip-preview-target`,ref:a},null)])]),m("div",{class:`${f}-form-item`},[m("button",{class:`${f}-btn`,type:"button",onClick:()=>{if(s){const k=s.getCroppedCanvas();$.emit(t,jt,[pi(k.toDataURL("image/png"))],e.onOk),u()}}},[((d=n.value.clipModalTips)==null?void 0:d.buttonUpload)||((p=n.value.linkModalTips)==null?void 0:p.buttonOK)])]),m("input",{ref:o,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}},null)]}})}}}),br={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},yr=J({props:br,setup(e){return()=>m(Nt,null,[m(gr,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),m(pr,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),wr=J({name:"MDEditorToolbar",props:cr,setup(e){const n=M("editorId"),t=M("usedLanguageText"),l=M("theme"),o=M("previewTheme"),i=M("language"),{fullscreenHandler:a}=ur(e),h=`${n}-toolbar-wrapper`,s=q(),u=ve({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),r=(g,y)=>{$.emit(n,B,g,y)},d=ve({type:"link",linkVisible:!1,clipVisible:!1}),p=q();Y(()=>{$.on(n,{name:tn,callback(g){d.type=g,d.linkVisible=!0}})});const k=ge(()=>{const g=e.toolbars.filter(A=>!e.toolbarsExclude.includes(A)),y=g.indexOf("="),S=y===-1?g:g.slice(0,y+1),T=y===-1?[]:g.slice(y,Number.MAX_SAFE_INTEGER);return[S,T]}),b=q(),v=()=>{$.emit(n,jt,Array.from(b.value.files||[])),b.value.value=""};Y(()=>{b.value.addEventListener("change",v)});const w=g=>{var y,S,T,A,O,P,E,F,j,z,W,Z,oe,se,pe,$e,ee,ie,Se,be,fe,Q,ce,Wt,bn,yn,wn,kn,Cn,Tn,$n,Sn,_n,An,xn,En,In,Ln,Fn,Hn,On,Mn,Pn,Rn,Dn,Nn,Bn,jn,zn,Wn,Vn,Un,Gn,qn,Kn,Xn,Zn,Qn,Jn,Yn,el,tl,nl,ll,ol,il,al,rl,sl;if(ql.includes(g))switch(g){case"-":return m(sr,null,null);case"bold":return m("div",{class:`${f}-toolbar-item`,title:(y=t.value.toolbarTips)==null?void 0:y.bold,onClick:()=>{r("bold")}},[m(R,{name:"bold"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(S=t.value.toolbarTips)==null?void 0:S.bold])]);case"underline":return m("div",{class:`${f}-toolbar-item`,title:(T=t.value.toolbarTips)==null?void 0:T.underline,onClick:()=>{r("underline")}},[m(R,{name:"underline"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(A=t.value.toolbarTips)==null?void 0:A.underline])]);case"italic":return m("div",{class:`${f}-toolbar-item`,title:(O=t.value.toolbarTips)==null?void 0:O.italic,onClick:()=>{r("italic")}},[m(R,{name:"italic"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(P=t.value.toolbarTips)==null?void 0:P.italic])]);case"strikeThrough":return m("div",{class:`${f}-toolbar-item`,title:(E=t.value.toolbarTips)==null?void 0:E.strikeThrough,onClick:()=>{r("strikeThrough")}},[m(R,{name:"strike-through"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(F=t.value.toolbarTips)==null?void 0:F.strikeThrough])]);case"title":return m(ot,{relative:`#${h}`,visible:u.title,onChange:N=>{u.title=N},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{u.title=!1}},[m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h1")}},[(j=t.value.titleItem)==null?void 0:j.h1]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h2")}},[(z=t.value.titleItem)==null?void 0:z.h2]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h3")}},[(W=t.value.titleItem)==null?void 0:W.h3]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h4")}},[(Z=t.value.titleItem)==null?void 0:Z.h4]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h5")}},[(oe=t.value.titleItem)==null?void 0:oe.h5]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{r("h6")}},[(se=t.value.titleItem)==null?void 0:se.h6])])},{default:()=>{var N,ue;return[m("div",{class:`${f}-toolbar-item`,title:(N=t.value.toolbarTips)==null?void 0:N.title},[m(R,{name:"title"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=t.value.toolbarTips)==null?void 0:ue.title])])]}});case"sub":return m("div",{class:`${f}-toolbar-item`,title:(pe=t.value.toolbarTips)==null?void 0:pe.sub,onClick:()=>{r("sub")}},[m(R,{name:"sub"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[($e=t.value.toolbarTips)==null?void 0:$e.sub])]);case"sup":return m("div",{class:`${f}-toolbar-item`,title:(ee=t.value.toolbarTips)==null?void 0:ee.sup,onClick:()=>{r("sup")}},[m(R,{name:"sup"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ie=t.value.toolbarTips)==null?void 0:ie.sup])]);case"quote":return m("div",{class:`${f}-toolbar-item`,title:(Se=t.value.toolbarTips)==null?void 0:Se.quote,onClick:()=>{r("quote")}},[m(R,{name:"quote"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(be=t.value.toolbarTips)==null?void 0:be.quote])]);case"unorderedList":return m("div",{class:`${f}-toolbar-item`,title:(fe=t.value.toolbarTips)==null?void 0:fe.unorderedList,onClick:()=>{r("unorderedList")}},[m(R,{name:"unordered-list"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.unorderedList])]);case"orderedList":return m("div",{class:`${f}-toolbar-item`,title:(ce=t.value.toolbarTips)==null?void 0:ce.orderedList,onClick:()=>{r("orderedList")}},[m(R,{name:"ordered-list"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Wt=t.value.toolbarTips)==null?void 0:Wt.orderedList])]);case"task":return m("div",{class:`${f}-toolbar-item`,title:(bn=t.value.toolbarTips)==null?void 0:bn.task,onClick:()=>{r("task")}},[m(R,{name:"task"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(yn=t.value.toolbarTips)==null?void 0:yn.task])]);case"codeRow":return m("div",{class:`${f}-toolbar-item`,title:(wn=t.value.toolbarTips)==null?void 0:wn.codeRow,onClick:()=>{r("codeRow")}},[m(R,{name:"code-row"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(kn=t.value.toolbarTips)==null?void 0:kn.codeRow])]);case"code":return m("div",{class:`${f}-toolbar-item`,title:(Cn=t.value.toolbarTips)==null?void 0:Cn.code,onClick:()=>{r("code")}},[m(R,{name:"code"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Tn=t.value.toolbarTips)==null?void 0:Tn.code])]);case"link":return m("div",{class:`${f}-toolbar-item`,title:($n=t.value.toolbarTips)==null?void 0:$n.link,onClick:()=>{d.type="link",d.linkVisible=!0}},[m(R,{name:"link"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Sn=t.value.toolbarTips)==null?void 0:Sn.link])]);case"image":return e.noUploadImg?m("div",{class:`${f}-toolbar-item`,title:(_n=t.value.toolbarTips)==null?void 0:_n.image,onClick:()=>{d.type="image",d.linkVisible=!0}},[m(R,{name:"image"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(An=t.value.toolbarTips)==null?void 0:An.image])]):m(ot,{relative:`#${h}`,visible:u.image,onChange:N=>{u.image=N},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{u.title=!1}},[m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{d.type="image",d.linkVisible=!0}},[(xn=t.value.imgTitleItem)==null?void 0:xn.link]),m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{b.value.click()}},[(En=t.value.imgTitleItem)==null?void 0:En.upload]),m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{d.clipVisible=!0}},[(In=t.value.imgTitleItem)==null?void 0:In.clip2upload])])},{default:()=>{var N,ue;return[m("div",{class:`${f}-toolbar-item`,title:(N=t.value.toolbarTips)==null?void 0:N.image},[m(R,{name:"image"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=t.value.toolbarTips)==null?void 0:ue.image])])]}});case"table":return m(ot,{relative:`#${h}`,visible:u.table,onChange:N=>{u.table=N},key:"bar-table",overlay:m(hr,{tableShape:e.tableShape,onSelected:N=>{r("table",{selectedShape:N})}},null)},{default:()=>{var N,ue;return[m("div",{class:`${f}-toolbar-item`,title:(N=t.value.toolbarTips)==null?void 0:N.table},[m(R,{name:"table"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=t.value.toolbarTips)==null?void 0:ue.table])])]}});case"revoke":return m("div",{class:`${f}-toolbar-item`,title:(Ln=t.value.toolbarTips)==null?void 0:Ln.revoke,onClick:()=>{$.emit(n,Zl)}},[m(R,{name:"revoke"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Fn=t.value.toolbarTips)==null?void 0:Fn.revoke])]);case"next":return m("div",{class:`${f}-toolbar-item`,title:(Hn=t.value.toolbarTips)==null?void 0:Hn.next,onClick:()=>{$.emit(n,Ql)}},[m(R,{name:"next"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(On=t.value.toolbarTips)==null?void 0:On.next])]);case"save":return m("div",{class:`${f}-toolbar-item`,title:(Mn=t.value.toolbarTips)==null?void 0:Mn.save,onClick:()=>{$.emit(n,Bt)}},[m(R,{name:"baocun"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Pn=t.value.toolbarTips)==null?void 0:Pn.save])]);case"prettier":return e.noPrettier?"":m("div",{class:`${f}-toolbar-item`,title:(Rn=t.value.toolbarTips)==null?void 0:Rn.prettier,onClick:()=>{r("prettier")}},[m(R,{name:"prettier"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Dn=t.value.toolbarTips)==null?void 0:Dn.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&m("div",{class:`${f}-toolbar-item`,title:(Nn=t.value.toolbarTips)==null?void 0:Nn.pageFullscreen,onClick:()=>{e.updateSetting("pageFullscreen")}},[m(R,{name:e.setting.pageFullscreen?"suoxiao":"fangda"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Bn=t.value.toolbarTips)==null?void 0:Bn.pageFullscreen])]);case"fullscreen":return m("div",{class:`${f}-toolbar-item`,title:(jn=t.value.toolbarTips)==null?void 0:jn.fullscreen,onClick:()=>{a()}},[m(R,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(zn=t.value.toolbarTips)==null?void 0:zn.fullscreen])]);case"preview":return m("div",{class:`${f}-toolbar-item`,title:(Wn=t.value.toolbarTips)==null?void 0:Wn.preview,onClick:()=>{e.updateSetting("preview")}},[m(R,{name:"preview"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Vn=t.value.toolbarTips)==null?void 0:Vn.preview])]);case"previewOnly":return m("div",{class:`${f}-toolbar-item`,title:(Un=t.value.toolbarTips)==null?void 0:Un.previewOnly,onClick:()=>{e.updateSetting("previewOnly")}},[m(R,{name:"preview-only"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Gn=t.value.toolbarTips)==null?void 0:Gn.previewOnly])]);case"htmlPreview":return m("div",{class:`${f}-toolbar-item`,title:(qn=t.value.toolbarTips)==null?void 0:qn.htmlPreview,onClick:()=>{e.updateSetting("htmlPreview")}},[m(R,{name:"coding"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Kn=t.value.toolbarTips)==null?void 0:Kn.htmlPreview])]);case"catalog":return m("div",{class:`${f}-toolbar-item`,title:(Xn=t.value.toolbarTips)==null?void 0:Xn.catalog,onClick:()=>{$.emit(n,hn)},key:"bar-catalog"},[m(R,{name:"catalog"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Zn=t.value.toolbarTips)==null?void 0:Zn.catalog])]);case"github":return m("div",{class:`${f}-toolbar-item`,title:(Qn=t.value.toolbarTips)==null?void 0:Qn.github,onClick:()=>Lo("https://github.com/imzbf/md-editor-v3")},[m(R,{name:"github"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Jn=t.value.toolbarTips)==null?void 0:Jn.github])]);case"mermaid":return m(ot,{relative:`#${h}`,visible:u.mermaid,onChange:N=>{u.mermaid=N},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{u.mermaid=!1}},[m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("flow")}},[(Yn=t.value.mermaid)==null?void 0:Yn.flow]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("sequence")}},[(el=t.value.mermaid)==null?void 0:el.sequence]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("gantt")}},[(tl=t.value.mermaid)==null?void 0:tl.gantt]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("class")}},[(nl=t.value.mermaid)==null?void 0:nl.class]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("state")}},[(ll=t.value.mermaid)==null?void 0:ll.state]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("pie")}},[(ol=t.value.mermaid)==null?void 0:ol.pie]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("relationship")}},[(il=t.value.mermaid)==null?void 0:il.relationship]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{r("journey")}},[(al=t.value.mermaid)==null?void 0:al.journey])]),key:"bar-mermaid"},{default:()=>{var N,ue;return[m("div",{class:`${f}-toolbar-item`,title:(N=t.value.toolbarTips)==null?void 0:N.mermaid},[m(R,{name:"mermaid"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=t.value.toolbarTips)==null?void 0:ue.mermaid])])]}});case"katex":return m(ot,{relative:`#${h}`,visible:u.katex,onChange:N=>{u.katex=N},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{u.katex=!1}},[m("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{r("katexInline")}},[(rl=t.value.katex)==null?void 0:rl.inline]),m("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{r("katexBlock")}},[(sl=t.value.katex)==null?void 0:sl.block])]),key:"bar-katex"},{default:()=>{var N,ue;return[m("div",{class:`${f}-toolbar-item`,title:(N=t.value.toolbarTips)==null?void 0:N.katex},[m(R,{name:"formula"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=t.value.toolbarTips)==null?void 0:ue.katex])])]}})}else if(e.defToolbars instanceof Array){const N=e.defToolbars[g];return N?Yt(N,{theme:l.value,previewTheme:o.value,language:i.value,insert(Vt){$.emit(n,B,"universal",{generate:Vt})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const N=e.defToolbars.children[g];return N?Yt(N,{theme:l.value,previewTheme:o.value,language:i.value,insert(Vt){$.emit(n,B,"universal",{generate:Vt})}}):""}else return""};return H(()=>e.toolbars,()=>{Pe(()=>{s.value&&Io(s.value)})},{immediate:!0}),()=>{const g=k.value[0].map(S=>w(S)),y=k.value[1].map(S=>w(S));return m(Nt,null,[e.toolbars.length>0&&m("div",{class:`${f}-toolbar-wrapper`,ref:s,id:h},[m("div",{class:[`${f}-toolbar`,e.showToolbarName&&`${f}-stn`]},[m("div",{class:`${f}-toolbar-left`,ref:p},[g]),m("div",{class:`${f}-toolbar-right`},[y])])]),m("input",{ref:b,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),m(yr,{linkVisible:d.linkVisible,clipVisible:d.clipVisible,type:d.type,onCancel:()=>{d.linkVisible=!1,d.clipVisible=!1},onOk:S=>{S&&r(d.type,{desc:S.desc,url:S.url,transform:d.type==="image"}),d.linkVisible=!1,d.clipVisible=!1}},null)])}}}),kr=`.${f}-preview > [data-line]`,$t=(e,n)=>+getComputedStyle(e).getPropertyValue(n).replace("px",""),Cr=(e,n)=>{const t=fn(()=>{e.removeEventListener("scroll",l),e.addEventListener("scroll",l),n.removeEventListener("scroll",l),n.addEventListener("scroll",l)},50),l=o=>{const i=e.clientHeight,a=n.clientHeight,h=e.scrollHeight,s=n.scrollHeight,u=(h-i)/(s-a);o.target===e?(n.removeEventListener("scroll",l),n.scrollTo({top:e.scrollTop/u}),t()):(e.removeEventListener("scroll",l),e.scrollTo({top:n.scrollTop*u}),t())};return[()=>{t().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",l),n.removeEventListener("scroll",l)}]},Tr=(e,n,t)=>{const{view:l}=t,o=Ho(),i=g=>l.lineBlockAt(l.state.doc.line(g+1).from).top,a=g=>l.lineBlockAt(l.state.doc.line(g+1).from).bottom;let h=[],s=[],u=[];const r=()=>{h=[],s=Array.from(n.querySelectorAll(kr)),u=s.map(A=>Number(A.dataset.line));const g=[...u],{lines:y}=l.state.doc;let S=g.shift()||0,T=g.shift()||y;for(let A=0;A<y;A++)A===T&&(S=A,T=g.shift()||y),h.push({start:S,end:T-1})},d=(g,y)=>{let S=1;for(let T=s.length-1;T-1>=0;T--){const A=s[T],O=s[T-1];if(A.offsetTop+A.offsetHeight>y&&O.offsetTop<y){S=Number(O.dataset.line);break}}for(let T=h.length-1;T>=0;T--){const A=a(h[T].end),O=i(h[T].start);if(A>g&&O<=g){S=S<h[T].start?S:h[T].start;break}}return S};let p=0,k=0;const b=()=>{var g,y,S;if(k!==0)return!1;p++;const{scrollDOM:T,contentHeight:A}=l;let O=$t(n,"padding-top");const P=l.lineBlockAtHeight(T.scrollTop),{number:E}=l.state.doc.lineAt(P.from),F=h[E-1];if(!F)return!1;let j=1;const z=n.querySelector(`[data-line="${F.start}"]`)||((g=n.firstElementChild)==null?void 0:g.firstElementChild),W=n.querySelector(`[data-line="${F.end+1}"]`)||((y=n.lastElementChild)==null?void 0:y.lastElementChild),Z=T.scrollHeight-T.clientHeight,oe=n.scrollHeight-n.clientHeight;let se=i(F.start),pe=a(F.end),$e=z.offsetTop,ee=W.offsetTop-$e;se===0&&($e=0,z===W?(O=0,pe=A-T.offsetHeight,ee=oe):ee=W.offsetTop),j=(T.scrollTop-se)/(pe-se);const ie=W==((S=n.lastElementChild)==null?void 0:S.lastElementChild)?W.offsetTop+W.clientHeight:W.offsetTop;if(pe>=Z||ie>oe){const be=d(Z,oe);se=i(be),j=(T.scrollTop-se)/(Z-se);const fe=document.querySelector(`[data-line="${be}"]`);se>0&&fe&&($e=fe.offsetTop),ee=oe-$e+$t(n,"padding-top")}const Se=$e-O+ee*j;o(n,Se,()=>{p--})},v=()=>{var g,y,S,T,A,O;if(p!==0)return;k++;const{scrollDOM:P}=l,E=n.scrollTop,F=n.scrollHeight,j=P.scrollHeight-P.clientHeight,z=n.scrollHeight-n.clientHeight;let W=(g=n.firstElementChild)==null?void 0:g.firstElementChild,Z=(y=n.firstElementChild)==null?void 0:y.lastElementChild;if(u.length>0){let fe=Math.ceil(u[u.length-1]*(E/F)),Q=u.findLastIndex(ce=>ce<=fe);Q=Q===-1?0:Q,fe=u[Q];for(let ce=Q;ce>=0&&ce<u.length;)if(s[ce].offsetTop>E){if(ce-1>=0){ce--;continue}fe=-1,Q=ce;break}else{if(ce+1<u.length&&s[ce+1].offsetTop<E){ce++;continue}fe=u[ce],Q=ce;break}switch(Q){case-1:{W=(S=n.firstElementChild)==null?void 0:S.firstElementChild,Z=s[Q];break}case u.length-1:{W=s[Q],Z=(T=n.firstElementChild)==null?void 0:T.lastElementChild;break}default:W=s[Q],Z=s[Q+1===s.length?Q:Q+1]}}let oe=W===((A=n.firstElementChild)==null?void 0:A.firstElementChild)?0:W.offsetTop-$t(W,"margin-top"),se=Z.offsetTop,pe=0;const{start:$e,end:ee}=h[Number(W.dataset.line||0)];let ie=i($e);const Se=i(ee+1===l.state.doc.lines?ee:ee+1);let be=0;if(Se>j||Z.offsetTop+Z.offsetHeight>z){const fe=d(j,z),Q=document.querySelector(`[data-line="${fe}"]`);oe=Q?Q.offsetTop-$t(Q,"margin-top"):oe,ie=i(fe),pe=(E-oe)/(z-oe),be=j-ie}else W===((O=n.firstElementChild)==null?void 0:O.firstElementChild)?(W===Z&&(se=Z.offsetTop+Z.offsetHeight+ +getComputedStyle(Z).marginBottom.replace("px","")),be=Se,pe=Math.max(E/se,0)):(pe=Math.max((E-oe)/(se-oe),0),be=Se-ie);o(e,ie+be*pe,()=>{k--})},w=g=>{var y;const{scrollDOM:S,contentHeight:T}=l,A=S.clientHeight;if(T<=A||n.firstElementChild.clientHeight<=n.clientHeight||l.state.doc.lines<=((y=h[h.length-1])==null?void 0:y.end))return!1;g.target===e?b():v()};return[()=>{r(),e.addEventListener("scroll",w),n.addEventListener("scroll",w),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",w),n.removeEventListener("scroll",w)}]},$r=(e,n,t)=>{const l=M("editorId");let o=()=>{},i=()=>{};const a=()=>{o();const h=document.querySelector(`#${l} .cm-scroller`),s=document.querySelector(`[id="${l}-preview-wrapper"]`),u=document.querySelector(`[id="${l}-html-wrapper"]`);(s||u)&&([i,o]=(s?Tr:Cr)(h,s||u,t.value),e.scrollAuto&&i())};H([n,je(e.setting,"preview"),je(e.setting,"htmlPreview"),je(e.setting,"fullscreen"),je(e.setting,"pageFullscreen")],()=>{Pe(a)}),H(()=>e.scrollAuto,h=>{h?i():o()}),H(()=>e.setting.previewOnly,h=>{h?o():i()}),Y(a)},Kt=(e,n,t)=>{var l;let o="",i=0,a=0,h=!0,s=!1;const u=n.getSelectedText(),r=le.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const d=e.replace(/^h(\d)/,(p,k)=>new Array(Number(k)).fill("#",0,k).join(""));o=`${d} ${u}`,i=d.length+1}else if(e==="prettier"){const d=window.prettier||le.editorExtensions.prettier.prettierInstance,p=[((l=window.prettierPlugins)==null?void 0:l.markdown)||le.editorExtensions.prettier.parserMarkdownInstance];!d||p[0]===void 0?($.emit(t.editorId,Ye,{name:"prettier",message:"prettier is undefined"}),o=n.getValue()):o=d.format(n.getValue(),{parser:"markdown",plugins:p}),h=!1,s=!0}else switch(e){case"bold":{o=`**${u}**`,i=2,a=-2;break}case"underline":{o=`<u>${u}</u>`,i=3,a=-4;break}case"italic":{o=`*${u}*`,i=1,a=-1;break}case"strikeThrough":{o=`~~${u}~~`,i=2,a=-2;break}case"sub":{o=`<sub>${u}</sub>`,i=5,a=-6;break}case"sup":{o=`<sup>${u}</sup>`,i=5,a=-6;break}case"codeRow":{o="`"+u+"`",i=1,a=-1;break}case"quote":{o=`> ${u}`,i=2;break}case"orderedList":{o=`1. ${u}`,i=3;break}case"unorderedList":{o=`- ${u}`,i=2;break}case"task":{o=`- [ ] ${u}`,i=6;break}case"code":{const d=t.text||u||"",p=t.mode||"language";o=`\`\`\`${p}
${d}
\`\`\`
`,i=3,a=3+p.length-o.length;break}case"table":{o="|";const{selectedShape:d={x:1,y:1}}=t,{x:p,y:k}=d;for(let b=0;b<=k;b++)o+=" col |";o+=`
|`;for(let b=0;b<=k;b++)o+=" - |";for(let b=0;b<=p;b++){o+=`
|`;for(let v=0;v<=k;v++)o+=" content |"}i=2,a=5-o.length;break}case"link":{const{desc:d,url:p}=t;o=`[${d}](${p})`,h=!1;break}case"image":{const{desc:d,url:p,urls:k}=t;k instanceof Array?o=k.reduce((b,v)=>{const{url:w="",alt:g="",title:y=""}=typeof v=="object"?v:{url:v};return b+`![${g}](${w}${y?" '"+y+"'":""})
`},""):o=`![${d}](${p})
`,h=!1;break}case"flow":{o=`\`\`\`mermaid
${(r==null?void 0:r.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,i=3,a=10-o.length;break}case"sequence":{o=`\`\`\`mermaid
${(r==null?void 0:r.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,i=3,a=10-o.length;break}case"gantt":{o=`\`\`\`mermaid
${(r==null?void 0:r.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,i=3,a=10-o.length;break}case"class":{o=`\`\`\`mermaid
${(r==null?void 0:r.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,i=3,a=10-o.length;break}case"state":{o=`\`\`\`mermaid
${(r==null?void 0:r.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,i=3,a=10-o.length;break}case"pie":{o=`\`\`\`mermaid
${(r==null?void 0:r.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,i=3,a=10-o.length;break}case"relationship":{o=`\`\`\`mermaid
${(r==null?void 0:r.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,i=3,a=10-o.length;break}case"journey":{o=`\`\`\`mermaid
${(r==null?void 0:r.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,i=3,a=10-o.length;break}case"katexInline":{o="$$",i=1,a=-1;break}case"katexBlock":{o=`$$

$$
`,i=3,a=-4;break}case"universal":{const{generate:d}=t,p=d(u);o=p.targetValue,h=p.select??!0,i=p.deviationStart||0,a=p.deviationEnd||0}}return{text:o,options:{select:h,deviationStart:i,deviationEnd:a,replaceAll:s}}},Sr="#e5c07b",xl="var(--md-color)",_r="#56b6c2",Ar="#ffffff",ft="var(--md-color)",El="#e5c07b",xr="#e5c07b",Er="var(--md-color)",Il="#d19a66",Ir="#c678dd",Lr="#21252b",Fr="#2c313a",Ll="var(--md-bk-color)",Xt="var(--md-bk-color)",Hr="#ceedfa33",Fl="#528bff",Or=Be.theme({"&":{color:ft,backgroundColor:Ll},".cm-content":{caretColor:Fl},".cm-cursor, .cm-dropCursor":{borderLeftColor:Fl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Hr},".cm-panels":{backgroundColor:Lr,color:ft},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ll,color:ft,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Fr},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Xt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Xt,borderBottomColor:Xt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:ft}}},{dark:!0}),Mr=Ul.define([{tag:C.keyword,color:Ir},{tag:[C.name,C.deleted,C.character,C.propertyName,C.macroName],color:xl},{tag:[C.function(C.variableName),C.labelName],color:xr},{tag:[C.color,C.constant(C.name),C.standard(C.name)],color:Il},{tag:[C.definition(C.name),C.separator],color:ft},{tag:[C.typeName,C.className,C.number,C.changed,C.annotation,C.modifier,C.self,C.namespace],color:Sr},{tag:[C.operator,C.operatorKeyword,C.url,C.escape,C.regexp,C.link,C.special(C.string)],color:_r},{tag:[C.meta,C.comment],color:El},{tag:C.strong,fontWeight:"bold"},{tag:C.emphasis,fontStyle:"italic"},{tag:C.strikethrough,textDecoration:"line-through"},{tag:C.link,color:El,textDecoration:"underline"},{tag:C.heading,fontWeight:"bold",color:xl},{tag:[C.atom,C.bool,C.special(C.variableName)],color:Il},{tag:[C.processingInstruction,C.string,C.inserted],color:Er},{tag:C.invalid,color:Ar}]),Hl=[Or,Gl(Mr)],Pr="#e5c07b",Ol="#3f4a54",Rr="#56b6c2",Dr="#fff",ht="#3f4a54",Ml="#2d8cf0",Nr="#2d8cf0",Br="#3f4a54",Pl="#d19a66",jr="#c678dd",zr="#f6f6f6",Wr="#ceedfa33",Rl="var(--md-bk-color)",Zt="var(--md-bk-color)",Vr="#bad5fa",Dl="#3f4a54",Ur=Be.theme({"&":{color:ht,backgroundColor:Rl},".cm-content":{caretColor:Dl},".cm-cursor, .cm-dropCursor":{borderLeftColor:Dl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Vr},".cm-panels":{backgroundColor:zr,color:ht},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Rl,color:ht,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Wr},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Zt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Zt,borderBottomColor:Zt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:ht}}}),Gr=Ul.define([{tag:C.keyword,color:jr},{tag:[C.name,C.deleted,C.character,C.propertyName,C.macroName],color:Ol},{tag:[C.function(C.variableName),C.labelName],color:Nr},{tag:[C.color,C.constant(C.name),C.standard(C.name)],color:Pl},{tag:[C.definition(C.name),C.separator],color:ht},{tag:[C.typeName,C.className,C.number,C.changed,C.annotation,C.modifier,C.self,C.namespace],color:Pr},{tag:[C.operator,C.operatorKeyword,C.url,C.escape,C.regexp,C.link,C.special(C.string)],color:Rr},{tag:[C.meta,C.comment],color:Ml},{tag:C.strong,fontWeight:"bold"},{tag:C.emphasis,fontStyle:"italic"},{tag:C.strikethrough,textDecoration:"line-through"},{tag:C.link,color:Ml,textDecoration:"underline"},{tag:C.heading,fontWeight:"bold",color:Ol},{tag:[C.atom,C.bool,C.special(C.variableName)],color:Pl},{tag:[C.processingInstruction,C.string,C.inserted],color:Br},{tag:C.invalid,color:Dr}]),Nl=[Ur,Gl(Gr)],St=(e,n,t,l,o)=>(i,a,h,s)=>{const u=`${e}${n}`.slice(s-h);i.dispatch(i.state.replaceSelection(`${u}${t}${l}`));const r=h+a.label.length+(o==="title"?t.length:0);i.dispatch({selection:De.create([De.range(h+a.label.length+(o==="title"?1:-n.length),r),De.cursor(r)],1)}),i.focus()},Bl=e=>(n,t,l,o)=>{const i=e.slice(o-l);n.dispatch(n.state.replaceSelection(`${i} `))},jl=e=>{const n=t=>{const l=t.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return l===null||l.from==l.to&&t.explicit?null:{from:l.from,options:[...["h1","h2","h3","h4","h5","h6"].map((o,i)=>{const a=new Array(i+1).fill("#").join("");return{label:a,type:"text",apply:Bl(a)}}),...["unchecked","checked"].map(o=>{const i=o==="checked"?"- [x]":"- [ ]";return{label:i,type:"text",apply:Bl(i)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(o=>({label:`${o[0]}${o[1]}`,type:"text",apply:St(o[0],o[1],"",o[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:St("$","","","$","type")},{label:"$$",type:"text",apply:St("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(o=>({label:`!!! ${o}`,type:"text",apply:St("!!!",` ${o}`," Title",`

!!!`,"title")}))]}};return Vo({override:e?[n,...e]:[n]})},nt=e=>{const n=new lt;return l=>(n.get(e.state)?e.dispatch({effects:n.reconfigure(l)}):e.dispatch({effects:Xo.appendConfig.of(n.of(l))}),!0)};class qr{constructor(n){ze(this,"view"),ze(this,"maxLength",Number.MAX_SAFE_INTEGER),ze(this,"toggleTabSize"),ze(this,"togglePlaceholder"),ze(this,"setExtensions"),ze(this,"toggleDisabled"),ze(this,"toggleReadOnly"),ze(this,"toggleMaxlength"),this.view=n,this.toggleTabSize=nt(this.view),this.togglePlaceholder=nt(this.view),this.setExtensions=nt(this.view),this.toggleDisabled=nt(this.view),this.toggleReadOnly=nt(this.view),this.toggleMaxlength=nt(this.view)}getValue(){return this.view.state.doc.toString()}setValue(n,t=0,l=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:l,insert:n}})}getSelectedText(){const{from:n,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(n,t)}replaceSelectedText(n,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},l){try{if(t.replaceAll){if(this.setValue(n),n.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+n.length>this.maxLength)throw new Error("The input text is too long");const{from:o}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(n)),t.select){const i=o+n.length+t.deviationEnd;this.view.dispatch({selection:De.create([De.range(o+t.deviationStart,i),De.cursor(i)],1)})}this.view.focus()}catch(o){if(o.message==="The input text is too long")$.emit(l,Ye,{name:"overlength",message:o.message,data:n});else throw o}}setTabSize(n){this.toggleTabSize([Gt.tabSize.of(n),Uo.of(" ".repeat(n))])}setPlaceholder(n){this.togglePlaceholder(Go(n))}focus(n){if(this.view.focus(),!n)return;let t=0,l=0,o=0;switch(n){case"start":break;case"end":{t=l=o=this.getValue().length;break}default:t=n.rangeAnchor||n.cursorPos,l=n.rangeHead||n.cursorPos,o=n.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:De.create([De.range(t,l),De.cursor(o)],1)})}setDisabled(n){this.toggleDisabled([Be.editable.of(!n)])}setReadOnly(n){this.toggleReadOnly([Gt.readOnly.of(n)])}setMaxLength(n){this.maxLength=n,this.toggleMaxlength([Gt.changeFilter.of(t=>t.newDoc.length<=n)])}}const Kr=(e,n)=>{const t=M("editorId"),l=i=>{i instanceof Promise?i.then(a=>{$.emit(t,B,"universal",{generate(){return{targetValue:a}}})}).catch(a=>{console.error(a)}):$.emit(t,B,"universal",{generate(){return{targetValue:i}}})};return i=>{var a,h,s;if(!i.clipboardData)return;if(i.clipboardData.files.length>0){const{files:v}=i.clipboardData;$.emit(t,jt,Array.from(v).filter(w=>/image\/.*/.test(w.type))),i.preventDefault();return}const u=i.clipboardData.getData("text/plain"),r=((a=n.value)==null?void 0:a.view.state.selection.main.to)||0,d=((h=n.value)==null?void 0:h.view.state.doc.lineAt(r).from)||0,p=((s=n.value)==null?void 0:s.view.state.doc.sliceString(d,r))||"",k=/!\[.*\]\(\s*$/.test(p),b=/!\[.*\]\((.*)\s?.*\)/.test(u);if(k){const v=e.transformImgUrl(u);l(v),i.preventDefault();return}else if(b){const v=u.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));v?Promise.all(v.map(w=>e.transformImgUrl(w))).then(w=>{l(w.reduce((g,y,S)=>g.replace(v[S],y),u))}):l(u),i.preventDefault();return}if(e.autoDetectCode&&i.clipboardData.types.includes("vscode-editor-data")){const v=JSON.parse(i.clipboardData.getData("vscode-editor-data"));$.emit(t,B,"code",{mode:v.mode,text:i.clipboardData.getData("text/plain")}),i.preventDefault();return}e.maxlength&&u.length+e.modelValue.length>e.maxlength&&$.emit(t,Ye,{name:"overlength",message:"The input text is too long",data:u})}},Xr=(e,n)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>($.emit(e,B,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Zo,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:T=>($.emit(e,Bt,T.state.doc.toString()),!0),shift:()=>($.emit(e,B,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",run:()=>($.emit(e,B,"underline"),!0),shift:()=>($.emit(e,B,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",run:()=>($.emit(e,B,"italic"),!0),shift:()=>($.emit(e,tn,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>($.emit(e,B,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>($.emit(e,B,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>($.emit(e,B,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>($.emit(e,B,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>($.emit(e,B,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>($.emit(e,B,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>($.emit(e,B,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>($.emit(e,B,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>($.emit(e,B,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>($.emit(e,B,"code"),!0),any(T,A){return(A.ctrlKey||A.metaKey)&&A.altKey&&A.code==="KeyC"?($.emit(e,B,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>($.emit(e,tn,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>n.noPrettier?!1:($.emit(e,B,"prettier"),!0)},{any:(T,A)=>(A.ctrlKey||A.metaKey)&&A.altKey&&A.shiftKey&&A.code==="KeyT"?($.emit(e,B,"table"),!0):!1},...Ko];Be.EDIT_CONTEXT=!1;const Zr=e=>{const n=M("tabWidth"),t=M("editorId"),l=M("theme"),o=q(),i=Je(),a=new lt,h=new lt,s=new lt,u=new lt,r=new lt,d=Xr(t,e),p=q(!1),b={paste:Kr(e,i),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{p.value=!0},compositionend:(g,y)=>{p.value=!1,e.updateModelValue(y.state.doc.toString())},input:g=>{e.onInput&&e.onInput(g);const{data:y}=g;e.maxlength&&e.modelValue.length+y.length>e.maxlength&&$.emit(t,Ye,{name:"overlength",message:"The input text is too long",data:y})}},v=[Ro.of([...Do,...No,...d,Bo]),u.of(ul()),a.of(jo({codeLanguages:qo})),Be.lineWrapping,Be.updateListener.of(g=>{g.docChanged&&(e.onChange(g.state.doc.toString()),p.value||e.updateModelValue(g.state.doc.toString()))}),r.of(Be.domEventHandlers(b))],w=()=>{const g=[...v,h.of(l.value==="light"?Nl:Hl),s.of(jl(e.completions))];return le.codeMirrorExtensions(l.value,g,[...d])};return Y(()=>{const g=new Be({doc:e.modelValue,parent:o.value,extensions:[w()]}),y=new qr(g);i.value=y,setTimeout(()=>{y.setTabSize(n),y.setDisabled(e.disabled),y.setReadOnly(e.readonly),e.placeholder&&y.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&y.setMaxLength(e.maxlength),e.autofocus&&g.focus()},0),$.on(t,{name:Zl,callback(){zo(g)}}),$.on(t,{name:Ql,callback(){Wo(g)}}),$.on(t,{name:B,callback(S,T={}){var A,O;if(S==="image"&&T.transform){const P=e.transformImgUrl(T.url);if(P instanceof Promise)P.then(E=>{var F;const{text:j,options:z}=Kt(S,i.value,{...T,url:E});(F=i.value)==null||F.replaceSelectedText(j,z,t)}).catch(E=>{console.error(E)});else{const{text:E,options:F}=Kt(S,i.value,{...T,url:P});(A=i.value)==null||A.replaceSelectedText(E,F,t)}}else{const{text:P,options:E}=Kt(S,i.value,T);(O=i.value)==null||O.replaceSelectedText(P,E,t)}}}),$.on(t,{name:Yl,callback:Fo(S=>{var T;const A={...b},O=Object.keys(b);for(const P in S){const E=P;O.includes(E)?A[E]=(F,j)=>{S[E](F,j),F.defaultPrevented||b[E](F,j)}:A[E]=S[E]}(T=i.value)==null||T.view.dispatch({effects:r.reconfigure(Be.domEventHandlers(A))})})})}),H(l,()=>{var g;(g=i.value)==null||g.view.dispatch({effects:h.reconfigure(l.value==="light"?Nl:Hl)})},{deep:!0}),H(()=>e.completions,()=>{var g;(g=i.value)==null||g.view.dispatch({effects:s.reconfigure(jl(e.completions))})},{deep:!0}),H(()=>e.modelValue,()=>{var g,y;((g=i.value)==null?void 0:g.getValue())!==e.modelValue&&((y=i.value)==null||y.setValue(e.modelValue))}),H(()=>e.placeholder,()=>{var g;(g=i.value)==null||g.setPlaceholder(e.placeholder)}),H(()=>e.disabled,()=>{var g;(g=i.value)==null||g.setDisabled(e.disabled)}),H(()=>e.readonly,()=>{var g;(g=i.value)==null||g.setDisabled(e.readonly)}),H(()=>e.maxlength,()=>{var g;e.maxlength&&((g=i.value)==null||g.setMaxLength(e.maxlength))}),{inputWrapperRef:o,codeMirrorUt:i,resetHistory(){var g,y;(g=i.value)==null||g.view.dispatch({effects:u.reconfigure([])}),(y=i.value)==null||y.view.dispatch({effects:u.reconfigure(ul())})}}},Qr=(e,n,t)=>{const l=ve({resizedWidth:e.inputBoxWitdh}),o=ve({width:e.inputBoxWitdh}),i=ve({left:e.inputBoxWitdh,display:"initial"}),a=u=>{var r,d,p;const k=((r=n.value)==null?void 0:r.offsetWidth)||0,b=((d=n.value)==null?void 0:d.getBoundingClientRect().x)||0;let v=u.x-b;v<wt?v=wt:v>k-wt&&(v=k-wt);const w=`${v}px`;o.width=w,i.left=w,l.resizedWidth=w,(p=e.onInputBoxWitdhChange)==null||p.call(e,w)},h=()=>{document.addEventListener("mousemove",a)},s=()=>{document.removeEventListener("mousemove",a)};return H([t],()=>{var u,r;(u=t.value)==null||u.addEventListener("mousedown",h),(r=t.value)==null||r.addEventListener("mouseup",s)},{immediate:!0}),bt(()=>{var u,r;(u=t.value)==null||u.removeEventListener("mousedown",h),(r=t.value)==null||r.removeEventListener("mouseup",s)}),H(()=>e.inputBoxWitdh,u=>{u&&(l.resizedWidth=u,o.width=u,i.left=u)}),H([je(e.setting,"htmlPreview"),je(e.setting,"preview"),je(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(o.width="0%",i.display="none"):!e.setting.htmlPreview&&!e.setting.preview?(o.width="100%",i.display="none"):(o.width=l.resizedWidth,i.display="initial")},{immediate:!0}),{inputWrapperStyle:o,resizeOperateStyle:i}},Jr=J({name:"MDEditorContent",props:za,setup(e,n){const t=M("editorId"),l=q(""),o=q(),i=q(),{inputWrapperRef:a,codeMirrorUt:h,resetHistory:s}=Zr(e),{inputWrapperStyle:u,resizeOperateStyle:r}=Qr(e,o,i);return $r(e,l,h),n.expose({getSelectedText(){var d;return(d=h.value)==null?void 0:d.getSelectedText()},focus(d){var p;(p=h.value)==null||p.focus(d)},resetHistory:s}),()=>m("div",{class:`${f}-content${e.setting.htmlPreview||e.setting.preview?" has-preview":""}`,ref:o},[m("div",{class:`${f}-input-wrapper`,style:u,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&m("div",{class:`${f}-resize-operate`,style:r,ref:i},null),m(wo,{modelValue:e.modelValue,setting:e.setting,onHtmlChanged:d=>{l.value=d,e.onHtmlChanged(d)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.catalogVisible&&m(gt,{theme:e.theme,class:`${f}-catalog-editor`,editorId:t,mdHeadingId:e.mdHeadingId,key:"internal-catalog"},null)])}}),Yr=J({props:{modelValue:{type:String,default:""}},setup(e){const n=M("usedLanguageText");return()=>{var t,l;return m("div",{class:`${f}-footer-item`},[m("label",{class:`${f}-footer-label`},[`${(t=n.value.footer)==null?void 0:t.markdownTotal}:`]),m("span",null,[((l=e.modelValue)==null?void 0:l.length)||0])])}}}),es={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}},ts=J({props:es,setup(e){return()=>m("div",{class:[`${f}-checkbox`,e.checked&&`${f}-checkbox-checked`],onClick:()=>{e.onChange(!e.checked)}},null)}}),ns={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},ls=J({props:ns,setup(e){const n=M("usedLanguageText");return()=>{var t;return m("div",{class:`${f}-footer-item`},[m("label",{class:`${f}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(t=n.value.footer)==null?void 0:t.scrollAuto]),m(ts,{checked:e.scrollAuto,onChange:e.onScrollAutoChange},null)])}}}),os={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},is=J({name:"MDEditorFooter",props:os,setup(e){const n=ge(()=>{const l=e.footers.indexOf("="),o=l===-1?e.footers:e.footers.slice(0,l),i=l===-1?[]:e.footers.slice(l,Number.MAX_SAFE_INTEGER);return[o,i]}),t=l=>{if(Kl.includes(l))switch(l){case"markdownTotal":return m(Yr,{modelValue:e.modelValue},null);case"scrollSwitch":return m(ls,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else return e.defFooters instanceof Array?e.defFooters[l]||"":e.defFooters&&e.defFooters.children instanceof Array&&e.defFooters.children[l]||""};return()=>{const l=n.value[0].map(i=>t(i)),o=n.value[1].map(i=>t(i));return m("div",{class:`${f}-footer`},[m("div",{class:`${f}-footer-left`},[l]),m("div",{class:`${f}-footer-right`},[o])])}}}),Qt=J({name:"MdEditorV3",props:Qa,emits:Ja,setup(e,n){const{editorId:t,noKatex:l,noMermaid:o,noPrettier:i,noUploadImg:a,noHighlight:h}=e,s=ve({scrollAuto:e.scrollAuto}),u=q();Wa(e,n),Va(e),Ua(e),Ga(e,n);const[r,d]=qa(e,n),p=Ka(e);return bt(()=>{$.clear(t)}),Xa(e,n,p,r,d,u),()=>{const k=Ae({props:e,ctx:n},"defToolbars"),b=Ae({props:e,ctx:n},"defFooters");return m("div",{id:t,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,r.fullscreen||r.pageFullscreen?`${f}-fullscreen`:""],style:e.style},[e.toolbars.length>0&&m(wr,{noPrettier:i,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:r,updateSetting:d,tableShape:e.tableShape,defToolbars:k,noUploadImg:a,showToolbarName:e.showToolbarName},null),m(Jr,{ref:u,modelValue:e.modelValue,setting:r,mdHeadingId:e.mdHeadingId,noMermaid:o,noPrettier:i,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:l,scrollAuto:s.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:h,updateModelValue:v=>{n.emit("update:modelValue",v)},onChange:v=>{e.onChange&&e.onChange(v),n.emit("onChange",v)},onHtmlChanged:v=>{e.onHtmlChanged&&e.onHtmlChanged(v),n.emit("onHtmlChanged",v)},onGetCatalog:v=>{e.onGetCatalog&&e.onGetCatalog(v),n.emit("onGetCatalog",v)},onBlur:v=>{e.onBlur&&e.onBlur(v),n.emit("onBlur",v)},onFocus:v=>{e.onFocus&&e.onFocus(v),n.emit("onFocus",v)},onInput:v=>{e.onInput&&e.onInput(v),n.emit("onInput",v)},completions:e.completions,catalogVisible:p.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:v=>{e.onDrop&&e.onDrop(v),n.emit("onDrop",v)},inputBoxWitdh:e.inputBoxWitdh,onInputBoxWitdhChange:v=>{e.onInputBoxWitdhChange&&e.onInputBoxWitdhChange(v),n.emit("onInputBoxWitdhChange",v)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.footers.length>0&&m(is,{modelValue:e.modelValue,footers:e.footers,defFooters:b,scrollAuto:s.scrollAuto,onScrollAutoChange:v=>s.scrollAuto=v},null)])}}});Qt.install=e=>(e.component(Qt.name,Qt),e.use(Ot).use(_t).use(Mt).use(gt).use(Ht),e);export{Qt as E,Ht as M};
