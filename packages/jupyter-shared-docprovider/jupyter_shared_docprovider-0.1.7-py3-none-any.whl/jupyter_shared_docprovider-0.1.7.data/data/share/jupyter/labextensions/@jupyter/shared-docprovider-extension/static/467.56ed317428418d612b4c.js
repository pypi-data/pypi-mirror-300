"use strict";(self.webpackChunk_jupyter_shared_docprovider_extension=self.webpackChunk_jupyter_shared_docprovider_extension||[]).push([[467],{3467:(e,t,n)=>{n.r(t),n.d(t,{ICollaborativeDrive:()=>M,IGlobalAwareness:()=>W,NotebookCellServerExecutor:()=>x,TimelineWidget:()=>oe,WebSocketAwarenessProvider:()=>w,WebSocketProvider:()=>F,YDrive:()=>P,requestDocSession:()=>D,requestDocumentTimeline:()=>I,requestUndoRedo:()=>$}),n(2206);var s=n(3845),o=n(482),r=n(6214),i=n(9326),a=n(9870),c=n(7784),l=n(1370),d=n(801),h=n(6132),u=n(7670),p=n(9907);const m=[];m[0]=(e,t,n,s,o)=>{r.zd(e,0);const i=a.VU(t,e,n.doc,n);s&&i===a.Zg&&!n.synced&&(n.synced=!0)},m[3]=(e,t,n,s,o)=>{r.zd(e,1),r.Gu(e,c.X3(n.awareness,Array.from(n.awareness.getStates().keys())))},m[1]=(e,t,n,s,o)=>{c.tQ(n.awareness,i.bo(t),n)},m[2]=(e,t,n,s,o)=>{((e,t,n)=>{0===i.cw(e)&&n(0,i.t3(e))})(t,n.doc,((e,t)=>f(n,t)))};const f=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),v=(e,t,n)=>{const s=i.$C(t),o=r.xv(),a=i.cw(s),c=e.messageHandlers[a];return c?c(o,s,e,n,a):console.error("Unable to compute message"),o},y=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=o._g();const s=v(e,new Uint8Array(n.data),!0);r.Bw(s)>1&&t.send(r.Fo(s))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,c._g(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(y,d.jk(100*d.n7(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=o._g(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=r.xv();if(r.zd(n,0),a.ue(n,e.doc),t.send(r.Fo(n)),null!==e.awareness.getLocalState()){const n=r.xv();r.zd(n,1),r.Gu(n,c.X3(e.awareness,[e.doc.clientID])),t.send(r.Fo(n))}},e.emit("status",[{status:"connecting"}])}},g=(e,t)=>{const n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&s.mk(e.bcChannel,t,e)};class _ extends l.c{constructor(e,t,n,{connect:i=!0,awareness:l=new c.ww(n),params:d={},WebSocketPolyfill:f=WebSocket,resyncInterval:y=-1,maxBackoffTime:_=2500,disableBc:w=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const b=(e=>h.Tj(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(d);this.maxBackoffTime=_,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===b.length?"":"?"+b),this.roomname=t,this.doc=n,this._WS=f,this.awareness=l,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=w,this.wsUnsuccessfulReconnects=0,this.messageHandlers=m.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,y>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=r.xv();r.zd(e,0),a.ue(e,n),this.ws.send(r.Fo(e))}}),y)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=v(this,new Uint8Array(e),!1);r.Bw(t)>1&&s.mk(this.bcChannel,r.Fo(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=r.xv();r.zd(t,0),a.f7(t,e),g(this,r.Fo(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:n},s)=>{const o=e.concat(t).concat(n),i=r.xv();r.zd(i,1),r.Gu(i,c.X3(l,o)),g(this,r.Fo(i))},this._exitHandler=()=>{c._g(this.awareness,[n.clientID],"app closed")},u.Ll&&void 0!==p&&p.on("exit",this._exitHandler),l.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<o._g()-this.wsLastMessageReceived&&this.ws.close()}),3e3),i&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),u.Ll&&void 0!==p&&p.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(s.B1(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=r.xv();r.zd(e,0),a.ue(e,this.doc),s.mk(this.bcChannel,r.Fo(e),this);const t=r.xv();r.zd(t,0),a.nh(t,this.doc),s.mk(this.bcChannel,r.Fo(t),this);const n=r.xv();r.zd(n,3),s.mk(this.bcChannel,r.Fo(n),this);const o=r.xv();r.zd(o,1),r.Gu(o,c.X3(this.awareness,[this.doc.clientID])),s.mk(this.bcChannel,r.Fo(o),this)}disconnectBc(){const e=r.xv();r.zd(e,1),r.Gu(e,c.X3(this.awareness,[this.doc.clientID],new Map)),g(this,r.Fo(e)),this.bcconnected&&(s.al(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(y(this),this.connectBc())}}class w extends _{constructor(e){super(e.url,e.roomID,e.awareness.doc,{awareness:e.awareness}),this._isDisposed=!1,this._awareness=e.awareness,this._user=e.user,this._user.ready.then((()=>this._onUserChanged(this._user))).catch((e=>console.error(e))),this._user.userChanged.connect(this._onUserChanged,this)}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._user.userChanged.disconnect(this._onUserChanged,this),this._isDisposed=!0,this.destroy())}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}var b=n(2200),C=n(1473),S=n(7354),k=n(2678);class x{constructor(e){var t;this._serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:S.ServerConnection.makeSettings()}async runCell({cell:e,notebook:t,notebookConfig:n,onCellExecuted:s,onCellExecutionScheduled:o,sessionContext:r,sessionDialogs:i,translator:a}){var c,l,d;const h=(a=null!=a?a:k.nullTranslator).load("jupyterlab");switch(e.model.type){case"markdown":e.rendered=!0,e.inputHidden=!1,s({cell:e,success:!0});break;case"code":if(r){if(r.isTerminating){await(0,b.showDialog)({title:h.__("Kernel Terminating"),body:h.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",null===(c=r.session)||void 0===c?void 0:c.path),buttons:[b.Dialog.okButton()]});break}if(r.pendingInput)return await(0,b.showDialog)({title:h.__("Cell not executed due to pending input"),body:h.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[b.Dialog.okButton()]}),!1;if(r.hasNoKernel&&await r.startKernel()&&i&&await i.selectKernel(r),r.hasNoKernel)return e.model.sharedModel.transact((()=>{e.model.clearExecution()})),!0;const n=null===(d=null===(l=null==r?void 0:r.session)||void 0===l?void 0:l.kernel)||void 0===d?void 0:d.id,a=C.URLExt.join(this._serverSettings.baseUrl,`api/kernels/${n}/execute`),u=e.model.sharedModel.getId(),p=t.sharedModel.getState("document_id"),m={method:"POST",body:JSON.stringify({cell_id:u,document_id:p})};o({cell:e});let f=!1;try{f=(await S.ServerConnection.makeRequest(a,m,this._serverSettings)).ok}catch(t){if(s({cell:e,success:!1}),e.isDisposed)return!1;throw t}return s({cell:e,success:f}),!0}e.model.sharedModel.transact((()=>{e.model.clearExecution()}),!1)}return Promise.resolve(!0)}}const T="api/collaboration/session",U="api/collaboration/undo_redo",R="api/collaboration/timeline";async function D(e,t,n){const s=S.ServerConnection.makeSettings(),o=C.URLExt.join(s.baseUrl,T,encodeURIComponent(n)),r={method:"PUT",body:JSON.stringify({format:e,type:t})};let i;try{i=await S.ServerConnection.makeRequest(o,r,s)}catch(e){throw new S.ServerConnection.NetworkError(e)}let a=await i.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new S.ServerConnection.ResponseError(i,a.message||a);return a}async function I(e,t,n){const s=S.ServerConnection.makeSettings();let o=C.URLExt.join(s.baseUrl,R,n);o=o.concat(`?format=${e}&&type=${t}`);const r={method:"GET"};let i;try{i=await S.ServerConnection.makeRequest(o,r,s)}catch(e){throw new S.ServerConnection.NetworkError(e)}return i}async function $(e,t,n,s){const o=S.ServerConnection.makeSettings();let r=C.URLExt.join(o.baseUrl,U,encodeURIComponent(e));r=r.concat(`?action=${t}&&steps=${n}&&forkRoom=${s}`);const i={method:"PUT"};let a;try{a=await S.ServerConnection.makeRequest(r,i,o)}catch(e){throw new S.ServerConnection.NetworkError(e)}let c=await a.text();if(c.length>0)try{c=JSON.parse(c)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new S.ServerConnection.ResponseError(a,c.message||c);return c}var E=n(4602),j=n(7262);class F{constructor(e){this._onConnectionClosed=e=>{1003===e.code&&(console.error("Document provider closed:",e.reason),(0,b.showErrorMessage)(this._trans.__("Document session error"),e.reason,[b.Dialog.okButton()]),this._sharedModel.dispose())},this._onSync=e=>{e&&(this._yWebsocketProvider&&(this._yWebsocketProvider.off("sync",this._onSync),this._sharedModel.ydoc.getMap("state").set("document_id",this._yWebsocketProvider.roomname)),this._ready.resolve())},this._ready=new j.PromiseDelegate,this._isDisposed=!1,this._path=e.path,this._contentType=e.contentType,this._format=e.format,this._serverUrl=e.url,this._sharedModel=e.model,this._awareness=e.model.awareness,this._yWebsocketProvider=null,this._trans=e.translator;const t=e.user;t.ready.then((()=>{this._onUserChanged(t)})).catch((e=>console.error(e))),t.userChanged.connect(this._onUserChanged,this),this._connect().catch((e=>console.warn(e)))}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}get contentType(){return this._contentType}get format(){return this._format}dispose(){var e,t,n;this.isDisposed||(this._isDisposed=!0,null===(e=this._yWebsocketProvider)||void 0===e||e.off("connection-close",this._onConnectionClosed),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync),null===(n=this._yWebsocketProvider)||void 0===n||n.destroy(),this._disconnect(),E.Signal.clearData(this))}async reconnect(){this._disconnect(),this._connect()}async _connect(){const e=await D(this._format,this._contentType,this._path);this._yWebsocketProvider=new _(this._serverUrl,`${e.format}:${e.type}:${e.fileId}`,this._sharedModel.ydoc,{disableBc:!0,params:{sessionId:e.sessionId},awareness:this._awareness}),this._yWebsocketProvider.on("sync",this._onSync),this._yWebsocketProvider.on("connection-close",this._onConnectionClosed)}async connectToForkDoc(e,t){this._disconnect(),this._yWebsocketProvider=new _(this._serverUrl,e,this._sharedModel.ydoc,{disableBc:!0,params:{sessionId:t},awareness:this._awareness})}get wsProvider(){return this._yWebsocketProvider}_disconnect(){var e,t,n;null===(e=this._yWebsocketProvider)||void 0===e||e.off("connection-close",this._onConnectionClosed),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync),null===(n=this._yWebsocketProvider)||void 0===n||n.destroy(),this._yWebsocketProvider=null}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}const N="true"===C.PageConfig.getOption("disableRTC");class P extends S.Drive{constructor(e,t,n){super({name:"RTC"}),this._onCreate=(e,t)=>{var n,s;if("string"==typeof e.format)try{const o=new F({url:C.URLExt.join(this.serverSettings.wsUrl,"api/collaboration/room"),path:e.path,format:e.format,contentType:e.contentType,model:t,user:this._user,translator:this._trans}),r=((null===(n=this._globalAwareness)||void 0===n?void 0:n.getLocalState())||{}).documents||[];r.includes(e.path)||(r.push(`${this.name}:${e.path}`),null===(s=this._globalAwareness)||void 0===s||s.setLocalStateField("documents",r));const i=`${e.format}:${e.contentType}:${e.path}`;this._providers.set(i,o),t.changed.connect((async(t,n)=>{if(!n.stateChange)return;const s=n.stateChange.filter((e=>"hash"===e.name));if(0===s.length)return;s.length>1&&console.error("Unexpected multiple changes to hash value in a single transaction");const o=s[0],r=await this.get(e.path,{content:!1});this._ydriveFileChanged.emit({type:"save",newValue:{...r,hash:o.newValue},oldValue:{hash:o.oldValue}})})),t.disposed.connect((()=>{var t,n;const s=this._providers.get(i);s&&(s.dispose(),this._providers.delete(i));const o=((null===(t=this._globalAwareness)||void 0===t?void 0:t.getLocalState())||{}).documents||[],r=o.indexOf(`${this.name}:${e.path}`);r>-1&&o.splice(r,1),null===(n=this._globalAwareness)||void 0===n||n.setLocalStateField("documents",o)}))}catch(t){console.error(`Failed to open websocket connection for ${e.path}.\n:${t}`)}},this._ydriveFileChanged=new E.Signal(this),this._user=e,this._trans=t,this._globalAwareness=n,this._providers=new Map,this.sharedModelFactory=new L(this._onCreate),super.fileChanged.connect(((e,t)=>{this._ydriveFileChanged.emit(t)}))}get providers(){return this._providers}dispose(){this.isDisposed||(this._providers.forEach((e=>e.dispose())),this._providers.clear(),super.dispose())}async get(e,t){if(t&&t.format&&t.type){const n=`${t.format}:${t.type}:${e}`,s=this._providers.get(n);if(s){const[n]=await Promise.all([super.get(e,{...t,content:!1}),s.ready]);return n}}return super.get(e,t)}async save(e,t={}){if(t.format&&t.type){const n=`${t.format}:${t.type}:${e}`;if(this._providers.get(n)){const n={type:t.type,format:t.format,content:!1};return this.get(e,n)}}return super.save(e,t)}get fileChanged(){return this._ydriveFileChanged}}class L{constructor(e){this._onCreate=e,this.collaborative=!N,this._documentFactories=new Map}registerDocumentFactory(e,t){if(this._documentFactories.has(e))throw new Error(`The content type ${e} already exists`);this._documentFactories.set(e,t)}createNew(e){if("string"==typeof e.format){if(this.collaborative&&e.collaborative&&this._documentFactories.has(e.contentType)){const t=this._documentFactories.get(e.contentType)(e);return this._onCreate(e,t),t}}else console.warn(`Only defined format are supported; got ${e.format}.`)}}const M=new j.Token("@jupyter/collaboration-extension:ICollaborativeDrive"),W=new j.Token("@jupyter/collaboration:IGlobalAwareness");var B=n(3345),A=n.n(B),H=n(2591),z=n.n(H),O=n(1740),J=n.n(O),q=n(8128),G=n.n(q),K=n(855),V=n.n(K),X=n(3051),Y=n.n(X),Q=n(3656),Z=n.n(Q),ee=n(9858),te={};te.styleTagTransform=Z(),te.setAttributes=V(),te.insert=G().bind(null,"head"),te.domAPI=J(),te.insertStyleElement=Y(),z()(ee.A,te),ee.A&&ee.A.locals&&ee.A.locals;var ne=n(7460);const se=({apiURL:e,provider:t,contentType:n,format:s})=>{const[o,r]=(0,B.useState)({roomId:"",timestamps:[],forkRoom:"",sessionId:""}),[i,a]=(0,B.useState)(o.timestamps.length-1),[c,l]=(0,B.useState)(!1),[d,h]=(0,B.useState)(!1),u=(0,B.useRef)(!0),p=(0,B.useRef)(!0),m=(0,B.useRef)(null);function f(e){try{const t=new URL(e).pathname.split("/");return t.slice(4-t.length).join("/")}catch(e){return console.error("Invalid URL:",e),""}}return A().createElement("div",{className:"jp-sliderContainer"},A().createElement("div",{onClick:()=>{!async function(o){try{if(u.current){const i=await I(s,n,o);if(!i.ok)throw 404===i.status?new Error("Not found"):503===i.status?new Error("WebSocket closed"):new Error(`Failed to fetch data: ${i.statusText}`);const c=await i.text();let d={roomId:"",timestamps:[],forkRoom:"",sessionId:""};return c&&(b.Notification.warning("Document is now in read-only mode. Changes will not be saved.",{autoClose:2500}),d=JSON.parse(c),r(d),a(d.timestamps.length-1),t.connectToForkDoc(d.forkRoom,d.sessionId),m.current=await D(s,n,f(e))),l(!0),u.current=!1,d}}catch(e){console.error("Error fetching data:",e)}}(f(e))},className:"jp-mod-highlighted",title:"Document Timeline"},A().createElement(ne.historyIcon.react,{marginRight:"4px"})),c&&A().createElement("div",{className:"jp-timestampDisplay"},A().createElement("input",{type:"range",min:0,max:o.timestamps.length-1,value:i,onChange:async e=>{const t=parseInt(e.target.value),n=Math.abs(t-i);try{const e=function(e){return e<i?"undo":"redo"}(t);if(a(t),p.current&&(h(!0),p.current=!1),!m.current)return void console.error("Session is not initialized");await $(`${m.current.format}:${m.current.type}:${m.current.fileId}`,e,n,o.forkRoom)}catch(e){console.error("Error fetching or applying updates:",e)}},className:"jp-Slider"}),A().createElement("div",null,A().createElement("strong",null,f(e).split("/").pop()," ")," "),d&&A().createElement("div",{className:"jp-restoreBtnContainer"},A().createElement("button",{onClick:async()=>{if(!m.current)return void console.error("Session is not initialized");const e=await $(`${m.current.format}:${m.current.type}:${m.current.fileId}`,"restore",0,o.forkRoom);200===e.code?(b.Notification.success(e.status,{autoClose:4e3}),t.reconnect(),l(!1),u.current=!0):b.Notification.error(e.status,{autoClose:4e3})},className:"jp-ToolbarButtonComponent jp-restoreBtn"},"Restore version"," ",(e=>{const t=new Date(1e3*e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`})(o.timestamps[i])))))};class oe extends b.ReactWidget{constructor(e,t,n,s){super(),this.apiURL=e,this.provider=t,this.contentType=n,this.format=s,this.addClass("jp-timelineSliderWrapper")}render(){return B.createElement(se,{key:this.apiURL,apiURL:this.apiURL,provider:this.provider,contentType:this.contentType,format:this.format})}updateContent(e,t){this.apiURL=e,this.provider=t,this.contentType=this.provider.contentType,this.format=this.provider.format,this.update()}}},9858:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(6758),o=n.n(s),r=n(935),i=n.n(r)()(o());i.push([e.id,"/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|---------------------------------------------------------------------------- */\n\n.jp-timelineSliderWrapper .jp-sliderContainer{\n  display: flex;\n  align-items: center;\n}\n\n.jp-Slider {\n  height: 4.5px\n}\n\n#jp-slider-status-bar {\n  display: flex;\n}\n\n.jp-timestampDisplay {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 6px;\n}\n\n.jp-restoreBtnContainer {\n  width: 192px;\n}\n\n.jp-ToolbarButtonComponent.jp-restoreBtn {\n  cursor: pointer;\n  color: var(--jp-layout-color2);\n  width: 100%;\n  background: var(--jp-accept-color-normal)\n}\n",""]);const a=i},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);s&&i[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},6758:e=>{e.exports=function(e){return e[1]}},2591:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var r={},i=[],a=0;a<e.length;a++){var c=e[a],l=s.base?c[0]+s.base:c[0],d=r[l]||0,h="".concat(l," ").concat(d);r[l]=d+1;var u=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var m=o(p,s);s.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}i.push(h)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=s(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var a=n(r[i]);t[a].references--}for(var c=s(e,o),l=0;l<r.length;l++){var d=n(r[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=c}}},8128:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},3051:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},855:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},1740:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,o&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},3656:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}}]);