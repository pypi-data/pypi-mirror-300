(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9284],{82136:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[subfieldUrn]",function(){return a(39331)}])},60262:function(e,t,a){"use strict";a.d(t,{f:function(){return l}});var i=a(24246);let l=(0,a(13054).IUT)({displayName:"FieldIcon",viewBox:"0 0 16 16",path:(0,i.jsx)("path",{d:"M12.6667 12.6667V10.6667H3.33333V12.6667H12.6667ZM12.6667 9.33333V6.66667H3.33333V9.33333H12.6667ZM12.6667 5.33333V3.33333H3.33333V5.33333H12.6667ZM3.33333 14C2.96667 14 2.65278 13.8694 2.39167 13.6083C2.13056 13.3472 2 13.0333 2 12.6667V3.33333C2 2.96667 2.13056 2.65278 2.39167 2.39167C2.65278 2.13056 2.96667 2 3.33333 2H12.6667C13.0333 2 13.3472 2.13056 13.6083 2.39167C13.8694 2.65278 14 2.96667 14 3.33333V12.6667C14 13.0333 13.8694 13.3472 13.6083 13.6083C13.3472 13.8694 13.0333 14 12.6667 14H3.33333Z",fill:"currentColor"})})},39331:function(e,t,a){"use strict";a.r(t);var i=a(24246),l=a(92222),s=a(59003),n=a(13054),o=a(30454),r=a.n(o),d=a(47215),c=a.n(d),u=a(86677),x=a(27378),f=a(90824),m=a(62257),g=a(60262),h=a(29137),j=a(43124),b=a(11032),p=a(37541),v=a(52850),C=a(19906),w=a(52987),_=a(39006),k=a(89955),y=a(5067);let R=(0,l.Cl)(),V=()=>(0,i.jsx)(n.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,i.jsx)(n.gCW,{children:(0,i.jsx)(n.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,w.TG)(),a=e.query.datasetId,o=e.query.collectionName,d=e.query.subfieldUrn||"",M=d.split("."),{isLoading:N,data:z}=(0,w.oM)(a),S=(0,x.useMemo)(()=>(null==z?void 0:z.collections)||[],[z]).find(e=>e.name===o),T=(0,x.useMemo)(()=>(null==S?void 0:S.fields)||[],[S]),H=(0,x.useMemo)(()=>{let e=T;return M.forEach(t=>{let a=e.find(e=>e.name===t);e=(null==a?void 0:a.fields)||[]}),e},[T,M]),[Z,U]=(0,x.useState)(),F=(0,x.useCallback)(e=>{let{dataCategory:a,field:i}=e,l=i.data_categories||[],s=(0,y.Fk)({dataset:z,collectionName:o,subfieldUrn:"".concat(d,".").concat(i.name)}),n=r()(z);c()(n,"".concat(s,".data_categories"),[...l,a]),t(n)},[z,t,o,d]),I=(0,x.useCallback)(e=>{let{dataCategory:a,field:i}=e,l=i.data_categories||[],s=(0,y.Fk)({dataset:z,collectionName:o,subfieldUrn:"".concat(d,".").concat(i.name)}),n=r()(z);c()(n,"".concat(s,".data_categories"),l.filter(e=>e!==a)),t(n)},[z,t,o,d]),q=(0,x.useCallback)(t=>{e.push({pathname:b.y1,query:{datasetId:a,collectionName:o,subfieldUrn:"".concat(d,".").concat(t.name)}})},[a,e,o,d]),E=(0,x.useMemo)(()=>[R.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,i.jsx)(v.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,i.jsx)(v.Rr,{value:"Field Name",...e}),size:180}),R.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,i.jsx)(v.A4,{value:e.getValue()}):(0,i.jsx)(v.G3,{value:void 0}),header:e=>(0,i.jsx)(v.Rr,{value:"Type",...e}),size:80}),R.accessor(e=>e.description,{id:"description",cell:e=>(0,i.jsx)(v.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(v.Rr,{value:"Description",...e}),size:300}),R.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let t=e.row.original;return(0,i.jsx)(C.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>F({dataCategory:e,field:t}),onRemoveTaxonomy:e=>I({dataCategory:e,field:t})})},header:e=>(0,i.jsx)(v.Rr,{value:"Data categories",...e}),size:300}),R.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,i.jsx)(n.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,i.jsx)(n.zxk,{variant:"outline",size:"xs",leftIcon:(0,i.jsx)(n.dY8,{}),onClick:()=>{L(a),D(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[F,I]),A=(0,x.useMemo)(()=>Z?H.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())):H,[H,Z]),G=(0,s.b7)({getCoreRowModel:(0,l.sC)(),getFilteredRowModel:(0,l.vL)(),getSortedRowModel:(0,l.tj)(),columns:E,data:A}),[W,D]=(0,x.useState)(!1),[O,L]=(0,x.useState)();return(0,i.jsxs)(j.Z,{title:"Dataset - ".concat(a),mainProps:{paddingTop:0},children:[(0,i.jsx)(p.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,i.jsx)(_.Z,{breadcrumbs:[{title:"All datasets",icon:(0,i.jsx)(f.V,{boxSize:4}),link:b.$m},{title:a,link:{pathname:b.o5,query:{datasetId:a}},icon:(0,i.jsx)(m.l,{boxSize:5})},{title:o,icon:(0,i.jsx)(h.$,{boxSize:5}),link:{pathname:b.RF,query:{datasetId:a,collectionName:o}}},...M.map((e,t)=>({title:e,link:{pathname:b.y1,query:{datasetId:a,collectionName:o,subfieldUrn:M.slice(0,t+1).join(".")}},icon:(0,i.jsx)(g.f,{boxSize:5})}))]})}),N?(0,i.jsx)(v.I4,{rowHeight:36,numRows:15}):(0,i.jsxs)(n.xuv,{"data-testid":"fields-table",children:[(0,i.jsx)(v.Q$,{children:(0,i.jsx)(v.HO,{globalFilter:Z,setGlobalFilter:U,placeholder:"Search",testid:"fields-search"})}),(0,i.jsx)(v.ZK,{tableInstance:G,emptyTableNotice:(0,i.jsx)(V,{}),onRowClick:q,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,i.jsx)(k.Z,{isOpen:W,onClose:()=>{D(!1),L(void 0)},field:O,dataset:z,collectionName:o,subfieldUrn:d})]})]})}}},function(e){e.O(0,[6451,4554,2866,9278,1995,2850,7096,6711,2888,9774,179],function(){return e(e.s=82136)}),_N_E=e.O()}]);