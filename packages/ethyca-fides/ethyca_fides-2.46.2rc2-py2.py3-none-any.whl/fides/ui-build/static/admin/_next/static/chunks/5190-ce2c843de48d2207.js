"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5190],{73485:function(e,t,l){l.d(t,{R:function(){return a}});var n=l(24246),s=l(13054),i=l(79894),o=l.n(i);let a=e=>{let{onClick:t,...l}=e;return(0,n.jsxs)(s.kCb,{alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer",...l,children:[(0,n.jsx)(s.hU,{"aria-label":"Back",icon:(0,n.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,n.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]})};t.Z=e=>{let{backPath:t,...l}=e;return(0,n.jsxs)(s.kCb,{alignItems:"center",mb:6,...l,children:[(0,n.jsx)(s.hU,{as:o(),href:t,"aria-label":"Back",icon:(0,n.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,n.jsx)(s.xvT,{as:o(),href:t,fontSize:"sm",fontWeight:"500",children:"Back"})]})}},37636:function(e,t,l){l.d(t,{$:function(){return k}});var n=l(24246),s=l(92222),i=l(59003),o=l(11596),a=l(60136),r=l(52850),d=l(16781),c=l(13054),u=l(86677),g=l(27378),h=l(44296),x=l(77650),m=l(11032),C=l(85815),j=l(96878);let b=e=>{let{onChange:t,displayText:l,isChecked:s,value:i}=e;return(0,n.jsx)(c.XZJ,{id:"checkbox-".concat(i),value:i,height:"20px",mb:3,isChecked:s,onChange:t,colorScheme:"complimentary",mr:5,children:(0,n.jsx)(c.xvT,{fontSize:"sm",lineHeight:5,height:"20px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:l})},i)},f={GVL:!1,AC:!1,COMPASS:!1};var p=e=>{let{isOpen:t,onClose:l,tableInstance:s}=e,[i,o]=(0,g.useState)(f);return(0,g.useMemo)(()=>{let e={id:"vendor_id",value:[]};i.GVL&&e.value.push("gvl"),i.AC&&e.value.push("gacp"),s.setColumnFilters([e])},[i,s]),(0,n.jsxs)(c.u_l,{isOpen:t,onClose:l,isCentered:!0,size:"2xl",children:[(0,n.jsx)(c.ZAr,{}),(0,n.jsxs)(c.hzk,{children:[(0,n.jsx)(c.xBx,{children:"Filters"}),(0,n.jsx)(c.olH,{}),(0,n.jsx)(c.izJ,{}),(0,n.jsxs)(c.fef,{maxH:"85vh",px:6,py:4,overflowX:"auto",children:[(0,n.jsx)(c.xvT,{fontSize:"md",fontWeight:"bold",mb:2,children:"Sources"}),(0,n.jsx)(b,{onChange:()=>{o(e=>({...e,GVL:!e.GVL}))},displayText:a.iC.gvl.fullName,isChecked:i.GVL,value:"gvl"}),(0,n.jsx)(b,{onChange:()=>{o(e=>({...e,AC:!e.AC}))},displayText:a.iC.gacp.fullName,isChecked:i.AC,value:"gacp"})]}),(0,n.jsx)(c.mzw,{children:(0,n.jsxs)(c.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,n.jsx)(c.zxk,{variant:"outline",size:"sm",mr:3,onClick:()=>{s.setColumnFilters([]),o(f)},flexGrow:1,children:"Reset Filters"}),(0,n.jsx)(c.zxk,{"data-testid":"filter-done-btn",colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Done"})]})})]})]})};let v=e=>{var t;let{value:l}=e,s=(0,a.cj)(l),i=null!==(t=a.iC[s])&&void 0!==t?t:{label:"",fullName:""};return(0,n.jsx)(c.kCb,{alignItems:"center",justifyContent:"center",height:"100%",mr:"2",children:(0,n.jsx)(c.ua7,{label:i.fullName,placement:"top",children:(0,n.jsx)(c.Cts,{children:i.label})})})},S=(0,s.Cl)(),w=()=>(0,n.jsxs)(c.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:[(0,n.jsxs)(c.gCW,{children:[(0,n.jsx)(c.xvT,{fontSize:"md",fontWeight:"600",children:"No results found."}),(0,n.jsx)(c.xvT,{fontSize:"sm",children:'Can\'t find the vendor you are looking for? Add custom systems or unlisted\n      vendors by selecting the "Add custom vendor" button below.'})]}),(0,n.jsx)(C.Z,{buttonLabel:"Add custom vendor"})]}),k=e=>{let{redirectRoute:t}=e,l="Vendor",b=(0,c.pmc)(),{dictionaryService:f,tcf:k}=(0,o.hz)(),{isLoading:y}=(0,j.x8)(),R=(0,u.useRouter)(),{isLoading:z}=(0,j.iN)(void 0,{skip:!f}),[L,{isLoading:_,isSuccess:I}]=(0,j.Qk)(),A=(0,h.C)(j.gG),[F,M]=(0,g.useState)(),{isOpen:T,onOpen:G,onClose:V}=(0,c.qY0)(),{isOpen:N,onClose:P,onOpen:W}=(0,c.qY0)(),[O,D]=(0,g.useState)(!1),H=A.every(e=>e.linked_system),Z=(0,g.useMemo)(()=>[S.display({id:"select",header:e=>{let{table:t}=e;return(0,n.jsx)(r.k,{dataTestId:"select-page-checkbox",isChecked:t.getIsAllPageRowsSelected(),isDisabled:H||t.getPaginationRowModel().rows.filter(e=>e.original.linked_system).length===t.getState().pagination.pageSize,isIndeterminate:t.getPaginationRowModel().rows.filter(e=>e.getCanSelect()).some(e=>!e.getIsSelected()),onChange:()=>{t.setRowSelection(e=>{let l={...e};return t.getRowModel().rows.forEach(e=>{e.getCanSelect()&&(l[e.id]=!l[e.id])}),l}),D(e=>!e)}})},cell:e=>{let{row:t}=e;return(0,n.jsx)(r.k,{isChecked:t.getIsSelected(),isDisabled:!t.getCanSelect(),isIndeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}),S.accessor(e=>e.name,{id:"name",cell:e=>(0,n.jsx)(r.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(r.Rr,{value:l,...e})}),S.accessor(e=>e.vendor_id,{id:"vendor_id",cell:e=>(0,n.jsx)(v,{value:e.getValue()}),header:e=>(0,n.jsx)(r.Rr,{value:"Source",...e}),enableColumnFilter:k,filterFn:"arrIncludesSome"})],[H,l,k]),B=(0,i.b7)({columns:Z,data:A,getCoreRowModel:(0,s.sC)(),getSortedRowModel:(0,s.tj)(),getFilteredRowModel:(0,s.vL)(),getPaginationRowModel:(0,s.G_)(),onGlobalFilterChange:M,enableRowSelection:e=>!e.original.linked_system,enableSorting:!0,enableGlobalFilter:!0,state:{globalFilter:F,columnVisibility:{vendor_id:k}},initialState:{pagination:{pageSize:r.W3[0]},columnSizing:{select:0,vendor_id:0}},enableColumnResizing:!0,columnResizeMode:"onChange"});(0,g.useEffect)(()=>{let e={};A.forEach((t,l)=>{t.linked_system&&(e[l]=!0)}),Object.keys(e).length&&B.setRowSelection(e)},[A,B]);let{totalRows:E,onPreviousPageClick:Y,isPreviousPageDisabled:$,onNextPageClick:U,isNextPageDisabled:X,setPageSize:q,startRange:J,endRange:Q}=(0,r.bX)(B),K=async()=>{let e=B.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).map(e=>e.original.vendor_id);if(e.length>0){let n=await L(e);R.push(t),(0,a.D4)(n)?b((0,d.Vo)((0,a.e$)(n.error))):b((0,d.t5)("Successfully added ".concat(e.length," ").concat(l.toLocaleLowerCase())))}},ee=B.getSelectedRowModel().rows.some(e=>!e.original.linked_system),et=(0,g.useMemo)(()=>!!ee&&!H,[ee,H]);if(!f&&!y)return R.push(m.gp),null;if(_||I)return(0,n.jsx)(c.kCb,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(c.$jN,{})});if(z)return(0,n.jsx)(r.I4,{rowHeight:36,numRows:15});let el=H?"All ".concat(l.toLocaleLowerCase()," have already been added"):"Select a ".concat(l.toLocaleLowerCase()," "),en=B.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).length,es=B.getState().columnFilters.length>0?B.getState().columnFilters.filter(e=>"vendor_id"===e.id)[0].value.length:0;return(0,n.jsxs)(c.kCb,{flex:1,direction:"column",overflow:"auto","data-testid":"add-multiple-systems-tbl",children:[(0,n.jsx)(x.Z,{isOpen:N,isCentered:!0,onCancel:P,onClose:P,onConfirm:K,title:"Confirmation",message:"You are about to add ".concat(en.toLocaleString("en")," ").concat(l.toLocaleLowerCase()).concat(en>1?"s":"")}),(0,n.jsx)(p,{isOpen:T,onClose:V,tableInstance:B}),(0,n.jsxs)(r.Q$,{children:[(0,n.jsxs)(c.kCb,{alignItems:"center",grow:1,children:[(0,n.jsx)(c.xuv,{maxW:"420px",width:"100%",children:(0,n.jsx)(r.HO,{globalFilter:F,setGlobalFilter:M,placeholder:"Search"})}),en>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.xvT,{fontWeight:"700",fontSize:"sm",lineHeight:"2",ml:4,children:[en.toLocaleString("en")," selected"]}),(0,n.jsx)(c.ua7,{label:el,shouldWrapChildren:!0,placement:"top",isDisabled:et,children:(0,n.jsx)(c.zxk,{onClick:W,"data-testid":"add-multiple-systems-btn",size:"xs",variant:"outline",isDisabled:!ee,ml:4,children:"Add"})})]}):null]}),(0,n.jsxs)(c.Ugi,{spacing:4,alignItems:"center",children:[(0,n.jsx)(C.Z,{buttonLabel:"Add custom vendor",buttonVariant:"outline"}),k?(0,n.jsx)("span",{children:(0,n.jsxs)(c.zxk,{onClick:G,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:["Filter"," ",es>0?(0,n.jsxs)(c.Vp9,{borderRadius:"full",size:"sm",ml:2,children:[" ",es," "]}):null]})}):null]})]}),(0,n.jsx)(r.ZK,{tableInstance:B,rowActionBar:(0,n.jsx)(r.AA,{tableInstance:B,selectedRows:en,isOpen:O}),renderRowTooltipLabel:e=>{if(!e.getCanSelect())return"This vendor has already been added. You can view the properties of this vendor by going to View Systems."},emptyTableNotice:(0,n.jsx)(w,{})}),(0,n.jsx)(r.s8,{pageSizes:r.W3,totalRows:E||0,onPreviousPageClick:Y,isPreviousPageDisabled:$,onNextPageClick:U,isNextPageDisabled:X,setPageSize:q,startRange:J,endRange:Q})]})}}}]);