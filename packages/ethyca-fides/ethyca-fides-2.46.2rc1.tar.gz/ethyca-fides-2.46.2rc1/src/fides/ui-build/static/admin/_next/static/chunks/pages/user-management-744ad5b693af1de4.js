(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{7873:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return n(8632)}])},8632:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return w}});var s=n(24246),t=n(13054),r=n(27378),l=n(45007),d=n(44296),a=n(31756),h=n(20133),o=n(86677),c=n(36223),x=n(11032),p=n(38615),u=n(49646),g=n(19686),j=n(72763),m=e=>{var i,n;let{user:r}=e,l=(0,o.useRouter)(),m=(0,t.qY0)(),f=(0,d.C)(c.dy),b=!!f&&f.id===r.id,T=(0,p.Tg)([g.Sh.USER_UPDATE])||b,v=()=>{T&&l.push("".concat(x.e3,"/profile/").concat(r.id))},{data:C}=(0,a.gU)(null!==(i=r.id)&&void 0!==i?i:"",{skip:!r.id}),{data:_}=(0,a.d6)(null!==(n=r.id)&&void 0!==n?n:"",{skip:!r.id}),k=[];return C&&C.roles&&C.roles.forEach(e=>{let i=u.K.find(i=>i.roleKey===e);i&&k.push(i.permissions_label)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.Tr,{_hover:{bg:"gray.50",cursor:T?"pointer":void 0},height:"36px","data-testid":"row-".concat(r.id),children:[(0,s.jsxs)(t.Td,{pl:0,py:1,onClick:v,children:[r.username," ",r.disabled&&(0,s.jsx)(t.Cts,{bg:"green.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"invite-sent-badge",children:"Invite sent"})]}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:r.email_address}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:r.first_name}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:r.last_name}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:k.map(e=>(0,s.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e))}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:(0,s.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:_?_.length:0})}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:v,children:r.created_at?new Date(r.created_at).toUTCString():null}),(0,s.jsx)(p.ZP,{scopes:[g.Sh.USER_DELETE],children:(0,s.jsx)(t.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,s.jsx)(t.hE2,{children:(0,s.jsx)(t.hU,{"aria-label":"delete",icon:(0,s.jsx)(h.l,{}),variant:"outline",size:"sm",onClick:m.onOpen,"data-testid":"delete-user-btn"})})})})]},r.id),(0,s.jsx)(j.Z,{user:r,...m})]})};let f=()=>{var e,i;let n=(0,l.I0)(),s=(0,l.v9)(a.lq),{data:t,isLoading:r}=(0,a.wv)(s),d=null!==(e=null==t?void 0:t.items)&&void 0!==e?e:[],h=null!==(i=null==t?void 0:t.total)&&void 0!==i?i:0;return{...s,isLoading:r,users:d,total:h,handleNextPage:()=>{n((0,a.YA)(s.page+1))},handlePreviousPage:()=>{n((0,a.YA)(s.page-1))}}},b=()=>{let{users:e,total:i,page:n,size:l,handleNextPage:h,handlePreviousPage:o}=f(),c=(n-1)*l+1,x=Math.min(i,n*l),p=(0,d.T)();return(0,r.useEffect)(()=>{p((0,a.Vv)(void 0))},[p]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.iA_,{size:"sm","data-testid":"user-management-table",children:[(0,s.jsx)(t.hrZ,{children:(0,s.jsxs)(t.Tr,{children:[(0,s.jsx)(t.Th,{pl:0,children:"Username"}),(0,s.jsx)(t.Th,{pl:0,children:"Email"}),(0,s.jsx)(t.Th,{pl:0,children:"First Name"}),(0,s.jsx)(t.Th,{pl:0,children:"Last Name"}),(0,s.jsx)(t.Th,{pl:0,children:"Permissions"}),(0,s.jsx)(t.Th,{pl:0,children:"Assigned Systems"}),(0,s.jsx)(t.Th,{pl:0,children:"Created At"})]})}),(0,s.jsx)(t.p3B,{children:null==e?void 0:e.map(e=>(0,s.jsx)(m,{user:e},e.id))})]}),(0,s.jsxs)(t.kCb,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(t.xvT,{fontSize:"xs",color:"gray.600",children:i>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(c)?0:c," to"," ",Number.isNaN(x)?0:x," of"," ",Number.isNaN(i)?0:i," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(t.zxk,{isDisabled:n<=1,onClick:o,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(t.zxk,{isDisabled:n*l>=i,onClick:h,size:"sm",children:"Next"})]})]})]})};b.defaultProps={users:[]};var T=n(79894),v=n.n(T),C=n(33312);let _=()=>{let e=(0,l.v9)(a.lq),i=(0,l.I0)();return{handleSearchChange:e=>{i((0,a.SY)(e))},...e}};var k=()=>{let{handleSearchChange:e,username:i}=_();return(0,s.jsxs)(t.Kqy,{direction:"row",spacing:4,mb:6,children:[(0,s.jsx)(C.Z,{search:i,onChange:e,placeholder:"Search by Username"}),(0,s.jsx)(p.ZP,{scopes:[g.Sh.USER_CREATE],children:(0,s.jsx)(t.zxk,{as:v(),href:"".concat(x.e3,"/new"),colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add new user"})})]})},y=n(43124),w=()=>(0,s.jsxs)(y.Z,{title:"User Management",children:[(0,s.jsx)(t.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,s.jsx)(k,{}),(0,s.jsx)(b,{})]})}},function(e){e.O(0,[6104,2888,9774,179],function(){return e(e.s=7873)}),_N_E=e.O()}]);