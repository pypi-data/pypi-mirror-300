(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{59972:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return a(82969)}])},82969:function(e,t,a){"use strict";a.r(t);var i=a(24246),l=a(92222),s=a(59003),o=a(37794),n=a(86677),d=a(27378),r=a(90824),c=a(62257),u=a(29137),x=a(43124),g=a(11032),m=a(37541),f=a(52850),h=a(19906),v=a(52987),j=a(39006),b=a(89955),p=a(5067);let _=(0,l.Cl)(),w=()=>(0,i.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,i.jsx)(o.gCW,{children:(0,i.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,n.useRouter)(),[t]=(0,v.TG)(),a=e.query.datasetId,C=e.query.collectionName,{isLoading:R,data:k}=(0,v.oM)(a),y=(0,d.useMemo)(()=>(null==k?void 0:k.collections)||[],[k]),z=y.find(e=>e.name===C),N=(0,d.useMemo)(()=>(null==z?void 0:z.fields)||[],[z]),[M,S]=(0,d.useState)(),T=(0,d.useCallback)(e=>{let{dataCategory:a,field:i}=e,l=i.data_categories||[],s={...i,data_categories:[...l,a]},o=y.indexOf(z),n=z.fields.indexOf(i);t((0,p._n)(k,s,o,n))},[z,y,k,t]),O=(0,d.useCallback)(e=>{var a;let{dataCategory:i,field:l}=e,s={...l,data_categories:null===(a=l.data_categories)||void 0===a?void 0:a.filter(e=>e!==i)},o=y.indexOf(z),n=z.fields.indexOf(l);t((0,p._n)(k,s,o,n))},[z,y,k,t]),E=(0,d.useCallback)(t=>{e.push({pathname:g.y1,query:{datasetId:a,collectionName:C,subfieldUrn:t.name}})},[a,e,C]),I=(0,d.useMemo)(()=>[_.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,i.jsx)(f.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,i.jsx)(f.Rr,{value:"Field Name",...e}),size:180}),_.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,i.jsx)(f.A4,{value:e.getValue()}):(0,i.jsx)(f.G3,{value:void 0}),header:e=>(0,i.jsx)(f.Rr,{value:"Type",...e}),size:80}),_.accessor(e=>e.description,{id:"description",cell:e=>(0,i.jsx)(f.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,i.jsx)(f.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),_.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let t=e.row.original;return(0,i.jsx)(h.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>T({dataCategory:e,field:t}),onRemoveTaxonomy:e=>O({dataCategory:e,field:t})})},header:e=>(0,i.jsx)(f.Rr,{value:"Data categories",...e}),size:300}),_.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,i.jsx)(o.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,i.jsx)(o.zxk,{variant:"outline",size:"xs",leftIcon:(0,i.jsx)(o.dY8,{}),onClick:()=>{q(a),G(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[T,O]),V=(0,d.useMemo)(()=>M?N.filter(e=>e.name.toLowerCase().includes(M.toLowerCase())):N,[N,M]),Z=(0,s.b7)({getCoreRowModel:(0,l.sC)(),getFilteredRowModel:(0,l.vL)(),getSortedRowModel:(0,l.tj)(),columns:I,data:V,columnResizeMode:"onChange"}),[A,G]=(0,d.useState)(!1),[W,q]=(0,d.useState)();return(0,i.jsxs)(x.Z,{title:"Dataset - ".concat(a),mainProps:{paddingTop:0},children:[(0,i.jsx)(m.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,i.jsx)(j.Z,{breadcrumbs:[{title:"All datasets",icon:(0,i.jsx)(r.V,{boxSize:4}),link:g.$m},{title:a,link:{pathname:g.o5,query:{datasetId:a}},icon:(0,i.jsx)(c.l,{boxSize:5})},{title:C,icon:(0,i.jsx)(u.$,{boxSize:5})}]})}),R?(0,i.jsx)(f.I4,{rowHeight:36,numRows:15}):(0,i.jsxs)(o.xuv,{"data-testid":"fields-table",children:[(0,i.jsx)(f.Q$,{children:(0,i.jsx)(f.HO,{globalFilter:M,setGlobalFilter:S,placeholder:"Search",testid:"fields-search"})}),(0,i.jsx)(f.ZK,{tableInstance:Z,emptyTableNotice:(0,i.jsx)(w,{}),onRowClick:E,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,i.jsx)(b.Z,{isOpen:A,onClose:()=>{G(!1),q(void 0)},field:W,dataset:k,collectionName:C})]})]})}}},function(e){e.O(0,[6451,4554,2866,9278,1995,2850,7096,6711,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);