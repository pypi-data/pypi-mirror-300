(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4065],{70378:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/custom-fields",function(){return t(48394)}])},79711:function(e,i,t){"use strict";t.d(i,{q:function(){return s}});var l=t(24246);let s=(0,t(37794).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,l.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},43124:function(e,i,t){"use strict";t.d(i,{Z:function(){return x}});var l=t(24246),s=t(37794),a=t(88038),o=t.n(a),n=t(86677);t(27378);var r=t(11596),d=t(72247),c=t(11032),u=()=>{let e=(0,n.useRouter)();return(0,l.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,l.jsxs)(s.xuv,{children:[(0,l.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,l.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,l.jsx)(s.zxk,{size:"sm",variant:"outline",onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,l.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},x=e=>{let{children:i,title:t,padded:a=!0,mainProps:c}=e,x=(0,r.hz)(),p=(0,n.useRouter)(),m="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,h=!(x.flags.privacyRequestsConfiguration&&m),{data:v}=(0,d.JE)(void 0,{skip:h}),{data:f}=(0,d.PW)(void 0,{skip:h}),g=x.flags.privacyRequestsConfiguration&&(!v||!f)&&m;return(0,l.jsxs)(s.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,l.jsxs)(o(),{children:[(0,l.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,l.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[g?(0,l.jsx)(u,{}):null,i]})]})}},38615:function(e,i,t){"use strict";t.d(i,{Tg:function(){return o}});var l=t(24246),s=t(44296),a=t(96451);let o=e=>(0,s.C)(a.uu).filter(i=>e.includes(i)).length>0;i.ZP=e=>{let{scopes:i,children:t}=e;return o(i)?(0,l.jsx)(l.Fragment,{children:t}):null}},51425:function(e,i,t){"use strict";var l=t(24246),s=t(37794),a=t(39514);i.Z=e=>{let{title:i,tooltip:t,children:o,...n}=e;return(0,l.jsxs)(s.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...n,children:[(0,l.jsxs)(s.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[i,t?(0,l.jsx)(s.xvT,{as:"span",mx:1,children:(0,l.jsx)(a.Z,{label:t})}):void 0]}),(0,l.jsx)(s.Kqy,{p:6,spacing:6,children:o})]})}},48394:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return X}});var l=t(24246),s=t(43124),a=t(37794),o=t(27378),n=t(92222),r=t(59003),d=t(44296),c=t(60136),u=t(38615),x=t(52850),p=t(16781),m=t(98320),h=t(19686);let v=new Map([["string","Single Select"],["string[]","Multi Select"],["open-text","Open Text"]]),f=new Map([[h.P6.SYSTEM,"system:information"],[h.P6.DATA_USE,"taxonomy:data use"],[h.P6.DATA_CATEGORY,"taxonomy:data category"],[h.P6.DATA_SUBJECT,"taxonomy:data subject"],[h.P6.PRIVACY_DECLARATION,"system:data use"]]);var g=t(96878);let _=e=>{var i;let t=null!==(i=f.get(e.getValue()))&&void 0!==i?i:e.getValue();return(0,l.jsx)(m.G3,{...e,value:t})},C=e=>{let{row:i,getValue:t}=e,s=i.original.allow_list_id?t():"open-text",a=v.get(s)||s;return(0,l.jsx)(m.A4,{value:a})},b=e=>{let{row:i,getValue:t,isDisabled:s}=e,a=!!t(),[o]=(0,g.yM)(),n=async e=>o({...i.original,active:e});return(0,l.jsx)(m.S1,{enabled:a,onToggle:n,title:"Disable custom field",message:"Are you sure you want to disable this custom field?",isDisabled:s,"aria-label":a?"Disable custom field":"Enable custom field"})};var j=t(79711),y=t(77650);let w=e=>{let{customField:i,onEdit:t,onDelete:s,...o}=e,n=(0,a.qY0)();return(0,l.jsxs)(a.xuv,{...o,children:[(0,l.jsx)(a.hU,{"aria-label":"Edit property","data-testid":"edit-property-button",variant:"outline",size:"xs",marginRight:"10px",icon:(0,l.jsx)(a.dY8,{}),onClick:e=>{e.stopPropagation(),t(i,e)}}),(0,l.jsx)(a.hU,{"aria-label":"Delete property","data-testid":"delete-property-button",variant:"outline",size:"xs",marginRight:"10px",icon:(0,l.jsx)(j.q,{}),onClick:e=>{e.stopPropagation(),n.onOpen()}}),(0,l.jsx)(y.Z,{isOpen:n.isOpen,onClose:n.onClose,onConfirm:()=>{s(i),n.onClose()},title:"Delete custom field",message:(0,l.jsx)(a.xvT,{color:"gray.500",children:"Are you sure you want to delete this custom field? This will remove the custom field and all stored values and this action can't be undone."}),continueButtonText:"Confirm",isCentered:!0,icon:(0,l.jsx)(a.aNP,{})})]})};var T=t(49885),E=t(65399),S=t(34090),L=t(59389),R=t(91973),P=t(91591),k=t(51425),A=t(34803),I=t(20133);let z={...R.s,minWidth:"unset"},N=e=>{let{values:i,validationSchema:t,errors:s,dirty:n,isValid:r,isSubmitting:d,isLoading:c,onClose:u,handleDropdownChange:x,isEditing:p}=e,{validateForm:m}=(0,S.u6)();return(0,o.useEffect)(()=>{m()},[t,m]),(0,l.jsxs)(S.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[(0,l.jsx)(a.xuv,{py:3,children:(0,l.jsxs)(k.Z,{title:"Field Information",children:[(0,l.jsx)(R.Z,{displayHelpIcon:!0,isRequired:!0,label:"Name",name:"name",customLabelProps:z}),(0,l.jsx)(R.Z,{displayHelpIcon:!0,label:"Description",name:"description",customLabelProps:z}),(0,l.jsx)(A.AP,{label:"Location",name:"resource_type",options:T.C7,labelProps:z,isDisabled:p})]})}),(0,l.jsx)(a.xuv,{py:3,children:(0,l.jsxs)(k.Z,{title:"Configuration",children:[(0,l.jsx)(A.AP,{label:"Field Type",name:"field_type",options:T.Hn,onChange:async e=>{x(e.value)}}),i.field_type!==T.Uv.OPEN_TEXT?(0,l.jsx)(a.kCb,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:(0,l.jsx)(S.F2,{name:"allow_list.allowed_values",render:e=>{let{allowed_values:t}=i.allow_list;return(0,l.jsxs)(a.kCb,{flexDirection:"column",gap:"6",pl:"6",children:[(0,l.jsx)(a.kCb,{flexDirection:"column",children:t.map((i,s)=>(0,l.jsxs)(a.kCb,{flexGrow:1,gap:"3",mt:s>0?3:void 0,children:[(0,l.jsx)(R.Z,{customLabelProps:{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",minW:"126px",pr:"8px"},displayHelpIcon:!1,isRequired:!0,label:"List item ".concat(s+1),name:"allow_list.allowed_values[".concat(s,"]")}),(0,l.jsx)(a.hU,{"aria-label":"Remove this list value","data-testid":"remove-list-value-btn-".concat(s),icon:(0,l.jsx)(I.l,{}),isDisabled:t.length<=1,onClick:()=>e.remove(s),size:"sm",variant:"ghost"})]},s))}),(0,l.jsxs)(a.kCb,{alignItems:"center",children:[(0,l.jsx)(a.xvT,{color:"gray.600",fontSize:"xs",fontWeight:"500",lineHeight:"16px",pr:"8px",children:"Add a list value"}),(0,l.jsx)(a.hU,{"aria-label":"Add a list value","data-testid":"add-list-value-btn",icon:(0,l.jsx)(P.d,{h:"7px",w:"7px"}),onClick:()=>{e.push("")},size:"xs",variant:"outline"}),0===t.length&&(null==s?void 0:s.allow_list)?(0,l.jsx)(a.xvT,{color:"red.500",pl:"18px",size:"sm",children:s.allow_list.allowed_values}):null]})]})}})}):null]})}),(0,l.jsxs)(a.kCb,{justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(a.zxk,{size:"sm",variant:"outline",mr:3,onClick:u,"data-testid":"cancel-btn",isDisabled:c||d,children:"Cancel"}),(0,l.jsx)(a.zxk,{size:"sm",type:"submit",colorScheme:"primary","data-testid":"save-btn",isLoading:c,isDisabled:!n||!r||d,children:"Save"})]})]})},U={description:"",field_type:T.Uv.OPEN_TEXT,name:"",resource_type:h.P6.SYSTEM,allow_list:{name:"",description:"",allowed_values:[]}},M=L.IX(L.Z_().optional().label("allowed_values")),D=L.IX(L.Z_().required("List item is required")).min(1,"Must add at least one list value").label("allowed_values"),H=L.Ry().shape({name:L.Z_().required("Name is required").trim(),allow_list:L.Ry().shape({allowed_values:M})}),O=L.Ry().shape({name:L.Z_().required("Name is required").trim(),allow_list:L.Ry().shape({allowed_values:D})}),Z=(e,i)=>{var t,l,s;let a;if(!e)return;e.field_type!==h.AL.STRING||e.allow_list_id||(a=T.Uv.OPEN_TEXT),e.field_type===h.AL.STRING&&e.allow_list_id&&(a=T.Uv.SINGLE_SELECT),e.field_type===h.AL.STRING_&&e.allow_list_id&&(a=T.Uv.MULTIPLE_SELECT);let o=i?{name:null!==(t=i.name)&&void 0!==t?t:"",description:null!==(l=i.description)&&void 0!==l?l:"",allowed_values:null!==(s=i.allowed_values)&&void 0!==s?s:[]}:U.allow_list;return{...e,field_type:a||T.Uv.OPEN_TEXT,allow_list:o}},q=e=>{let{isOpen:i,onClose:t,isLoading:s,customField:n}=e,{errorAlert:r,successAlert:d}=(0,E.VY)(),[u]=(0,g.Ld)(),[x]=(0,g.yM)(),[p]=(0,g.Nt)(),{data:m,isLoading:v}=(0,g.vA)(null==n?void 0:n.allow_list_id,{skip:!(null==n?void 0:n.allow_list_id)}),[f,_]=(0,o.useState)(H);if(v||!i)return null;let C=Z(n,m),b=!!C,j=e=>{e===T.Uv.OPEN_TEXT?_(H):_(O)},y=async e=>{if([T.Uv.SINGLE_SELECT,T.Uv.MULTIPLE_SELECT].includes(e.field_type)){var i,l;if(new Set(null===(i=e.allow_list)||void 0===i?void 0:i.allowed_values.map(e=>e.toLowerCase().trim()).map(e=>e)).size<e.allow_list.allowed_values.length){r("List item value must be unique");return}let{allow_list:t}=e;e.allow_list_id&&(t.id=e.allow_list_id),t.name||(t.name=Date.now().toString()+Math.random().toString());let s=await p(t);"error"in s||e.allow_list_id||(e.allow_list_id=null===(l=s.data)||void 0===l?void 0:l.id)}e.field_type===T.Uv.OPEN_TEXT&&(e.allow_list_id=void 0),[T.Uv.SINGLE_SELECT,T.Uv.OPEN_TEXT].includes(e.field_type)&&(e.field_type=h.AL.STRING),e.field_type===T.Uv.MULTIPLE_SELECT&&(e.field_type=h.AL.STRING_);let s={...e};delete s.allow_list;let a=n?await x(s):await u(s);"error"in a?r((0,c.e$)(a.error),"Custom field has failed to save due to the following:"):(t(),d("Custom field successfully saved"))};return(0,l.jsxs)(a.u_l,{id:"custom-field-modal-hello-world",isOpen:i,onClose:t,size:"lg",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(a.ZAr,{}),(0,l.jsxs)(a.hzk,{id:"modal-content",textAlign:"center","data-testid":"custom-field-modal",maxHeight:"80%",overflowY:"auto",children:[(0,l.jsx)(a.xBx,{id:"modal-header",fontWeight:"semibold",lineHeight:5,fontSize:"sm",textAlign:"left",py:"18px",px:6,height:"56px",backgroundColor:"gray.50",borderColor:"gray.200",borderWidth:"0px 0px 1px 1p",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxSizing:"border-box",children:n?"Manage Custom Field":"Add a custom field"}),(0,l.jsx)(a.fef,{px:6,py:0,children:(0,l.jsx)(S.J9,{initialValues:C||U,validationSchema:f,onSubmit:y,enableReinitialize:!0,validateOnChange:!0,children:e=>(0,l.jsx)(N,{isEditing:b,validationSchema:f,isLoading:s,onClose:t,handleDropdownChange:j,...e})})})]})]})},F="Add a custom field",V=()=>(0,l.jsx)(a.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsxs)(a.gCW,{children:[(0,l.jsx)(a.xvT,{fontSize:"md",fontWeight:"600",children:"It looks like it’s your first time here!"}),(0,l.jsxs)(a.xvT,{fontSize:"sm",children:["You haven’t created any custom fields yet.",(0,l.jsx)("br",{}),"To create a custom field, click on the"," ",(0,l.jsxs)("strong",{children:['"',F,'"']})," button"]})]})}),G=(0,n.Cl)(),W=e=>{let{...i}=e,t=(0,a.pmc)(),{isLoading:s}=(0,g.GH)(),m=(0,d.C)(g.fN),[v]=(0,g.UF)(),{isOpen:f,onClose:j,onOpen:y}=(0,a.qY0)(),[T,E]=(0,o.useState)(),[S,L]=(0,o.useState)(),R=(0,u.Tg)([h.Sh.CUSTOM_FIELD_UPDATE]),P=(0,u.Tg)([h.Sh.CUSTOM_FIELD_DELETE]),k=e=>{R&&(E(e),y())},A=async e=>{if(P&&e.id){let i=await v({id:e.id});if((0,c.D4)(i)){t((0,p.Vo)((0,c.e$)(i.error)));return}t((0,p.t5)("Custom field deleted"))}},I=(0,o.useMemo)(()=>[G.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(x.Rr,{value:"Label",...e})}),G.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(x.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(x.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),G.accessor(e=>e.field_type,{id:"field_type",cell:C,header:e=>(0,l.jsx)(x.Rr,{value:"Field Type",...e})}),G.accessor(e=>e.resource_type,{id:"resource_type",cell:_,header:e=>(0,l.jsx)(x.Rr,{value:"Locations",...e})}),R&&G.accessor(e=>e.active,{id:"enable",cell:b,header:e=>(0,l.jsx)(x.Rr,{value:"Enable",...e}),meta:{disableRowClick:!0}}),(R||P)&&G.display({id:"actions",header:"Actions",cell:e=>{let{row:i}=e;return(0,l.jsx)(w,{customField:i.original,onEdit:k,onDelete:A})},meta:{disableRowClick:!0}})].filter(Boolean),[P,R]),z=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getFilteredRowModel:(0,n.vL)(),getSortedRowModel:(0,n.tj)(),onGlobalFilterChange:L,globalFilterFn:"includesString",columns:I,data:m,state:{globalFilter:S},columnResizeMode:"onChange"});return(0,l.jsxs)(a.xuv,{...i,children:[(0,l.jsx)(a.xuv,{maxWidth:600,children:(0,l.jsx)(a.xvT,{mb:10,fontSize:"sm",children:m.length>0?"Custom fields enable you to capture metrics specific to your organization and have those metrics appear in the data map and in reports.":"Custom fields provide organizations with the capability to capture metrics that are unique to their specific needs, allowing them to create customized reports. These fields can be added to either systems or elements within a taxonomy, and once added, they become reportable fields that are visible on the data map."})}),(0,l.jsxs)(a.xuv,{"data-testid":"custom-fields-page",children:[(0,l.jsxs)(x.Q$,{children:[(0,l.jsx)(x.HO,{globalFilter:S,setGlobalFilter:L,placeholder:"Search for a custom field"}),(0,l.jsx)(a.Ugi,{alignItems:"center",spacing:4,children:(0,l.jsx)(()=>(0,l.jsx)(u.ZP,{scopes:[h.Sh.CUSTOM_FIELD_DEFINITION_CREATE],children:(0,l.jsx)(a.zxk,{size:"xs",colorScheme:"primary","data-testid":"add-custom-field-btn",onClick:y,children:F})}),{})})]}),s?(0,l.jsx)(a.xuv,{p:2,borderWidth:1,children:(0,l.jsx)(x.I4,{rowHeight:26,numRows:10})}):(0,l.jsx)(x.ZK,{tableInstance:z,onRowClick:R?k:void 0,emptyTableNotice:(0,l.jsx)(V,{}),enableSorting:!0}),f&&(0,l.jsx)(q,{customField:T,isOpen:f,onClose:()=>{E(void 0),j()},isLoading:!1})]})]})};var X=()=>(0,l.jsx)(s.Z,{title:"Custom fields",children:(0,l.jsxs)(a.xuv,{"data-testid":"custom-fields-management",children:[(0,l.jsx)(a.X6q,{marginBottom:4,fontSize:"2xl",children:"Manage custom fields"}),(0,l.jsx)(W,{})]})})}},function(e){e.O(0,[6451,2850,9885,2888,9774,179],function(){return e(e.s=70378)}),_N_E=e.O()}]);