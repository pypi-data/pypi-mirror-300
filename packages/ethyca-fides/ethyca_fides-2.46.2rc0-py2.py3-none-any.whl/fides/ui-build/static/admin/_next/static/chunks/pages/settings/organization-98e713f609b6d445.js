(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return t(59160)}])},43124:function(e,i,t){"use strict";t.d(i,{Z:function(){return p}});var n=t(24246),r=t(13054),s=t(88038),a=t.n(s),o=t(86677);t(27378);var l=t(11596),d=t(72247),u=t(11032),c=()=>{let e=(0,o.useRouter)();return(0,n.jsx)(r.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(r.xuv,{children:[(0,n.jsxs)(r.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(r.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(r.zxk,{size:"sm",variant:"outline",onClick:()=>{e.push(u.fz)},children:"Configure"})]}),(0,n.jsxs)(r.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:i,title:t,padded:s=!0,mainProps:u}=e,p=(0,l.hz)(),f=(0,o.useRouter)(),x="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(p.flags.privacyRequestsConfiguration&&x),{data:v}=(0,d.JE)(void 0,{skip:m}),{data:g}=(0,d.PW)(void 0,{skip:m}),h=p.flags.privacyRequestsConfiguration&&(!v||!g)&&x;return(0,n.jsxs)(r.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,n.jsxs)(a(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(r.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[h?(0,n.jsx)(c,{}):null,i]})]})}},38615:function(e,i,t){"use strict";t.d(i,{Tg:function(){return a}});var n=t(24246),r=t(44296),s=t(96451);let a=e=>(0,r.C)(s.uu).filter(i=>e.includes(i)).length>0;i.ZP=e=>{let{scopes:i,children:t}=e;return a(i)?(0,n.jsx)(n.Fragment,{children:t}):null}},60136:function(e,i,t){"use strict";t.d(i,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return d},c6:function(){return r},cj:function(){return x},e$:function(){return o},fn:function(){return l},iC:function(){return f},nU:function(){return c},tB:function(){return u}});var n,r,s=t(41164);let a="An unexpected error occurred. Please try again.",o=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var t;let i=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null==i?void 0:i.msg,": ").concat(null==i?void 0:i.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return i};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let c=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:t}=e;return{status:t,message:o(e,i.message)}}return i},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(n=r||(r={})).GVL="gvl",n.AC="gacp",n.COMPASS="compass";let f={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},x=e=>{let i=e.split(".")[0];return"gacp"===i?"gacp":"gvl"===i?"gvl":"compass"}},98198:function(e,i,t){"use strict";var n=t(24246),r=t(13054);i.Z=e=>{let{title:i,children:t,isOpen:s,onClose:a,...o}=e;return(0,n.jsxs)(r.u_l,{isOpen:s,onClose:a,isCentered:!0,scrollBehavior:"inside",size:"xl",...o,children:[(0,n.jsx)(r.ZAr,{}),(0,n.jsxs)(r.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,n.jsx)(r.xBx,{p:0,children:(0,n.jsx)(r.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,n.jsx)(r.X6q,{as:"h3",size:"sm",children:i})})}),(0,n.jsx)(r.fef,{pb:4,overflow:"auto",children:t})]})]})}},16781:function(e,i,t){"use strict";t.d(i,{MA:function(){return o},Vo:function(){return d},t5:function(){return l}});var n=t(24246),r=t(13054);let s=e=>{let{children:i}=e;return(0,n.jsxs)(r.xvT,{"data-testid":"toast-success-msg",children:[(0,n.jsx)("strong",{children:"Success:"})," ",i]})},a=e=>{let{children:i}=e;return(0,n.jsxs)(r.xvT,{"data-testid":"toast-error-msg",children:[(0,n.jsx)("strong",{children:"Error:"})," ",i]})},o={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=e=>{let i=(0,n.jsx)(s,{children:e});return{...o,description:i}},d=e=>{let i=(0,n.jsx)(a,{children:e});return{...o,description:i,status:"error"}}},59160:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return q}});var n=t(24246),r=t(38615),s=t(13054),a=t(11596),o=t(43124),l=t(98198),d=t(34090),u=t(27378),c=t(59389),p=t(34803),f=t(60136),x=t(16781),m=t(91664);let v={identifier:"",name:"",client_id:"",client_secret:""},g=e=>({...e}),h=c.Ry().shape({provider:c.Z_().required().label("Provider"),name:c.Z_().required().label("Name"),client_id:c.Z_().required().label("Client ID"),client_secret:c.Z_().required().label("Client Secret")});var j=e=>{let{openIDProvider:i,onSuccess:t,onClose:r}=e,[a]=(0,m.Qc)(),[o]=(0,m.oP)(),l=(0,u.useMemo)(()=>i?g(i):v,[i]),c=(0,s.pmc)(),j=async(e,i)=>{(e=>{if((0,f.D4)(e)){let i=(0,f.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");c((0,x.Vo)(i))}else c((0,x.t5)("SSO provider configuration saved.")),r(),i.resetForm({}),t&&t(e.data)})(l.id?await o(e):await a(e))},y=[{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],b=()=>(0,n.jsx)(p.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),k=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(p.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(p.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,n.jsx)(d.J9,{initialValues:l,enableReinitialize:!0,onSubmit:j,validationSchema:h,children:e=>{let{dirty:i,isValid:t,values:a}=e;return(0,n.jsx)(d.l0,{"data-testid":"openIDProvider-form",children:(0,n.jsxs)(s.Kqy,{spacing:4,children:[(0,n.jsx)(p.AP,{name:"provider",label:"Provider",options:y,variant:"stacked",isRequired:!0}),(0,n.jsx)(p.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!l.id}),(0,n.jsx)(p.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(p.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(p.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"okta"===a.provider&&b(),"custom"===a.provider&&k(),(0,n.jsxs)(s.xuv,{textAlign:"right",children:[(0,n.jsx)(s.zxk,{type:"submit",variant:"outline",size:"sm","data-testid":"cancel-btn",marginRight:"12px",onClick:r,children:"Cancel"}),(0,n.jsx)(s.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:!i||!t,"data-testid":"save-btn",children:"Save"})]})]})})}})},y=e=>{let{isOpen:i,onClose:t}=e;return(0,n.jsx)(l.Z,{isOpen:i,onClose:t,title:"Add SSO Provider",children:(0,n.jsx)(j,{onClose:t})})},b=e=>{let{isOpen:i,onClose:t,openIDProvider:r}=e;return(0,n.jsx)(l.Z,{isOpen:i,onClose:t,title:"Edit SSO Provider",children:(0,n.jsx)(j,{openIDProvider:r,onClose:t})})},k=e=>{let{openIDProvider:i}=e,{onOpen:t,isOpen:r,onClose:a}=(0,s.qY0)(),{onOpen:o,isOpen:l,onClose:d}=(0,s.qY0)(),u=(0,s.pmc)(),[c]=(0,m.rB)(),p=async()=>{let e=await c(i.identifier);if((0,f.D4)(e)){u((0,x.Vo)((0,f.e$)(e.error))),d();return}u((0,x.t5)("SSO provider deleted successfully")),d()};return(0,n.jsxs)(s.xuv,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,n.jsxs)(s.xuv,{display:"flex",alignItems:"center",children:[(0,n.jsx)(s.Eep,{src:"/images/oauth-login/".concat(i.provider,".svg"),alt:"".concat(i.provider," icon"),width:"40px",height:"40px"}),(0,n.jsxs)(s.xuv,{display:"flex",flexDirection:"column",children:[(0,n.jsx)(s.xvT,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:i.name}),(0,n.jsx)(s.xvT,{fontSize:"medium",marginLeft:"16px",children:i.identifier})]})]}),(0,n.jsxs)(s.xuv,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,n.jsx)(s.zxk,{size:"sm",marginRight:"12px",variant:"outline",onClick:o,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,n.jsx)(s.zxk,{size:"sm",marginRight:"12px",variant:"outline",onClick:t,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,n.jsx)(b,{isOpen:r,onClose:a,openIDProvider:i}),(0,n.jsx)(s.cVQ,{isOpen:l,onClose:d,onConfirm:p,title:"Remove SSO provider",message:(0,n.jsx)(s.xvT,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},C=()=>{let{onOpen:e,isOpen:i,onClose:t}=(0,s.qY0)(),{data:r}=(0,m.qv)();return(0,n.jsxs)(s.xuv,{maxWidth:"600px",marginTop:"40px",children:[(0,n.jsxs)(s.X6q,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",r&&r.length<5&&(0,n.jsx)(s.zxk,{size:"sm",variant:"outline",onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,n.jsx)(s.xvT,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==r?void 0:r.map(e=>(0,n.jsx)(k,{openIDProvider:e},e.identifier)),(0,n.jsx)(y,{isOpen:i,onClose:t})]})},_=t(36701);let z={description:"",fides_key:_.Av,name:""},S=e=>({...e}),R=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),O=c.Ry().shape({description:c.Z_().required().label("Description"),fides_key:c.Z_().required().label("Organization Fides Key"),name:c.Z_().required().label("Name")}),w=e=>{let{organization:i,onSuccess:t}=e,[r,a]=(0,_.$f)(),o=(0,u.useMemo)(()=>i?S(i):z,[i]),l=(0,s.pmc)(),c=async(e,i)=>{let n=R(e);(r=>{if((0,f.D4)(r)){let e=(0,f.e$)(r.error,"An unexpected error occurred while editing the organization. Please try again.");l((0,x.Vo)(e))}else l((0,x.t5)("Organization configuration saved.")),i.resetForm({values:e}),t&&t(n)})(await r(n))},m=!i||a.isLoading;return(0,n.jsx)(d.J9,{initialValues:o,enableReinitialize:!0,onSubmit:c,validationSchema:O,children:e=>{let{dirty:i,isValid:t}=e;return(0,n.jsx)(d.l0,{"data-testid":"organization-form",children:(0,n.jsxs)(s.Kqy,{spacing:4,children:[(0,n.jsx)(p.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,n.jsx)(p.j0,{id:"name",name:"name",label:"Name",disabled:m,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,n.jsx)(p.j0,{id:"description",name:"description",label:"Description",disabled:m,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,n.jsx)(s.xuv,{textAlign:"right",children:(0,n.jsx)(s.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:m||!i||!t,isLoading:m,"data-testid":"save-btn",children:"Save"})})]})})}})};var A=t(19686),q=()=>{let{data:e}=(0,_.GQ)(_.Av),{plus:i,flags:{ssoAuthentication:t}}=(0,a.hz)();return(0,n.jsx)(o.Z,{title:"Organization",children:(0,n.jsxs)(s.xuv,{"data-testid":"organization-management",children:[(0,n.jsx)(s.X6q,{marginBottom:4,fontSize:"2xl",children:"Organization Management"}),(0,n.jsxs)(s.xuv,{maxWidth:"600px",children:[(0,n.jsx)(s.xvT,{marginBottom:10,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,n.jsx)(s.xuv,{background:"gray.50",padding:2,children:(0,n.jsx)(w,{organization:e})}),t&&i&&(0,n.jsx)(r.ZP,{scopes:[A.Sh.OPENID_PROVIDER_CREATE],children:(0,n.jsx)(C,{})})]})]})})}},41164:function(e,i,t){"use strict";t.d(i,{Bw:function(){return a},D4:function(){return r},Dy:function(){return l},XD:function(){return d},cz:function(){return u},hE:function(){return o},oK:function(){return s}});var n=t(76649);let r=e=>"error"in e,s=e=>(0,n.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,n.Ln)({status:"number",data:{}},e),o=e=>(0,n.Ln)({detail:"string"},e),l=e=>(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,n.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,i,t){"use strict";t.d(i,{Ln:function(){return n},uX:function(){return a}});let n=(e,i)=>s(e,i),r=Symbol("SOME"),s=(e,i)=>"string"==typeof e?e===typeof i:Array.isArray(e)?r in e?e.some(e=>s(e,i)):!!Array.isArray(i)&&(0===e.length||i.every(i=>e.some(e=>s(e,i)))):"object"==typeof i&&null!==i&&Object.entries(e).every(([e,t])=>s(t,i[e])),a=e=>i=>n(e,i);class o{static narrow(e){return new o(i=>n(e,i))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let i=this.NF,t=e instanceof o?e.NF:e instanceof Function?e:i=>n(e,i);return new o(e=>i(e)&&t(e))}}new o(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);