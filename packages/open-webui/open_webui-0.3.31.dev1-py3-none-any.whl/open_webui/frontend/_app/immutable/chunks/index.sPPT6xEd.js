import{s as le,y as ae,z as se,a as M,d as u,f,i as B,g,n as fe,A as Le,E as Ue,j as G,p as Ne,G as Oe,r as De,k as L,o as U,v as Ve,w as ze,x as He,e as E,t as O,l as ye,c as I,B as ee,b as D,u as Z,h as V,F as Pe,q as Ge}from"./scheduler.Dyt_jldW.js";import{S as ne,i as re,f as Re,b as Y,d as x,m as F,t as H,a as R,e as K,g as We,c as qe}from"./index.g9C97g6-.js";import{T as Je}from"./updater.Bv58epJr.js";import{M as Ze,a as Ye,b as xe}from"./menu-trigger.F67SP9zA.js";import{g as Te}from"./entry.BvGjoYWM.js";import{j as Fe,o as Ke,U as Qe,q as Xe,s as ce,r as Ce,v as he,n as pe,w as me,x as et,m as tt,d as at,c as te}from"./index.CXeT4Swk.js";import{f as st}from"./index.DQ1nQfFj.js";import{b as lt,c as nt,u as Se,d as Ee,e as ue,f as rt,h as ot,i as ge,s as it,j as ct}from"./index.CEkIalI3.js";import{T as ut}from"./AdvancedParams.B3UczTfd.js";import{t as Ie}from"./Toaster.svelte_svelte_type_style_lang.Ch2gtda1.js";import{j as ft}from"./index.0vDQ49T4.js";import{M as dt}from"./Modal.BzaZoDzz.js";function ht(l){let e,a;return{c(){e=ae("svg"),a=ae("path"),this.h()},l(t){e=se(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=M(e);a=se(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),M(a).forEach(u),s.forEach(u),this.h()},h(){f(a,"stroke-linecap","round"),f(a,"stroke-linejoin","round"),f(a,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",l[1]),f(e,"stroke","currentColor"),f(e,"class",l[0])},m(t,s){B(t,e,s),g(e,a)},p(t,[s]){s&2&&f(e,"stroke-width",t[1]),s&1&&f(e,"class",t[0])},i:fe,o:fe,d(t){t&&u(e)}}}function pt(l,e,a){let{className:t="size-3.5"}=e,{strokeWidth:s="2.5"}=e;return l.$$set=n=>{"className"in n&&a(0,t=n.className),"strokeWidth"in n&&a(1,s=n.strokeWidth)},[t,s]}class mt extends ne{constructor(e){super(),re(this,e,pt,ht,le,{className:0,strokeWidth:1})}}const gt=l=>({}),Me=l=>({});function _t(l){let e;const a=l[9].default,t=De(a,l,l[18],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&262144)&&Ve(t,a,s,s[18],e?He(a,s[18],n,null):ze(s[18]),null)},i(s){e||(H(t,s),e=!0)},o(s){R(t,s),e=!1},d(s){t&&t.d(s)}}}function Be(l){let e,a,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"></path></svg>',s,n,r=l[4].t("Playground")+"",o,c,m,w,k='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',p,d,_=l[4].t("Admin Panel")+"",y,C,b;return{c(){e=E("button"),a=E("div"),a.innerHTML=t,s=L(),n=E("div"),o=O(r),c=L(),m=E("button"),w=E("div"),w.innerHTML=k,p=L(),d=E("div"),y=O(_),this.h()},l(j){e=I(j,"BUTTON",{class:!0});var h=M(e);a=I(h,"DIV",{class:!0,"data-svelte-h":!0}),ee(a)!=="svelte-4ehrk0"&&(a.innerHTML=t),s=U(h),n=I(h,"DIV",{class:!0});var S=M(n);o=D(S,r),S.forEach(u),h.forEach(u),c=U(j),m=I(j,"BUTTON",{class:!0});var A=M(m);w=I(A,"DIV",{class:!0,"data-svelte-h":!0}),ee(w)!=="svelte-1vodyax"&&(w.innerHTML=k),p=U(A),d=I(A,"DIV",{class:!0});var i=M(d);y=D(i,_),i.forEach(u),A.forEach(u),this.h()},h(){f(a,"class","self-center mr-3"),f(n,"class","self-center font-medium"),f(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),f(w,"class","self-center mr-3"),f(d,"class","self-center font-medium"),f(m,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(j,h){B(j,e,h),g(e,a),g(e,s),g(e,n),g(n,o),B(j,c,h),B(j,m,h),g(m,w),g(m,p),g(m,d),g(d,y),C||(b=[Z(e,"click",l[12]),Z(m,"click",l[13])],C=!0)},p(j,h){h&16&&r!==(r=j[4].t("Playground")+"")&&V(o,r),h&16&&_!==(_=j[4].t("Admin Panel")+"")&&V(y,_)},d(j){j&&(u(e),u(c),u(m)),C=!1,Pe(b)}}}function je(l){let e,a,t,s;return t=new Je({props:{content:l[6]&&l[6].length>0?`${l[4].t("Running")}: ${l[6].join(", ")} ✨`:"",$$slots:{default:[wt]},$$scope:{ctx:l}}}),{c(){e=E("hr"),a=L(),Y(t.$$.fragment),this.h()},l(n){e=I(n,"HR",{class:!0}),a=U(n),x(t.$$.fragment,n),this.h()},h(){f(e,"class","dark:border-gray-800 my-1.5 p-0")},m(n,r){B(n,e,r),B(n,a,r),F(t,n,r),s=!0},p(n,r){const o={};r&80&&(o.content=n[6]&&n[6].length>0?`${n[4].t("Running")}: ${n[6].join(", ")} ✨`:""),r&262192&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){s||(H(t.$$.fragment,n),s=!0)},o(n){R(t.$$.fragment,n),s=!1},d(n){n&&(u(e),u(a)),K(t,n)}}}function wt(l){let e,a,t='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,n,r,o=l[4].t("Active Users")+"",c,m,w,k,p;return{c(){e=E("div"),a=E("div"),a.innerHTML=t,s=L(),n=E("div"),r=E("span"),c=O(o),m=O(":"),w=L(),k=E("span"),p=O(l[5]),this.h()},l(d){e=I(d,"DIV",{class:!0});var _=M(e);a=I(_,"DIV",{class:!0,"data-svelte-h":!0}),ee(a)!=="svelte-dl2p8d"&&(a.innerHTML=t),s=U(_),n=I(_,"DIV",{class:!0});var y=M(n);r=I(y,"SPAN",{class:!0});var C=M(r);c=D(C,o),m=D(C,":"),C.forEach(u),w=U(y),k=I(y,"SPAN",{class:!0});var b=M(k);p=D(b,l[5]),b.forEach(u),y.forEach(u),_.forEach(u),this.h()},h(){f(a,"class","flex items-center"),f(r,"class","font-medium"),f(k,"class","font-semibold"),f(n,"class",""),f(e,"class","flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center")},m(d,_){B(d,e,_),g(e,a),g(e,s),g(e,n),g(n,r),g(r,c),g(r,m),g(n,w),g(n,k),g(k,p)},p(d,_){_&16&&o!==(o=d[4].t("Active Users")+"")&&V(c,o),_&32&&V(p,d[5])},d(d){d&&u(e)}}}function vt(l){let e,a,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',s,n,r=l[4].t("Settings")+"",o,c,m,w,k,p,d,_=l[4].t("Archived Chats")+"",y,C,b,j,h,S,A,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',T,P,W=l[4].t("Sign Out")+"",Q,J,q,X,de,_e;k=new mt({props:{className:"size-5",strokeWidth:"1.5"}});let z=l[1]==="admin"&&Be(l),N=l[5]&&je(l);return{c(){e=E("button"),a=E("div"),a.innerHTML=t,s=L(),n=E("div"),o=O(r),c=L(),m=E("button"),w=E("div"),Y(k.$$.fragment),p=L(),d=E("div"),y=O(_),C=L(),z&&z.c(),b=L(),j=E("hr"),h=L(),S=E("button"),A=E("div"),A.innerHTML=i,T=L(),P=E("div"),Q=O(W),J=L(),N&&N.c(),q=ye(),this.h()},l(v){e=I(v,"BUTTON",{class:!0});var $=M(e);a=I($,"DIV",{class:!0,"data-svelte-h":!0}),ee(a)!=="svelte-1ew1v3e"&&(a.innerHTML=t),s=U($),n=I($,"DIV",{class:!0});var we=M(n);o=D(we,r),we.forEach(u),$.forEach(u),c=U(v),m=I(v,"BUTTON",{class:!0});var oe=M(m);w=I(oe,"DIV",{class:!0});var ve=M(w);x(k.$$.fragment,ve),ve.forEach(u),p=U(oe),d=I(oe,"DIV",{class:!0});var be=M(d);y=D(be,_),be.forEach(u),oe.forEach(u),C=U(v),z&&z.l(v),b=U(v),j=I(v,"HR",{class:!0}),h=U(v),S=I(v,"BUTTON",{class:!0});var ie=M(S);A=I(ie,"DIV",{class:!0,"data-svelte-h":!0}),ee(A)!=="svelte-1svlfdm"&&(A.innerHTML=i),T=U(ie),P=I(ie,"DIV",{class:!0});var ke=M(P);Q=D(ke,W),ke.forEach(u),ie.forEach(u),J=U(v),N&&N.l(v),q=ye(),this.h()},h(){f(a,"class","self-center mr-3"),f(n,"class","self-center font-medium"),f(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),f(w,"class","self-center mr-3"),f(d,"class","self-center font-medium"),f(m,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),f(j,"class","dark:border-gray-800 my-1.5 p-0"),f(A,"class","self-center mr-3"),f(P,"class","self-center font-medium"),f(S,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(v,$){B(v,e,$),g(e,a),g(e,s),g(e,n),g(n,o),B(v,c,$),B(v,m,$),g(m,w),F(k,w,null),g(m,p),g(m,d),g(d,y),B(v,C,$),z&&z.m(v,$),B(v,b,$),B(v,j,$),B(v,h,$),B(v,S,$),g(S,A),g(S,T),g(S,P),g(P,Q),B(v,J,$),N&&N.m(v,$),B(v,q,$),X=!0,de||(_e=[Z(e,"click",l[10]),Z(m,"click",l[11]),Z(S,"click",l[14])],de=!0)},p(v,$){(!X||$&16)&&r!==(r=v[4].t("Settings")+"")&&V(o,r),(!X||$&16)&&_!==(_=v[4].t("Archived Chats")+"")&&V(y,_),v[1]==="admin"?z?z.p(v,$):(z=Be(v),z.c(),z.m(b.parentNode,b)):z&&(z.d(1),z=null),(!X||$&16)&&W!==(W=v[4].t("Sign Out")+"")&&V(Q,W),v[5]?N?(N.p(v,$),$&32&&H(N,1)):(N=je(v),N.c(),H(N,1),N.m(q.parentNode,q)):N&&(We(),R(N,1,1,()=>{N=null}),qe())},i(v){X||(H(k.$$.fragment,v),H(N),X=!0)},o(v){R(k.$$.fragment,v),R(N),X=!1},d(v){v&&(u(e),u(c),u(m),u(C),u(b),u(j),u(h),u(S),u(J),u(q)),K(k),z&&z.d(v),N&&N.d(v),de=!1,Pe(_e)}}}function bt(l){let e,a;return e=new xe({props:{class:"w-full "+l[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow font-primary",sideOffset:8,side:"bottom",align:"start",transition:l[15],$$slots:{default:[vt]},$$scope:{ctx:l}}}),{c(){Y(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){F(e,t,s),a=!0},p(t,s){const n={};s&4&&(n.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow font-primary"),s&262267&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){a||(H(e.$$.fragment,t),a=!0)},o(t){R(e.$$.fragment,t),a=!1},d(t){K(e,t)}}}function kt(l){let e,a,t;e=new Ye({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}});const s=l[9].content,n=De(s,l,l[18],Me),r=n||bt(l);return{c(){Y(e.$$.fragment),a=L(),r&&r.c()},l(o){x(e.$$.fragment,o),a=U(o),r&&r.l(o)},m(o,c){F(e,o,c),B(o,a,c),r&&r.m(o,c),t=!0},p(o,c){const m={};c&262144&&(m.$$scope={dirty:c,ctx:o}),e.$set(m),n?n.p&&(!t||c&262144)&&Ve(n,s,o,o[18],t?He(s,o[18],c,gt):ze(o[18]),Me):r&&r.p&&(!t||c&127)&&r.p(o,t?c:-1)},i(o){t||(H(e.$$.fragment,o),H(r,o),t=!0)},o(o){R(e.$$.fragment,o),R(r,o),t=!1},d(o){o&&u(a),K(e,o),r&&r.d(o)}}}function yt(l){let e,a,t;function s(r){l[17](r)}let n={onOpenChange:l[16],$$slots:{default:[kt]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.open=l[0]),e=new Ze({props:n}),Le.push(()=>Re(e,"open",s)),{c(){Y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,o){F(e,r,o),t=!0},p(r,[o]){const c={};o&262271&&(c.$$scope={dirty:o,ctx:r}),!a&&o&1&&(a=!0,c.open=r[0],Ue(()=>a=!1)),e.$set(c)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Tt(l,e,a){let t,s,n,r;G(l,Fe,i=>a(3,t=i)),G(l,Ke,i=>a(5,n=i)),G(l,Qe,i=>a(6,r=i));let{$$slots:o={},$$scope:c}=e;const m=Ne("i18n");G(l,m,i=>a(4,s=i));let{show:w=!1}=e,{role:k=""}=e,{className:p="max-w-[240px]"}=e;const d=Oe(),_=async()=>{await Xe.set(!0),a(0,w=!1),t&&ce.set(!1)},y=()=>{d("show","archived-chat"),a(0,w=!1),t&&ce.set(!1)},C=()=>{Te("/playground"),a(0,w=!1),t&&ce.set(!1)},b=()=>{Te("/admin"),a(0,w=!1),t&&ce.set(!1)},j=()=>{localStorage.removeItem("token"),location.href="/auth",a(0,w=!1)},h=i=>st(i,{duration:100}),S=i=>{d("change",i)};function A(i){w=i,a(0,w)}return l.$$set=i=>{"show"in i&&a(0,w=i.show),"role"in i&&a(1,k=i.role),"className"in i&&a(2,p=i.className),"$$scope"in i&&a(18,c=i.$$scope)},[w,k,p,t,s,n,r,m,d,o,_,y,C,b,j,h,S,A,c]}class Yt extends ne{constructor(e){super(),re(this,e,Tt,yt,le,{show:0,role:1,className:2})}}function Ct(l){let e,a;return e=new ut({props:{tags:l[0],deleteTag:l[2],addTag:l[1]}}),{c(){Y(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){F(e,t,s),a=!0},p(t,[s]){const n={};s&1&&(n.tags=t[0]),e.$set(n)},i(t){a||(H(e.$$.fragment,t),a=!0)},o(t){R(e.$$.fragment,t),a=!1},d(t){K(e,t)}}}function St(l,e,a){let t,s,n;G(l,Ce,p=>a(4,t=p)),G(l,he,p=>a(5,s=p)),G(l,pe,p=>a(6,n=p));const r=Oe();let{chatId:o=""}=e,c=[];const m=async()=>(await lt(localStorage.token,o).catch(async p=>[])).filter(p=>p.name!=="pinned"),w=async p=>{await nt(localStorage.token,o,p),a(0,c=await m()),await Se(localStorage.token,o,{tags:c}),pe.set(await Ee(localStorage.token)),await me.set(await ue(localStorage.token,"pinned"))},k=async p=>{await rt(localStorage.token,o,p),a(0,c=await m()),await Se(localStorage.token,o,{tags:c}),await pe.set(await Ee(localStorage.token)),n.map(d=>d.name).includes(p)?(p==="pinned"?await me.set(await ue(localStorage.token,"pinned")):await he.set(await ue(localStorage.token,p)),s.find(d=>d.id===o)&&r("close")):(Ce.set(1),await he.set(await ot(localStorage.token,t)),await me.set(await ue(localStorage.token,"pinned")),await et.set(!0))};return Ge(async()=>{o&&a(0,c=await m())}),l.$$set=p=>{"chatId"in p&&a(3,o=p.chatId)},[c,w,k,o]}class xt extends ne{constructor(e){super(),re(this,e,St,Ct,le,{chatId:3})}}function Et(l){let e,a,t;return{c(){e=ae("svg"),a=ae("path"),t=ae("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=M(e);a=se(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(a).forEach(u),t=se(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(t).forEach(u),n.forEach(u),this.h()},h(){f(a,"fill-rule","evenodd"),f(a,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),f(a,"clip-rule","evenodd"),f(t,"fill-rule","evenodd"),f(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),f(t,"clip-rule","evenodd"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 16 16"),f(e,"fill","currentColor"),f(e,"class",l[0])},m(s,n){B(s,e,n),g(e,a),g(e,t)},p(s,[n]){n&1&&f(e,"class",s[0])},i:fe,o:fe,d(s){s&&u(e)}}}function It(l,e,a){let{className:t="w-4 h-4"}=e;return l.$$set=s=>{"className"in s&&a(0,t=s.className)},[t]}class Mt extends ne{constructor(e){super(),re(this,e,It,Et,le,{className:0})}}function Ae(l){var A;let e,a,t,s,n,r,o,c,m,w,k,p,d;function _(i,T){return i[2].share_id?jt:Bt}let y=_(l),C=y(l),b=((A=l[4])==null?void 0:A.features.enable_community_sharing)&&$e(l);m=new Mt({});function j(i,T){return i[2].share_id?$t:At}let h=j(l),S=h(l);return{c(){e=E("div"),a=E("div"),C.c(),t=L(),s=E("div"),n=E("div"),r=E("div"),b&&b.c(),o=L(),c=E("button"),Y(m.$$.fragment),w=L(),S.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var T=M(e);a=I(T,"DIV",{class:!0});var P=M(a);C.l(P),P.forEach(u),t=U(T),s=I(T,"DIV",{class:!0});var W=M(s);n=I(W,"DIV",{class:!0});var Q=M(n);r=I(Q,"DIV",{class:!0});var J=M(r);b&&b.l(J),o=U(J),c=I(J,"BUTTON",{class:!0,type:!0,id:!0});var q=M(c);x(m.$$.fragment,q),w=U(q),S.l(q),q.forEach(u),J.forEach(u),Q.forEach(u),W.forEach(u),T.forEach(u),this.h()},h(){f(a,"class","text-sm dark:text-gray-300 mb-1"),f(c,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),f(c,"type","button"),f(c,"id","copy-and-share-chat-button"),f(r,"class","flex gap-1"),f(n,"class","flex flex-col items-end space-x-1 mt-1.5"),f(s,"class","flex justify-end"),f(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(i,T){B(i,e,T),g(e,a),C.m(a,null),g(e,t),g(e,s),g(s,n),g(n,r),b&&b.m(r,null),g(r,o),g(r,c),F(m,c,null),g(c,w),S.m(c,null),k=!0,p||(d=Z(c,"click",l[11]),p=!0)},p(i,T){var P;y===(y=_(i))&&C?C.p(i,T):(C.d(1),C=y(i),C&&(C.c(),C.m(a,null))),(P=i[4])!=null&&P.features.enable_community_sharing?b?b.p(i,T):(b=$e(i),b.c(),b.m(r,o)):b&&(b.d(1),b=null),h===(h=j(i))&&S?S.p(i,T):(S.d(1),S=h(i),S&&(S.c(),S.m(c,null)))},i(i){k||(H(m.$$.fragment,i),k=!0)},o(i){R(m.$$.fragment,i),k=!1},d(i){i&&u(e),C.d(),b&&b.d(),K(m),S.d(),p=!1,d()}}}function Bt(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){B(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&V(a,e)},d(t){t&&u(a)}}}function jt(l){let e,a=l[3].t("You have shared this chat")+"",t,s,n,r=l[3].t("before")+"",o,c,m,w,k=l[3].t("Click here to")+"",p,d,_,y=l[3].t("delete this link")+"",C,b,j=l[3].t("and create a new shared link.")+"",h,S,A;return{c(){e=E("a"),t=O(a),s=L(),n=E("span"),o=O(r),c=O("."),w=L(),p=O(k),d=L(),_=E("button"),C=O(y),b=L(),h=O(j),this.h()},l(i){e=I(i,"A",{href:!0,target:!0});var T=M(e);t=D(T,a),s=U(T),n=I(T,"SPAN",{class:!0});var P=M(n);o=D(P,r),P.forEach(u),c=D(T,"."),T.forEach(u),w=U(i),p=D(i,k),d=U(i),_=I(i,"BUTTON",{class:!0});var W=M(_);C=D(W,y),W.forEach(u),b=U(i),h=D(i,j),this.h()},h(){f(n,"class","underline"),f(e,"href",m="/s/"+l[2].share_id),f(e,"target","_blank"),f(_,"class","underline")},m(i,T){B(i,e,T),g(e,t),g(e,s),g(e,n),g(n,o),g(e,c),B(i,w,T),B(i,p,T),B(i,d,T),B(i,_,T),g(_,C),B(i,b,T),B(i,h,T),S||(A=Z(_,"click",l[9]),S=!0)},p(i,T){T&8&&a!==(a=i[3].t("You have shared this chat")+"")&&V(t,a),T&8&&r!==(r=i[3].t("before")+"")&&V(o,r),T&4&&m!==(m="/s/"+i[2].share_id)&&f(e,"href",m),T&8&&k!==(k=i[3].t("Click here to")+"")&&V(p,k),T&8&&y!==(y=i[3].t("delete this link")+"")&&V(C,y),T&8&&j!==(j=i[3].t("and create a new shared link.")+"")&&V(h,j)},d(i){i&&(u(e),u(w),u(p),u(d),u(_),u(b),u(h)),S=!1,A()}}}function $e(l){let e,a=l[3].t("Share to OpenWebUI Community")+"",t,s,n;return{c(){e=E("button"),t=O(a),this.h()},l(r){e=I(r,"BUTTON",{class:!0,type:!0});var o=M(e);t=D(o,a),o.forEach(u),this.h()},h(){f(e,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),f(e,"type","button")},m(r,o){B(r,e,o),g(e,t),s||(n=Z(e,"click",l[10]),s=!0)},p(r,o){o&8&&a!==(a=r[3].t("Share to OpenWebUI Community")+"")&&V(t,a)},d(r){r&&u(e),s=!1,n()}}}function At(l){let e=l[3].t("Copy Link")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){B(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Copy Link")+"")&&V(a,e)},d(t){t&&u(a)}}}function $t(l){let e=l[3].t("Update and Copy Link")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){B(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&V(a,e)},d(t){t&&u(a)}}}function Lt(l){let e,a,t,s=l[3].t("Share Chat")+"",n,r,o,c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',m,w,k,p,d=l[2]&&Ae(l);return{c(){e=E("div"),a=E("div"),t=E("div"),n=O(s),r=L(),o=E("button"),o.innerHTML=c,m=L(),d&&d.c(),this.h()},l(_){e=I(_,"DIV",{});var y=M(e);a=I(y,"DIV",{class:!0});var C=M(a);t=I(C,"DIV",{class:!0});var b=M(t);n=D(b,s),b.forEach(u),r=U(C),o=I(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-745w2y"&&(o.innerHTML=c),C.forEach(u),m=U(y),d&&d.l(y),y.forEach(u),this.h()},h(){f(t,"class","text-lg font-medium self-center"),f(o,"class","self-center"),f(a,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(_,y){B(_,e,y),g(e,a),g(a,t),g(t,n),g(a,r),g(a,o),g(e,m),d&&d.m(e,null),w=!0,k||(p=Z(o,"click",l[8]),k=!0)},p(_,y){(!w||y&8)&&s!==(s=_[3].t("Share Chat")+"")&&V(n,s),_[2]?d?(d.p(_,y),y&4&&H(d,1)):(d=Ae(_),d.c(),H(d,1),d.m(e,null)):d&&(We(),R(d,1,1,()=>{d=null}),qe())},i(_){w||(H(d),w=!0)},o(_){R(d),w=!1},d(_){_&&u(e),d&&d.d(),k=!1,p()}}}function Ut(l){let e,a,t;function s(r){l[12](r)}let n={size:"sm",$$slots:{default:[Lt]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.show=l[0]),e=new dt({props:n}),Le.push(()=>Re(e,"show",s)),{c(){Y(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,o){F(e,r,o),t=!0},p(r,[o]){const c={};o&65567&&(c.$$scope={dirty:o,ctx:r}),!a&&o&1&&(a=!0,c.show=r[0],Ue(()=>a=!1)),e.$set(c)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Nt(l,e,a){let t,s,n;G(l,tt,h=>a(14,t=h)),G(l,at,h=>a(4,n=h));let{chatId:r}=e,o=null,c=null;const m=Ne("i18n");G(l,m,h=>a(3,s=h));const w=async()=>{const h=await it(localStorage.token,r);return c=`${window.location.origin}/s/${h.id}`,console.log(c),a(2,o=await ge(localStorage.token,r)),c},k=async()=>{const h=o.chat;console.log("share",h),Ie.success(s.t("Redirecting you to OpenWebUI Community"));const S="https://openwebui.com",A=await window.open(`${S}/chats/upload`,"_blank");window.addEventListener("message",i=>{i.origin===S&&i.data==="loaded"&&A.postMessage(JSON.stringify({chat:h,models:t.filter(T=>h.models.includes(T.id))}),"*")},!1)};let{show:p=!1}=e;const d=h=>o?h?o.id!==h.id||o.share_id!==h.share_id:!1:!0,_=()=>{a(0,p=!1)},y=async()=>{await ct(localStorage.token,r)&&a(2,o=await ge(localStorage.token,r))},C=()=>{k(),a(0,p=!1)},b=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const S=async()=>{const A=await w();return new Blob([A],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":S()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(A=>(console.error("Async: Could not copy text: ",A),!1))}else ft(await w());Ie.success(s.t("Copied shared chat URL to clipboard!")),a(0,p=!1)};function j(h){p=h,a(0,p)}return l.$$set=h=>{"chatId"in h&&a(1,r=h.chatId),"show"in h&&a(0,p=h.show)},l.$$.update=()=>{l.$$.dirty&7&&p&&(async()=>{if(r){const h=await ge(localStorage.token,r);d(h)&&a(2,o=h)}else a(2,o=null),console.log(o)})()},[p,r,o,s,n,m,w,k,_,y,C,b,j]}class Ft extends ne{constructor(e){super(),re(this,e,Nt,Ut,le,{chatId:1,show:0})}}const Kt=async l=>{let e=null;const a=await fetch(`${te}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return a},Qt=async(l,e)=>{let a=null;const t=await fetch(`${te}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},Xt=async(l,e,a)=>{let t=null;const s=await fetch(`${te}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:a})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(t=n.detail,console.log(n),null));if(t)throw t;return s},ea=async(l,e)=>{let a=null;const t=await fetch(`${te}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},ta=async(l,e)=>{let a=null;const t=await fetch(`${te}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).then(s=>s).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},aa=async l=>{let e=null;const a=await fetch(`${te}/memories/delete/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return a};export{mt as A,Ft as S,xt as T,Yt as U,Qt as a,aa as b,ta as d,Kt as g,ea as q,Xt as u};
//# sourceMappingURL=index.sPPT6xEd.js.map
