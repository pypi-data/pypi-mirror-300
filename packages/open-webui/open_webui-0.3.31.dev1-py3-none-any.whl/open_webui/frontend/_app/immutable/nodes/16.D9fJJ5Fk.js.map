{"version":3,"file":"16.D9fJJ5Fk.js","sources":["../../../../../../src/lib/components/common/Badge.svelte","../../../../../../src/lib/components/workspace/Knowledge/Collection/Files.svelte","../../../../../../src/lib/components/workspace/Knowledge/Collection/AddTextContentModal.svelte","../../../../../../src/lib/components/icons/BarsArrowUp.svelte","../../../../../../src/lib/components/icons/FolderOpen.svelte","../../../../../../src/lib/components/icons/ArrowPath.svelte","../../../../../../src/lib/components/workspace/Knowledge/Collection/AddContentMenu.svelte","../../../../../../src/lib/components/workspace/Knowledge/Collection.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let type = 'info';\n\texport let content = '';\n\n\tconst classNames: Record<string, string> = {\n\t\tinfo: 'bg-blue-500/20 text-blue-700 dark:text-blue-200 ',\n\t\tsuccess: 'bg-green-500/20 text-green-700 dark:text-green-200',\n\t\twarning: 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-200',\n\t\terror: 'bg-red-500/20 text-red-700 dark:text-red-200'\n\t};\n</script>\n\n<div\n\tclass=\" text-xs font-bold {classNames[type] ??\n\t\tclassNames['info']}  w-fit px-2 rounded uppercase line-clamp-1 mr-0.5\"\n>\n\t{content}\n</div>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\n\texport let selectedFileId = null;\n\texport let files = [];\n</script>\n\n<div class=\" max-h-full flex flex-col w-full\">\n\t{#each files as file}\n\t\t<div class=\"mt-2 px-2\">\n\t\t\t<FileItem\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tcolorClassName=\"{selectedFileId === file.id\n\t\t\t\t\t? ' bg-gray-50 dark:bg-gray-850'\n\t\t\t\t\t: 'bg-transparent'} hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t{file}\n\t\t\t\tname={file?.name ?? file?.meta?.name}\n\t\t\t\ttype=\"file\"\n\t\t\t\tsize={file?.size ?? file?.meta?.size ?? ''}\n\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\tdismissible\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('click', file.id);\n\t\t\t\t}}\n\t\t\t\ton:dismiss={() => {\n\t\t\t\t\tdispatch('delete', file.id);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t{/each}\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { onMount, getContext, createEventDispatcher } from 'svelte';\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\texport let show = false;\n\n\tlet name = '';\n\tlet content = '';\n</script>\n\n<Modal size=\"md\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Add Content')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tif (name.trim() === '' || content.trim() === '') {\n\t\t\t\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\t\t\t\tname = '';\n\t\t\t\t\t\t\tcontent = '';\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdispatch('submit', {\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t});\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\tname = '';\n\t\t\t\t\t\tcontent = '';\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"mb-3 w-full\">\n\t\t\t\t\t\t<div class=\"w-full flex flex-col gap-2.5\">\n\t\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t\t<div class=\" text-sm mb-2\">Title</div>\n\n\t\t\t\t\t\t\t\t<div class=\"w-full mt-1\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm bg-white dark:text-gray-300 dark:bg-gray-850 outline-none\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tbind:value={name}\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Name your content`}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm mb-2\">Content</div>\n\n\t\t\t\t\t\t\t\t<div class=\" w-full mt-1\">\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full resize-none rounded-lg py-2 px-4 text-sm bg-whites dark:text-gray-300 dark:bg-gray-850 outline-none\"\n\t\t\t\t\t\t\t\t\t\trows=\"10\"\n\t\t\t\t\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\t\t\t\t\tplaceholder={`Write your content here`}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-end text-sm font-medium\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Add Content')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport ArrowUpCircle from '$lib/components/icons/ArrowUpCircle.svelte';\n\timport BarsArrowUp from '$lib/components/icons/BarsArrowUp.svelte';\n\timport FolderOpen from '$lib/components/icons/FolderOpen.svelte';\n\timport ArrowPath from '$lib/components/icons/ArrowPath.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<Tooltip content={$i18n.t('Add Content')}>\n\t\t<button\n\t\t\tclass=\" px-2 py-2 rounded-xl border border-gray-50 dark:border-gray-600 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1\"\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tshow = true;\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</button>\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow\"\n\t\t\tsideOffset={4}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"end\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'files' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ArrowUpCircle strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload files')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'directory' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FolderOpen strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload directory')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\n\t\t\t\t\t'This option will delete all existing files in the collection and replace them with newly uploaded files.'\n\t\t\t\t)}\n\t\t\t\tclassName=\"w-full\"\n\t\t\t>\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tdispatch('sync', { type: 'directory' });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ArrowPath strokeWidth=\"2\" />\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Sync directory')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t</Tooltip>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('upload', { type: 'text' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<BarsArrowUp strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add text content')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport { toast } from 'svelte-sonner';\n\n\timport { onMount, getContext, onDestroy, tick } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\timport { mobile, showSidebar, knowledge as _knowledge } from '$lib/stores';\n\n\timport { updateFileDataContentById, uploadFile } from '$lib/apis/files';\n\timport {\n\t\taddFileToKnowledgeById,\n\t\tgetKnowledgeById,\n\t\tgetKnowledgeItems,\n\t\tremoveFileFromKnowledgeById,\n\t\tresetKnowledgeById,\n\t\tupdateFileFromKnowledgeById,\n\t\tupdateKnowledgeById\n\t} from '$lib/apis/knowledge';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Badge from '$lib/components/common/Badge.svelte';\n\timport Files from './Collection/Files.svelte';\n\timport AddFilesPlaceholder from '$lib/components/AddFilesPlaceholder.svelte';\n\timport AddContentModal from './Collection/AddTextContentModal.svelte';\n\timport { transcribeAudio } from '$lib/apis/audio';\n\timport { blobToFile } from '$lib/utils';\n\timport { processFile } from '$lib/apis/retrieval';\n\timport AddContentMenu from './Collection/AddContentMenu.svelte';\n\timport AddTextContentModal from './Collection/AddTextContentModal.svelte';\n\n\timport SyncConfirmDialog from '../../common/ConfirmDialog.svelte';\n\n\tlet largeScreen = true;\n\n\ttype Knowledge = {\n\t\tid: string;\n\t\tname: string;\n\t\tdescription: string;\n\t\tdata: {\n\t\t\tfile_ids: string[];\n\t\t};\n\t\tfiles: any[];\n\t};\n\n\tlet id = null;\n\tlet knowledge: Knowledge | null = null;\n\tlet query = '';\n\n\tlet showAddTextContentModal = false;\n\tlet showSyncConfirmModal = false;\n\n\tlet inputFiles = null;\n\n\tlet filteredItems = [];\n\t$: if (knowledge) {\n\t\tfuse = new Fuse(knowledge.files, {\n\t\t\tkeys: ['meta.name', 'meta.description']\n\t\t});\n\t}\n\n\t$: if (fuse) {\n\t\tfilteredItems = query\n\t\t\t? fuse.search(query).map((e) => {\n\t\t\t\t\treturn e.item;\n\t\t\t\t})\n\t\t\t: (knowledge?.files ?? []);\n\t}\n\n\tlet selectedFile = null;\n\tlet selectedFileId = null;\n\n\t$: if (selectedFileId) {\n\t\tconst file = (knowledge?.files ?? []).find((file) => file.id === selectedFileId);\n\t\tif (file) {\n\t\t\tfile.data = file.data ?? { content: '' };\n\t\t\tselectedFile = file;\n\t\t} else {\n\t\t\tselectedFile = null;\n\t\t}\n\t} else {\n\t\tselectedFile = null;\n\t}\n\n\tlet fuse = null;\n\tlet debounceTimeout = null;\n\tlet mediaQuery;\n\tlet dragged = false;\n\n\tconst createFileFromText = (name, content) => {\n\t\tconst blob = new Blob([content], { type: 'text/plain' });\n\t\tconst file = blobToFile(blob, `${name}.md`);\n\n\t\tconsole.log(file);\n\t\treturn file;\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconsole.log(file);\n\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tsize: file.size,\n\t\t\tstatus: 'uploading',\n\t\t\terror: ''\n\t\t};\n\n\t\tknowledge.files = [...(knowledge.files ?? []), fileItem];\n\n\t\t// Check if the file is an audio file and transcribe/convert it to text file\n\t\tif (['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/x-m4a'].includes(file['type'])) {\n\t\t\tconst res = await transcribeAudio(localStorage.token, file).catch((error) => {\n\t\t\t\ttoast.error(error);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tconsole.log(res);\n\t\t\t\tconst blob = new Blob([res.text], { type: 'text/plain' });\n\t\t\t\tfile = blobToFile(blob, `${file.name}.txt`);\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file).catch((e) => {\n\t\t\t\ttoast.error(e);\n\t\t\t});\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log(uploadedFile);\n\t\t\t\tawait addFileHandler(uploadedFile.id);\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t('Failed to upload file.'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(e);\n\t\t}\n\t};\n\n\tconst uploadDirectoryHandler = async () => {\n\t\t// Check if File System Access API is supported\n\t\tconst isFileSystemAccessSupported = 'showDirectoryPicker' in window;\n\n\t\ttry {\n\t\t\tif (isFileSystemAccessSupported) {\n\t\t\t\t// Modern browsers (Chrome, Edge) implementation\n\t\t\t\tawait handleModernBrowserUpload();\n\t\t\t} else {\n\t\t\t\t// Firefox fallback\n\t\t\t\tawait handleFirefoxUpload();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\thandleUploadError(error);\n\t\t}\n\t};\n\n\t// Helper function to check if a path contains hidden folders\n\tconst hasHiddenFolder = (path) => {\n\t\treturn path.split('/').some((part) => part.startsWith('.'));\n\t};\n\n\t// Modern browsers implementation using File System Access API\n\tconst handleModernBrowserUpload = async () => {\n\t\tconst dirHandle = await window.showDirectoryPicker();\n\t\tlet totalFiles = 0;\n\t\tlet uploadedFiles = 0;\n\n\t\t// Function to update the UI with the progress\n\t\tconst updateProgress = () => {\n\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\ttoast.info(`Upload Progress: ${uploadedFiles}/${totalFiles} (${percentage.toFixed(2)}%)`);\n\t\t};\n\n\t\t// Recursive function to count all files excluding hidden ones\n\t\tasync function countFiles(dirHandle) {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\ttotalFiles++;\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait countFiles(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Recursive function to process directories excluding hidden files and folders\n\t\tasync function processDirectory(dirHandle, path = '') {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tconst entryPath = path ? `${path}/${entry.name}` : entry.name;\n\n\t\t\t\t// Skip if the path contains any hidden folders\n\t\t\t\tif (hasHiddenFolder(entryPath)) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\tconst file = await entry.getFile();\n\t\t\t\t\tconst fileWithPath = new File([file], entryPath, { type: file.type });\n\n\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\tupdateProgress();\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait processDirectory(entry, entryPath);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tawait countFiles(dirHandle);\n\t\tupdateProgress();\n\n\t\tif (totalFiles > 0) {\n\t\t\tawait processDirectory(dirHandle);\n\t\t} else {\n\t\t\tconsole.log('No files to upload.');\n\t\t}\n\t};\n\n\t// Firefox fallback implementation using traditional file input\n\tconst handleFirefoxUpload = async () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// Create hidden file input\n\t\t\tconst input = document.createElement('input');\n\t\t\tinput.type = 'file';\n\t\t\tinput.webkitdirectory = true;\n\t\t\tinput.directory = true;\n\t\t\tinput.multiple = true;\n\t\t\tinput.style.display = 'none';\n\n\t\t\t// Add input to DOM temporarily\n\t\t\tdocument.body.appendChild(input);\n\n\t\t\tinput.onchange = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst files = Array.from(input.files)\n\t\t\t\t\t\t// Filter out files from hidden folders\n\t\t\t\t\t\t.filter((file) => !hasHiddenFolder(file.webkitRelativePath));\n\n\t\t\t\t\tlet totalFiles = files.length;\n\t\t\t\t\tlet uploadedFiles = 0;\n\n\t\t\t\t\t// Function to update the UI with the progress\n\t\t\t\t\tconst updateProgress = () => {\n\t\t\t\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\t\t\t\ttoast.info(\n\t\t\t\t\t\t\t`Upload Progress: ${uploadedFiles}/${totalFiles} (${percentage.toFixed(2)}%)`\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tupdateProgress();\n\n\t\t\t\t\t// Process all files\n\t\t\t\t\tfor (const file of files) {\n\t\t\t\t\t\t// Skip hidden files (additional check)\n\t\t\t\t\t\tif (!file.name.startsWith('.')) {\n\t\t\t\t\t\t\tconst relativePath = file.webkitRelativePath || file.name;\n\t\t\t\t\t\t\tconst fileWithPath = new File([file], relativePath, { type: file.type });\n\n\t\t\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\t\t\tupdateProgress();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clean up\n\t\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinput.onerror = (error) => {\n\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\t// Trigger file picker\n\t\t\tinput.click();\n\t\t});\n\t};\n\n\t// Error handler\n\tconst handleUploadError = (error) => {\n\t\tif (error.name === 'AbortError') {\n\t\t\ttoast.info('Directory selection was cancelled');\n\t\t} else {\n\t\t\ttoast.error('Error accessing directory');\n\t\t\tconsole.error('Directory access error:', error);\n\t\t}\n\t};\n\n\t// Helper function to maintain file paths within zip\n\tconst syncDirectoryHandler = async () => {\n\t\tif ((knowledge?.files ?? []).length > 0) {\n\t\t\tconst res = await resetKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\t\ttoast.error(e);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tknowledge = res;\n\t\t\t\ttoast.success($i18n.t('Knowledge reset successfully.'));\n\n\t\t\t\t// Upload directory\n\t\t\t\tuploadDirectoryHandler();\n\t\t\t}\n\t\t} else {\n\t\t\tuploadDirectoryHandler();\n\t\t}\n\t};\n\n\tconst addFileHandler = async (fileId) => {\n\t\tconst updatedKnowledge = await addFileToKnowledgeById(localStorage.token, id, fileId).catch(\n\t\t\t(e) => {\n\t\t\t\ttoast.error(e);\n\t\t\t}\n\t\t);\n\n\t\tif (updatedKnowledge) {\n\t\t\tknowledge = updatedKnowledge;\n\t\t\ttoast.success($i18n.t('File added successfully.'));\n\t\t}\n\t};\n\n\tconst deleteFileHandler = async (fileId) => {\n\t\tconst updatedKnowledge = await removeFileFromKnowledgeById(\n\t\t\tlocalStorage.token,\n\t\t\tid,\n\t\t\tfileId\n\t\t).catch((e) => {\n\t\t\ttoast.error(e);\n\t\t});\n\n\t\tif (updatedKnowledge) {\n\t\t\tknowledge = updatedKnowledge;\n\t\t\ttoast.success($i18n.t('File removed successfully.'));\n\t\t}\n\t};\n\n\tconst updateFileContentHandler = async () => {\n\t\tconst fileId = selectedFile.id;\n\t\tconst content = selectedFile.data.content;\n\n\t\tconst res = updateFileDataContentById(localStorage.token, fileId, content).catch((e) => {\n\t\t\ttoast.error(e);\n\t\t});\n\n\t\tconst updatedKnowledge = await updateFileFromKnowledgeById(\n\t\t\tlocalStorage.token,\n\t\t\tid,\n\t\t\tfileId\n\t\t).catch((e) => {\n\t\t\ttoast.error(e);\n\t\t});\n\n\t\tif (res && updatedKnowledge) {\n\t\t\tknowledge = updatedKnowledge;\n\t\t\ttoast.success($i18n.t('File content updated successfully.'));\n\t\t}\n\t};\n\n\tconst changeDebounceHandler = () => {\n\t\tconsole.log('debounce');\n\t\tif (debounceTimeout) {\n\t\t\tclearTimeout(debounceTimeout);\n\t\t}\n\n\t\tdebounceTimeout = setTimeout(async () => {\n\t\t\tif (knowledge.name.trim() === '' || knowledge.description.trim() === '') {\n\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst res = await updateKnowledgeById(localStorage.token, id, {\n\t\t\t\tname: knowledge.name,\n\t\t\t\tdescription: knowledge.description\n\t\t\t}).catch((e) => {\n\t\t\t\ttoast.error(e);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success($i18n.t('Knowledge updated successfully'));\n\t\t\t\t_knowledge.set(await getKnowledgeItems(localStorage.token));\n\t\t\t}\n\t\t}, 1000);\n\t};\n\n\tconst handleMediaQuery = async (e) => {\n\t\tif (e.matches) {\n\t\t\tlargeScreen = true;\n\t\t} else {\n\t\t\tlargeScreen = false;\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\t\tdragged = true;\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tdragged = false;\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = e.dataTransfer?.files;\n\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tfor (const file of inputFiles) {\n\t\t\t\t\tawait uploadFileHandler(file);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\t// listen to resize 1024px\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\n\t\tid = $page.params.id;\n\n\t\tconst res = await getKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\ttoast.error(e);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tknowledge = res;\n\t\t} else {\n\t\t\tgoto('/workspace/knowledge');\n\t\t}\n\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.addEventListener('dragover', onDragOver);\n\t\tdropZone?.addEventListener('drop', onDrop);\n\t\tdropZone?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tmediaQuery?.removeEventListener('change', handleMediaQuery);\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.removeEventListener('dragover', onDragOver);\n\t\tdropZone?.removeEventListener('drop', onDrop);\n\t\tdropZone?.removeEventListener('dragleave', onDragLeave);\n\t});\n</script>\n\n{#if dragged}\n\t<div\n\t\tclass=\"fixed {$showSidebar\n\t\t\t? 'left-0 md:left-[260px] md:w-[calc(100%-260px)]'\n\t\t\t: 'left-0'}  w-full h-full flex z-50 touch-none pointer-events-none\"\n\t\tid=\"dropzone\"\n\t\trole=\"region\"\n\t\taria-label=\"Drag and Drop Container\"\n\t>\n\t\t<div class=\"absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center\">\n\t\t\t<div class=\"m-auto pt-64 flex flex-col justify-center\">\n\t\t\t\t<div class=\"max-w-md\">\n\t\t\t\t\t<AddFilesPlaceholder>\n\t\t\t\t\t\t<div class=\" mt-2 text-center text-sm dark:text-gray-200 w-full\">\n\t\t\t\t\t\t\tDrop any files here to add to my documents\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</AddFilesPlaceholder>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<SyncConfirmDialog\n\tbind:show={showSyncConfirmModal}\n\tmessage={$i18n.t(\n\t\t'This will reset the knowledge base and sync all files. Do you wish to continue?'\n\t)}\n\ton:confirm={() => {\n\t\tsyncDirectoryHandler();\n\t}}\n/>\n\n<AddTextContentModal\n\tbind:show={showAddTextContentModal}\n\ton:submit={(e) => {\n\t\tconst file = createFileFromText(e.detail.name, e.detail.content);\n\t\tuploadFileHandler(file);\n\t}}\n/>\n\n<input\n\tid=\"files-input\"\n\tbind:files={inputFiles}\n\ttype=\"file\"\n\tmultiple\n\thidden\n\ton:change={() => {\n\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\tfor (const file of inputFiles) {\n\t\t\t\tuploadFileHandler(file);\n\t\t\t}\n\n\t\t\tinputFiles = null;\n\t\t\tconst fileInputElement = document.getElementById('files-input');\n\n\t\t\tif (fileInputElement) {\n\t\t\t\tfileInputElement.value = '';\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t}\n\t}}\n/>\n\n<div class=\"flex flex-col w-full max-h-[100dvh] h-full\">\n\t<button\n\t\tclass=\"flex space-x-1 w-fit\"\n\t\ton:click={() => {\n\t\t\tgoto('/workspace/knowledge');\n\t\t}}\n\t>\n\t\t<div class=\" self-center\">\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\td=\"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z\"\n\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Back')}</div>\n\t</button>\n\n\t<div class=\"flex flex-col my-2 flex-1 overflow-auto h-0\">\n\t\t{#if id && knowledge}\n\t\t\t<div class=\" flex w-full mt-1 mb-3.5\">\n\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t<div class=\"flex items-center justify-between w-full px-0.5 mb-1\">\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"w-full font-medium text-2xl font-primary bg-transparent outline-none\"\n\t\t\t\t\t\t\t\tbind:value={knowledge.name}\n\t\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex-shrink-0\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Badge type=\"success\" content=\"Collection\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex w-full px-1\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"w-full text-gray-500 text-sm bg-transparent outline-none\"\n\t\t\t\t\t\t\tbind:value={knowledge.description}\n\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex flex-row h-0 flex-1 overflow-auto\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\" {largeScreen\n\t\t\t\t\t\t? 'flex-shrink-0'\n\t\t\t\t\t\t: 'flex-1'} flex py-2.5 w-80 rounded-2xl border border-gray-50 dark:border-gray-850\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" flex flex-col w-full space-x-2 rounded-lg h-full\">\n\t\t\t\t\t\t<div class=\"w-full h-full flex flex-col\">\n\t\t\t\t\t\t\t<div class=\" px-3\">\n\t\t\t\t\t\t\t\t<div class=\"flex\">\n\t\t\t\t\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent\"\n\t\t\t\t\t\t\t\t\t\tbind:value={query}\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Search Collection')}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<AddContentMenu\n\t\t\t\t\t\t\t\t\t\t\ton:upload={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.detail.type === 'directory') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuploadDirectoryHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (e.detail.type === 'text') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowAddTextContentModal = true;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('files-input').click();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:sync={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tshowSyncConfirmModal = true;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<hr class=\" mt-2 mb-1 border-gray-50 dark:border-gray-850\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if filteredItems.length > 0}\n\t\t\t\t\t\t\t\t<div class=\" flex overflow-y-auto h-full w-full scrollbar-hidden text-xs\">\n\t\t\t\t\t\t\t\t\t<Files\n\t\t\t\t\t\t\t\t\t\tfiles={filteredItems}\n\t\t\t\t\t\t\t\t\t\t{selectedFileId}\n\t\t\t\t\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tselectedFileId = e.detail;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ton:delete={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(e.detail);\n\n\t\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t\t\tdeleteFileHandler(e.detail);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div class=\"m-auto text-gray-500 text-xs\">No content found</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{#if largeScreen}\n\t\t\t\t\t<div class=\"flex-1 flex justify-start max-h-full overflow-hidden pl-3\">\n\t\t\t\t\t\t{#if selectedFile}\n\t\t\t\t\t\t\t<div class=\" flex flex-col w-full h-full\">\n\t\t\t\t\t\t\t\t<div class=\" flex-shrink-0 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\" flex-1 text-xl line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t{selectedFile?.meta?.name}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" flex-grow\">\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tclass=\" w-full h-full resize-none rounded-xl py-4 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-none\"\n\t\t\t\t\t\t\t\t\t\tbind:value={selectedFile.data.content}\n\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"m-auto\">\n\t\t\t\t\t\t\t\t<AddFilesPlaceholder title={$i18n.t('Select/Add Files')}>\n\t\t\t\t\t\t\t\t\t<div class=\" mt-2 text-center text-sm dark:text-gray-200 w-full\">\n\t\t\t\t\t\t\t\t\t\tSelect a file to view or drag and drop a file to upload\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</AddFilesPlaceholder>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<Spinner />\n\t\t{/if}\n\t</div>\n</div>\n"],"names":["ctx","attr","div","div_class_value","insert_hydration","target","anchor","dirty","type","$$props","content","classNames","_a","_c","_b","_d","_f","_e","fileitem_changes","i","each_blocks","dispatch","createEventDispatcher","selectedFileId","files","file","div13","append_hydration","div1","div0","button0","div12","div11","form","div9","div8","div4","div2","div3","input","div7","div5","div6","textarea","div10","button1","set_data","t0","t0_value","t9","t9_value","i18n","getContext","show","name","$$invalidate","toast","$i18n","svg","path","className","strokeWidth","button","t1","t1_value","flyAndScale","onClose","e","create_if_block_1","input0","set_input_value","input1","div14","input2","hr","t2","t2_value","create_if_block_4","t5","t5_value","largeScreen","id","knowledge","query","showAddTextContentModal","showSyncConfirmModal","inputFiles","filteredItems","selectedFile","fuse","debounceTimeout","mediaQuery","dragged","createFileFromText","blob","blobToFile","uploadFileHandler","fileItem","res","transcribeAudio","error","uploadedFile","uploadFile","addFileHandler","uploadDirectoryHandler","isFileSystemAccessSupported","handleModernBrowserUpload","handleFirefoxUpload","handleUploadError","hasHiddenFolder","part","dirHandle","totalFiles","uploadedFiles","updateProgress","percentage","countFiles","entry","processDirectory","entryPath","fileWithPath","resolve","reject","relativePath","syncDirectoryHandler","resetKnowledgeById","fileId","updatedKnowledge","addFileToKnowledgeById","deleteFileHandler","removeFileFromKnowledgeById","updateFileContentHandler","updateFileDataContentById","updateFileFromKnowledgeById","changeDebounceHandler","updateKnowledgeById","_knowledge","getKnowledgeItems","handleMediaQuery","onDragOver","onDragLeave","onDrop","onMount","$page","getKnowledgeById","goto","dropZone","onDestroy","value","fileInputElement","Fuse"],"mappings":"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"}