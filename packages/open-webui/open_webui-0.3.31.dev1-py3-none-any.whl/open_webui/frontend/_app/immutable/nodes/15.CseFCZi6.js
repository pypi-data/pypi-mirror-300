import{s as ye,A as He,E as Oe,G as Le,p as Pe,j as he,e as _,c as g,a as h,d,f as m,i as y,r as Re,v as Ze,w as Je,x as Qe,u as ve,n as We,k as C,t as L,o as M,b as R,g as c,h as ee,y as Be,m as Xe,B as Ye,z as Te,C as Ne,K as et,F as tt,q as lt}from"../chunks/scheduler.Dyt_jldW.js";import{S as Ee,i as De,f as qe,b as te,d as le,m as re,t as j,a as W,e as se,g as rt,c as st}from"../chunks/index.g9C97g6-.js";import{e as Ue}from"../chunks/spread.CNdYb9hD.js";import{F as nt}from"../chunks/fuse.CU2r43ac.js";import{d as ke}from"../chunks/dayjs.min.CnqrW7zs.js";import{r as ot}from"../chunks/relativeTime.HIEE8cw9.js";import{t as be}from"../chunks/Toaster.svelte_svelte_type_style_lang.Ch2gtda1.js";import{k as ge,W as at}from"../chunks/index.CXeT4Swk.js";import{g as Se,d as it}from"../chunks/index.9E6SrDZD.js";import"../chunks/sha256.DmKfZSHC.js";import{g as ze}from"../chunks/entry.BvGjoYWM.js";import{T as dt}from"../chunks/updater.Bv58epJr.js";import{C as ct}from"../chunks/ConfirmDialog.BEvjqHNe.js";import{D as ft,M as ut}from"../chunks/Dropdown.h2i4vhzY.js";import{b as mt}from"../chunks/menu-trigger.F67SP9zA.js";import{f as pt}from"../chunks/index.DMdt0oYD.js";import{G as _t}from"../chunks/GarbageBin.BLuBf3bx.js";import{E as gt}from"../chunks/EllipsisHorizontal.saM3i1U-.js";function ht(s){let e,l,t,r,n;return l=new gt({props:{className:"size-5"}}),{c(){e=_("button"),te(l.$$.fragment),this.h()},l(a){e=g(a,"BUTTON",{class:!0,type:!0});var i=h(e);le(l.$$.fragment,i),i.forEach(d),this.h()},h(){m(e,"class","self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),m(e,"type","button")},m(a,i){y(a,e,i),re(l,e,null),t=!0,r||(n=ve(e,"click",s[7]),r=!0)},p:We,i(a){t||(j(l.$$.fragment,a),t=!0)},o(a){W(l.$$.fragment,a),t=!1},d(a){a&&d(e),se(l),r=!1,n()}}}function vt(s){let e;const l=s[5].default,t=Re(l,s,s[10],null),r=t||ht(s);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,a){r&&r.m(n,a),e=!0},p(n,a){t?t.p&&(!e||a&1024)&&Ze(t,l,n,n[10],e?Qe(l,n[10],a,null):Je(n[10]),null):r&&r.p&&(!e||a&2)&&r.p(n,e?a:-1)},i(n){e||(j(r,n),e=!0)},o(n){W(r,n),e=!1},d(n){r&&r.d(n)}}}function wt(s){let e,l;return e=new dt({props:{content:s[2].t("More"),$$slots:{default:[vt]},$$scope:{ctx:s}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.content=t[2].t("More")),r&1026&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function $t(s){let e,l,t,r=s[2].t("Delete")+"",n,a;return e=new _t({props:{strokeWidth:"2"}}),{c(){te(e.$$.fragment),l=C(),t=_("div"),n=L(r),this.h()},l(i){le(e.$$.fragment,i),l=M(i),t=g(i,"DIV",{class:!0});var f=h(t);n=R(f,r),f.forEach(d),this.h()},h(){m(t,"class","flex items-center")},m(i,f){re(e,i,f),y(i,l,f),y(i,t,f),c(t,n),a=!0},p(i,f){(!a||f&4)&&r!==(r=i[2].t("Delete")+"")&&ee(n,r)},i(i){a||(j(e.$$.fragment,i),a=!0)},o(i){W(e.$$.fragment,i),a=!1},d(i){i&&(d(l),d(t)),se(e,i)}}}function bt(s){let e,l;return e=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[$t]},$$scope:{ctx:s}}}),e.$on("click",s[6]),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const n={};r&1028&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function kt(s){let e,l,t;return l=new mt({props:{class:"w-full max-w-[160px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:-2,side:"bottom",align:"end",transition:pt,$$slots:{default:[bt]},$$scope:{ctx:s}}}),{c(){e=_("div"),te(l.$$.fragment),this.h()},l(r){e=g(r,"DIV",{slot:!0});var n=h(e);le(l.$$.fragment,n),n.forEach(d),this.h()},h(){m(e,"slot","content")},m(r,n){y(r,e,n),re(l,e,null),t=!0},p(r,n){const a={};n&1028&&(a.$$scope={dirty:n,ctx:r}),l.$set(a)},i(r){t||(j(l.$$.fragment,r),t=!0)},o(r){W(l.$$.fragment,r),t=!1},d(r){r&&d(e),se(l)}}}function yt(s){let e,l,t;function r(a){s[8](a)}let n={align:"end",$$slots:{content:[kt],default:[wt]},$$scope:{ctx:s}};return s[1]!==void 0&&(n.show=s[1]),e=new ft({props:n}),He.push(()=>qe(e,"show",r)),e.$on("change",s[9]),{c(){te(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,i){re(e,a,i),t=!0},p(a,[i]){const f={};i&1030&&(f.$$scope={dirty:i,ctx:a}),!l&&i&2&&(l=!0,f.show=a[1],Oe(()=>l=!1)),e.$set(f)},i(a){t||(j(e.$$.fragment,a),t=!0)},o(a){W(e.$$.fragment,a),t=!1},d(a){se(e,a)}}}function Et(s,e,l){let t,{$$slots:r={},$$scope:n}=e;const a=Le(),i=Pe("i18n");he(s,i,v=>l(2,t=v));let{onClose:f=()=>{}}=e,w=!1;const K=()=>{a("delete")},E=v=>{v.stopPropagation(),l(1,w=!0)};function D(v){w=v,l(1,w)}const z=v=>{v.detail===!1&&f()};return s.$$set=v=>{"onClose"in v&&l(0,f=v.onClose),"$$scope"in v&&l(10,n=v.$$scope)},[f,w,t,a,i,r,K,E,D,z,n]}class Dt extends Ee{constructor(e){super(),De(this,e,Et,yt,ye,{onClose:0})}}function Ae(s,e,l){const t=s.slice();return t[16]=e[l],t}function It(s){let e,l=s[5].t("Collection")+"",t;return{c(){e=_("div"),t=L(l),this.h()},l(r){e=g(r,"DIV",{class:!0});var n=h(e);t=R(n,l),n.forEach(d),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1")},m(r,n){y(r,e,n),c(e,t)},p(r,n){n&32&&l!==(l=r[5].t("Collection")+"")&&ee(t,l)},d(r){r&&d(e)}}}function xt(s){let e,l=s[5].t("Document")+"",t;return{c(){e=_("div"),t=L(l),this.h()},l(r){e=g(r,"DIV",{class:!0});var n=h(e);t=R(n,l),n.forEach(d),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1")},m(r,n){y(r,e,n),c(e,t)},p(r,n){n&32&&l!==(l=r[5].t("Document")+"")&&ee(t,l)},d(r){r&&d(e)}}}function je(s){let e,l,t,r,n=s[16].name+"",a,i,f,w,K,E,D,z=s[16].description+"",v,q,B,A,T,u,N,Z=ke(s[16].updated_at*1e3).fromNow()+"",ne,S,H,ae,oe;function F(){return s[14](s[16])}w=new Dt({}),w.$on("delete",F);function O(b,x){var V,P;return(P=(V=b[16])==null?void 0:V.meta)!=null&&P.document?xt:It}let J=O(s),I=J(s);function ce(){return s[15](s[16])}return{c(){e=_("button"),l=_("div"),t=_("div"),r=_("div"),a=L(n),i=C(),f=_("div"),te(w.$$.fragment),K=C(),E=_("div"),D=_("div"),v=L(z),q=C(),B=_("div"),A=_("div"),I.c(),T=C(),u=_("div"),N=L("Updated "),ne=L(Z),S=C(),this.h()},l(b){e=g(b,"BUTTON",{class:!0});var x=h(e);l=g(x,"DIV",{class:!0});var V=h(l);t=g(V,"DIV",{class:!0});var P=h(t);r=g(P,"DIV",{class:!0});var G=h(r);a=R(G,n),G.forEach(d),i=M(P),f=g(P,"DIV",{class:!0});var fe=h(f);le(w.$$.fragment,fe),fe.forEach(d),P.forEach(d),K=M(V),E=g(V,"DIV",{class:!0});var Q=h(E);D=g(Q,"DIV",{class:!0});var ie=h(D);v=R(ie,z),ie.forEach(d),q=M(Q),B=g(Q,"DIV",{class:!0});var U=h(B);A=g(U,"DIV",{});var ue=h(A);I.l(ue),ue.forEach(d),T=M(U),u=g(U,"DIV",{class:!0});var me=h(u);N=R(me,"Updated "),ne=R(me,Z),me.forEach(d),U.forEach(d),Q.forEach(d),V.forEach(d),S=M(x),x.forEach(d),this.h()},h(){m(r,"class","font-semibold line-clamp-1 h-fit"),m(f,"class","flex self-center"),m(t,"class","flex items-center justify-between -mt-1"),m(D,"class","text-xs overflow-hidden text-ellipsis line-clamp-1"),m(u,"class","text-xs text-gray-500"),m(B,"class","mt-5 flex justify-between"),m(E,"class","self-center flex-1"),m(l,"class","w-full"),m(e,"class","flex space-x-4 cursor-pointer text-left w-full px-4 py-3 border border-gray-50 dark:border-gray-850 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-xl")},m(b,x){y(b,e,x),c(e,l),c(l,t),c(t,r),c(r,a),c(t,i),c(t,f),re(w,f,null),c(l,K),c(l,E),c(E,D),c(D,v),c(E,q),c(E,B),c(B,A),I.m(A,null),c(B,T),c(B,u),c(u,N),c(u,ne),c(e,S),H=!0,ae||(oe=ve(e,"click",ce),ae=!0)},p(b,x){s=b,(!H||x&16)&&n!==(n=s[16].name+"")&&ee(a,n),(!H||x&16)&&z!==(z=s[16].description+"")&&ee(v,z),J===(J=O(s))&&I?I.p(s,x):(I.d(1),I=J(s),I&&(I.c(),I.m(A,null))),(!H||x&16)&&Z!==(Z=ke(s[16].updated_at*1e3).fromNow()+"")&&ee(ne,Z)},i(b){H||(j(w.$$.fragment,b),H=!0)},o(b){W(w.$$.fragment,b),H=!1},d(b){b&&d(e),se(w),I.d(),ae=!1,oe()}}}function Vt(s){let e,l,t,r,n,a,i,f,w=s[5].t("Knowledge")+"",K,E,D,z,v,q=s[1].length+"",B,A,T,u,N,Z='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',ne,S,H,ae,oe,F,O,J,I,ce,b,x,V,P,G,fe,Q=s[5].t("Use '#' in the prompt input to load and include your knowledge.")+"",ie,U,ue,me;document.title=e=`
		`+s[5].t("Knowledge")+" | "+s[6]+`
	`;function Fe(o){s[10](o)}let Ie={};s[3]!==void 0&&(Ie.show=s[3]),t=new ct({props:Ie}),He.push(()=>qe(t,"show",Fe)),t.$on("confirm",s[11]);let de=Ue(s[4]),$=[];for(let o=0;o<de.length;o+=1)$[o]=je(Ae(s,de,o));const Ge=o=>W($[o],1,1,()=>{$[o]=null});return{c(){l=C(),te(t.$$.fragment),n=C(),a=_("div"),i=_("div"),f=_("div"),K=L(w),E=C(),D=_("div"),z=C(),v=_("span"),B=L(q),A=C(),T=_("div"),u=_("div"),N=_("div"),N.innerHTML=Z,ne=C(),S=_("input"),ae=C(),oe=_("div"),F=_("button"),O=Be("svg"),J=Be("path"),ce=C(),b=_("hr"),x=C(),V=_("div");for(let o=0;o<$.length;o+=1)$[o].c();P=C(),G=_("div"),fe=L("ⓘ "),ie=L(Q),this.h()},l(o){Xe("svelte-igp99u",document.head).forEach(d),l=M(o),le(t.$$.fragment,o),n=M(o),a=g(o,"DIV",{class:!0});var X=h(a);i=g(X,"DIV",{class:!0});var k=h(i);f=g(k,"DIV",{class:!0});var Y=h(f);K=R(Y,w),E=M(Y),D=g(Y,"DIV",{class:!0}),h(D).forEach(d),z=M(Y),v=g(Y,"SPAN",{class:!0});var xe=h(v);B=R(xe,q),xe.forEach(d),Y.forEach(d),k.forEach(d),X.forEach(d),A=M(o),T=g(o,"DIV",{class:!0});var pe=h(T);u=g(pe,"DIV",{class:!0});var _e=h(u);N=g(_e,"DIV",{class:!0,"data-svelte-h":!0}),Ye(N)!=="svelte-v38fm1"&&(N.innerHTML=Z),ne=M(_e),S=g(_e,"INPUT",{class:!0,placeholder:!0}),_e.forEach(d),ae=M(pe),oe=g(pe,"DIV",{});var Ve=h(oe);F=g(Ve,"BUTTON",{class:!0,"aria-label":!0});var Ce=h(F);O=Te(Ce,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var Me=h(O);J=Te(Me,"path",{d:!0}),h(J).forEach(d),Me.forEach(d),Ce.forEach(d),Ve.forEach(d),pe.forEach(d),ce=M(o),b=g(o,"HR",{class:!0}),x=M(o),V=g(o,"DIV",{class:!0});var Ke=h(V);for(let $e=0;$e<$.length;$e+=1)$[$e].l(Ke);Ke.forEach(d),P=M(o),G=g(o,"DIV",{class:!0});var we=h(G);fe=R(we,"ⓘ "),ie=R(we,Q),we.forEach(d),this.h()},h(){m(D,"class","flex self-center w-[1px] h-6 mx-2.5 bg-gray-200 dark:bg-gray-700"),m(v,"class","text-lg font-medium text-gray-500 dark:text-gray-300"),m(f,"class","flex md:self-center text-lg font-medium px-0.5"),m(i,"class","flex justify-between items-center"),m(a,"class","mb-3"),m(N,"class","self-center ml-1 mr-3"),m(S,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),m(S,"placeholder",H=s[5].t("Search Knowledge")),m(u,"class","flex flex-1"),m(J,"d","M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"),m(O,"xmlns","http://www.w3.org/2000/svg"),m(O,"viewBox","0 0 16 16"),m(O,"fill","currentColor"),m(O,"class","w-4 h-4"),m(F,"class","px-2 py-2 rounded-xl border border-gray-50 dark:border-gray-800 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1"),m(F,"aria-label",I=s[5].t("Create Knowledge")),m(T,"class","flex w-full space-x-2"),m(b,"class","border-gray-50 dark:border-gray-850 my-2.5"),m(V,"class","my-3 mb-5 grid lg:grid-cols-2 xl:grid-cols-3 gap-2"),m(G,"class","text-gray-500 text-xs mt-1 mb-2")},m(o,p){y(o,l,p),re(t,o,p),y(o,n,p),y(o,a,p),c(a,i),c(i,f),c(f,K),c(f,E),c(f,D),c(f,z),c(f,v),c(v,B),y(o,A,p),y(o,T,p),c(T,u),c(u,N),c(u,ne),c(u,S),Ne(S,s[0]),c(T,ae),c(T,oe),c(oe,F),c(F,O),c(O,J),y(o,ce,p),y(o,b,p),y(o,x,p),y(o,V,p);for(let X=0;X<$.length;X+=1)$[X]&&$[X].m(V,null);y(o,P,p),y(o,G,p),c(G,fe),c(G,ie),U=!0,ue||(me=[ve(S,"input",s[12]),ve(F,"click",s[13])],ue=!0)},p(o,[p]){(!U||p&96)&&e!==(e=`
		`+o[5].t("Knowledge")+" | "+o[6]+`
	`)&&(document.title=e);const X={};if(!r&&p&8&&(r=!0,X.show=o[3],Oe(()=>r=!1)),t.$set(X),(!U||p&32)&&w!==(w=o[5].t("Knowledge")+"")&&ee(K,w),(!U||p&2)&&q!==(q=o[1].length+"")&&ee(B,q),(!U||p&32&&H!==(H=o[5].t("Search Knowledge")))&&m(S,"placeholder",H),p&1&&S.value!==o[0]&&Ne(S,o[0]),(!U||p&32&&I!==(I=o[5].t("Create Knowledge")))&&m(F,"aria-label",I),p&60){de=Ue(o[4]);let k;for(k=0;k<de.length;k+=1){const Y=Ae(o,de,k);$[k]?($[k].p(Y,p),j($[k],1)):($[k]=je(Y),$[k].c(),j($[k],1),$[k].m(V,null))}for(rt(),k=de.length;k<$.length;k+=1)Ge(k);st()}(!U||p&32)&&Q!==(Q=o[5].t("Use '#' in the prompt input to load and include your knowledge.")+"")&&ee(ie,Q)},i(o){if(!U){j(t.$$.fragment,o);for(let p=0;p<de.length;p+=1)j($[p]);U=!0}},o(o){W(t.$$.fragment,o),$=$.filter(Boolean);for(let p=0;p<$.length;p+=1)W($[p]);U=!1},d(o){o&&(d(l),d(n),d(a),d(A),d(T),d(ce),d(b),d(x),d(V),d(P),d(G)),se(t,o),et($,o),ue=!1,tt(me)}}}function Ct(s,e,l){let t,r,n;he(s,ge,u=>l(1,r=u)),he(s,at,u=>l(6,n=u)),ke.extend(ot);const a=Pe("i18n");he(s,a,u=>l(5,t=u));let i="",f=null,w=!1,K=null,E=[];const D=async u=>{await it(localStorage.token,u.id).catch(Z=>{be.error(Z)})&&(ge.set(await Se(localStorage.token)),be.success(t.t("Knowledge deleted successfully.")))};lt(async()=>{ge.set(await Se(localStorage.token)),ge.subscribe(u=>{l(9,K=new nt(u,{keys:["name","description"]}))})});function z(u){w=u,l(3,w)}const v=()=>{D(f)};function q(){i=this.value,l(0,i)}const B=()=>{ze("/workspace/knowledge/create")},A=u=>{l(2,f=u),l(3,w=!0)},T=u=>{var N;(N=u==null?void 0:u.meta)!=null&&N.document?be.error(t.t("Only collections can be edited, create a new knowledge base to edit/add documents.")):ze(`/workspace/knowledge/${u.id}`)};return s.$$.update=()=>{s.$$.dirty&515&&K&&l(4,E=i?K.search(i).map(u=>u.item):r)},[i,r,f,w,E,t,n,a,D,K,z,v,q,B,A,T]}class Mt extends Ee{constructor(e){super(),De(this,e,Ct,Vt,ye,{})}}function Kt(s){let e,l;return e=new Mt({}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:We,i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}class Jt extends Ee{constructor(e){super(),De(this,e,null,Kt,ye,{})}}export{Jt as component};
//# sourceMappingURL=15.CseFCZi6.js.map
