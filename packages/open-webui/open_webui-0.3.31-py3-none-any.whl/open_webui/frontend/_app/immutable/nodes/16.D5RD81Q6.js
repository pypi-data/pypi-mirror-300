import{s as ke,e as m,t as pe,c as p,a as _,b as ge,d,f,i as F,g as h,h as ve,n as le,K as ot,G as Re,k as z,o as H,A as je,E as Ke,p as Xe,j as Pe,B as be,C as ue,u as ce,D as at,F as qe,y as Be,z as Ne,q as it,N as ct}from"../chunks/scheduler.Dyt_jldW.js";import{S as $e,i as ye,t as V,g as Se,c as We,a as T,b as Q,d as Y,m as Z,e as ee,f as Oe}from"../chunks/index.g9C97g6-.js";import{F as ft}from"../chunks/fuse.CU2r43ac.js";import{t as J}from"../chunks/Toaster.svelte_svelte_type_style_lang.Ch2gtda1.js";import{g as Je}from"../chunks/entry.Dyv90Pv0.js";import{p as dt}from"../chunks/stores.CNDdy_9x.js";import{s as ut,k as ht}from"../chunks/index.C27LS4TN.js";import{u as mt,a as pt}from"../chunks/index.CwDUOMs6.js";import{a as gt,r as vt,b as _t,e as wt,u as bt,f as kt,g as $t}from"../chunks/index.Ya8QwoUs.js";import{S as yt}from"../chunks/Spinner.vIt_c_0L.js";import{T as st}from"../chunks/updater.Bv58epJr.js";import{e as Qe}from"../chunks/spread.CNdYb9hD.js";import{F as xt}from"../chunks/FileItem.Dc7ocC3t.js";import{A as rt}from"../chunks/AddFilesPlaceholder.1euEy8h4.js";import"../chunks/dayjs.min.CnqrW7zs.js";import{M as It}from"../chunks/Modal.BzaZoDzz.js";import{t as Et}from"../chunks/index.CSfaX13I.js";import{k as Ye}from"../chunks/index.Dd48_MJ0.js";import{D as Dt,M as Ue}from"../chunks/Dropdown.h2i4vhzY.js";import{b as Ct}from"../chunks/menu-trigger.F67SP9zA.js";import{f as Vt}from"../chunks/index.DMdt0oYD.js";import{A as Ft}from"../chunks/ArrowUpCircle.COBOHYOF.js";import{C as Tt}from"../chunks/ConfirmDialog.BEvjqHNe.js";function At(r){let e,t,l;return{c(){e=m("div"),t=pe(r[1]),this.h()},l(s){e=p(s,"DIV",{class:!0});var a=_(e);t=ge(a,r[1]),a.forEach(d),this.h()},h(){f(e,"class",l="text-xs font-bold "+(r[2][r[0]]??r[2].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5")},m(s,a){F(s,e,a),h(e,t)},p(s,[a]){a&2&&ve(t,s[1]),a&1&&l!==(l="text-xs font-bold "+(s[2][s[0]]??s[2].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5")&&f(e,"class",l)},i:le,o:le,d(s){s&&d(e)}}}function Mt(r,e,t){let{type:l="info"}=e,{content:s=""}=e;const a={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"};return r.$$set=i=>{"type"in i&&t(0,l=i.type),"content"in i&&t(1,s=i.content)},[l,s,a]}class Bt extends $e{constructor(e){super(),ye(this,e,Mt,At,ke,{type:0,content:1})}}function Ze(r,e,t){const l=r.slice();return l[5]=e[t],l}function et(r){var n,o,c,g,E,k;let e,t,l,s;function a(){return r[3](r[5])}function i(){return r[4](r[5])}return t=new xt({props:{className:"w-full",colorClassName:(r[0]===r[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",file:r[5],name:((n=r[5])==null?void 0:n.name)??((c=(o=r[5])==null?void 0:o.meta)==null?void 0:c.name),type:"file",size:((g=r[5])==null?void 0:g.size)??((k=(E=r[5])==null?void 0:E.meta)==null?void 0:k.size)??"",loading:r[5].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",i),{c(){e=m("div"),Q(t.$$.fragment),l=z(),this.h()},l($){e=p($,"DIV",{class:!0});var w=_(e);Y(t.$$.fragment,w),l=H(w),w.forEach(d),this.h()},h(){f(e,"class","mt-2 px-2")},m($,w){F($,e,w),Z(t,e,null),h(e,l),s=!0},p($,w){var M,U,K,I,y,B;r=$;const b={};w&3&&(b.colorClassName=(r[0]===r[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),w&2&&(b.file=r[5]),w&2&&(b.name=((M=r[5])==null?void 0:M.name)??((K=(U=r[5])==null?void 0:U.meta)==null?void 0:K.name)),w&2&&(b.size=((I=r[5])==null?void 0:I.size)??((B=(y=r[5])==null?void 0:y.meta)==null?void 0:B.size)??""),w&2&&(b.loading=r[5].status==="uploading"),t.$set(b)},i($){s||(V(t.$$.fragment,$),s=!0)},o($){T(t.$$.fragment,$),s=!1},d($){$&&d(e),ee(t)}}}function Nt(r){let e,t,l=Qe(r[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=et(Ze(r,l,i));const a=i=>T(s[i],1,1,()=>{s[i]=null});return{c(){e=m("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=p(i,"DIV",{class:!0});var n=_(e);for(let o=0;o<s.length;o+=1)s[o].l(n);n.forEach(d),this.h()},h(){f(e,"class","max-h-full flex flex-col w-full")},m(i,n){F(i,e,n);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(i,[n]){if(n&7){l=Qe(i[1]);let o;for(o=0;o<l.length;o+=1){const c=Ze(i,l,o);s[o]?(s[o].p(c,n),V(s[o],1)):(s[o]=et(c),s[o].c(),V(s[o],1),s[o].m(e,null))}for(Se(),o=l.length;o<s.length;o+=1)a(o);We()}},i(i){if(!t){for(let n=0;n<l.length;n+=1)V(s[n]);t=!0}},o(i){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)T(s[n]);t=!1},d(i){i&&d(e),ot(s,i)}}}function St(r,e,t){const l=Re();let{selectedFileId:s=null}=e,{files:a=[]}=e;const i=o=>{l("click",o.id)},n=o=>{l("delete",o.id)};return r.$$set=o=>{"selectedFileId"in o&&t(0,s=o.selectedFileId),"files"in o&&t(1,a=o.files)},[s,a,l,i,n]}class Wt extends $e{constructor(e){super(),ye(this,e,St,Nt,ke,{selectedFileId:0,files:1})}}function Lt(r){let e,t,l,s=r[3].t("Add Content")+"",a,i,n,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,g,E,k,$,w,b,M,U="Title",K,I,y,B,S,W,re="Content",N,ne,O,de,oe,se,L=r[3].t("Add Content")+"",R,v,A;return{c(){e=m("div"),t=m("div"),l=m("div"),a=pe(s),i=z(),n=m("button"),n.innerHTML=o,c=z(),g=m("div"),E=m("div"),k=m("form"),$=m("div"),w=m("div"),b=m("div"),M=m("div"),M.textContent=U,K=z(),I=m("div"),y=m("input"),B=z(),S=m("div"),W=m("div"),W.textContent=re,N=z(),ne=m("div"),O=m("textarea"),de=z(),oe=m("div"),se=m("button"),R=pe(L),this.h()},l(P){e=p(P,"DIV",{});var X=_(e);t=p(X,"DIV",{class:!0});var ae=_(t);l=p(ae,"DIV",{class:!0});var Ie=_(l);a=ge(Ie,s),Ie.forEach(d),i=H(ae),n=p(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),be(n)!=="svelte-745w2y"&&(n.innerHTML=o),ae.forEach(d),c=H(X),g=p(X,"DIV",{class:!0});var fe=_(g);E=p(fe,"DIV",{class:!0});var Ee=_(E);k=p(Ee,"FORM",{class:!0});var j=_(k);$=p(j,"DIV",{class:!0});var C=_($);w=p(C,"DIV",{class:!0});var G=_(w);b=p(G,"DIV",{class:!0});var ie=_(b);M=p(ie,"DIV",{class:!0,"data-svelte-h":!0}),be(M)!=="svelte-179dsmj"&&(M.textContent=U),K=H(ie),I=p(ie,"DIV",{class:!0});var _e=_(I);y=p(_e,"INPUT",{class:!0,type:!0,placeholder:!0}),_e.forEach(d),ie.forEach(d),B=H(G),S=p(G,"DIV",{});var we=_(S);W=p(we,"DIV",{class:!0,"data-svelte-h":!0}),be(W)!=="svelte-166gjmc"&&(W.textContent=re),N=H(we),ne=p(we,"DIV",{class:!0});var De=_(ne);O=p(De,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),_(O).forEach(d),De.forEach(d),we.forEach(d),G.forEach(d),C.forEach(d),de=H(j),oe=p(j,"DIV",{class:!0});var Ce=_(oe);se=p(Ce,"BUTTON",{class:!0,type:!0});var Ve=_(se);R=ge(Ve,L),Ve.forEach(d),Ce.forEach(d),j.forEach(d),Ee.forEach(d),fe.forEach(d),X.forEach(d),this.h()},h(){f(l,"class","text-lg font-medium self-center"),f(n,"class","self-center"),f(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),f(M,"class","text-sm mb-2"),f(y,"class","w-full rounded-lg py-2 px-4 text-sm bg-white dark:text-gray-300 dark:bg-gray-850 outline-none svelte-1vx7r9s"),f(y,"type","text"),f(y,"placeholder","Name your content"),y.required=!0,f(I,"class","w-full mt-1"),f(b,"class","w-full"),f(W,"class","text-sm mb-2"),f(O,"class","w-full resize-none rounded-lg py-2 px-4 text-sm bg-whites dark:text-gray-300 dark:bg-gray-850 outline-none"),f(O,"rows","10"),f(O,"placeholder","Write your content here"),O.required=!0,f(ne,"class","w-full mt-1"),f(w,"class","w-full flex flex-col gap-2.5"),f($,"class","mb-3 w-full"),f(se,"class","px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg"),f(se,"type","submit"),f(oe,"class","flex justify-end text-sm font-medium"),f(k,"class","flex flex-col w-full"),f(E,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),f(g,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(P,X){F(P,e,X),h(e,t),h(t,l),h(l,a),h(t,i),h(t,n),h(e,c),h(e,g),h(g,E),h(E,k),h(k,$),h($,w),h(w,b),h(b,M),h(b,K),h(b,I),h(I,y),ue(y,r[1]),h(w,B),h(w,S),h(S,W),h(S,N),h(S,ne),h(ne,O),ue(O,r[2]),h(k,de),h(k,oe),h(oe,se),h(se,R),v||(A=[ce(n,"click",r[6]),ce(y,"input",r[7]),ce(O,"input",r[8]),ce(k,"submit",at(r[9]))],v=!0)},p(P,X){X&8&&s!==(s=P[3].t("Add Content")+"")&&ve(a,s),X&2&&y.value!==P[1]&&ue(y,P[1]),X&4&&ue(O,P[2]),X&8&&L!==(L=P[3].t("Add Content")+"")&&ve(R,L)},d(P){P&&d(e),v=!1,qe(A)}}}function Pt(r){let e,t,l;function s(i){r[10](i)}let a={size:"md",$$slots:{default:[Lt]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.show=r[0]),e=new It({props:a}),je.push(()=>Oe(e,"show",s)),{c(){Q(e.$$.fragment)},l(i){Y(e.$$.fragment,i)},m(i,n){Z(e,i,n),l=!0},p(i,[n]){const o={};n&2063&&(o.$$scope={dirty:n,ctx:i}),!t&&n&1&&(t=!0,o.show=i[0],Ke(()=>t=!1)),e.$set(o)},i(i){l||(V(e.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function zt(r,e,t){let l;const s=Xe("i18n");Pe(r,s,w=>t(3,l=w));const a=Re();let{show:i=!1}=e,n="",o="";const c=()=>{t(0,i=!1)};function g(){n=this.value,t(1,n)}function E(){o=this.value,t(2,o)}const k=()=>{if(n.trim()===""||o.trim()===""){J.error(l.t("Please fill in all fields.")),t(1,n=""),t(2,o="");return}a("submit",{name:n,content:o}),t(0,i=!1),t(1,n=""),t(2,o="")};function $(w){i=w,t(0,i)}return r.$$set=w=>{"show"in w&&t(0,i=w.show)},[i,n,o,l,s,a,c,g,E,k,$]}class Ht extends $e{constructor(e){super(),ye(this,e,zt,Pt,ke,{show:0})}}function Ut(r){let e,t;return{c(){e=Be("svg"),t=Be("path"),this.h()},l(l){e=Ne(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=_(e);t=Ne(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(d),s.forEach(d),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",r[1]),f(e,"stroke","currentColor"),f(e,"class",r[0])},m(l,s){F(l,e,s),h(e,t)},p(l,[s]){s&2&&f(e,"stroke-width",l[1]),s&1&&f(e,"class",l[0])},i:le,o:le,d(l){l&&d(e)}}}function jt(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,s=a.strokeWidth)},[l,s]}class Kt extends $e{constructor(e){super(),ye(this,e,jt,Ut,ke,{className:0,strokeWidth:1})}}function Ot(r){let e,t;return{c(){e=Be("svg"),t=Be("path"),this.h()},l(l){e=Ne(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=_(e);t=Ne(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(d),s.forEach(d),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",r[1]),f(e,"stroke","currentColor"),f(e,"class",r[0])},m(l,s){F(l,e,s),h(e,t)},p(l,[s]){s&2&&f(e,"stroke-width",l[1]),s&1&&f(e,"class",l[0])},i:le,o:le,d(l){l&&d(e)}}}function qt(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,s=a.strokeWidth)},[l,s]}class Rt extends $e{constructor(e){super(),ye(this,e,qt,Ot,ke,{className:0,strokeWidth:1})}}function Xt(r){let e,t;return{c(){e=Be("svg"),t=Be("path"),this.h()},l(l){e=Ne(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=_(e);t=Ne(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(d),s.forEach(d),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",r[1]),f(e,"stroke","currentColor"),f(e,"class",r[0])},m(l,s){F(l,e,s),h(e,t)},p(l,[s]){s&2&&f(e,"stroke-width",l[1]),s&1&&f(e,"class",l[0])},i:le,o:le,d(l){l&&d(e)}}}function Gt(r,e,t){let{className:l="size-4"}=e,{strokeWidth:s="1.5"}=e;return r.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,s=a.strokeWidth)},[l,s]}class Jt extends $e{constructor(e){super(),ye(this,e,Gt,Xt,ke,{className:0,strokeWidth:1})}}function Qt(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,s;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(a){e=p(a,"BUTTON",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-1ypygjl"&&(e.innerHTML=t),this.h()},h(){f(e,"class","px-2 py-2 rounded-xl border border-gray-50 dark:border-gray-600 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1")},m(a,i){F(a,e,i),l||(s=ce(e,"click",r[9]),l=!0)},p:le,d(a){a&&d(e),l=!1,s()}}}function Yt(r){let e,t;return e=new st({props:{content:r[2].t("Add Content"),$$slots:{default:[Qt]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const a={};s&4&&(a.content=l[2].t("Add Content")),s&4098&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Zt(r){let e,t,l,s=r[2].t("Upload files")+"",a,i;return e=new Ft({props:{strokeWidth:"2"}}),{c(){Q(e.$$.fragment),t=z(),l=m("div"),a=pe(s),this.h()},l(n){Y(e.$$.fragment,n),t=H(n),l=p(n,"DIV",{class:!0});var o=_(l);a=ge(o,s),o.forEach(d),this.h()},h(){f(l,"class","flex items-center")},m(n,o){Z(e,n,o),F(n,t,o),F(n,l,o),h(l,a),i=!0},p(n,o){(!i||o&4)&&s!==(s=n[2].t("Upload files")+"")&&ve(a,s)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){T(e.$$.fragment,n),i=!1},d(n){n&&(d(t),d(l)),ee(e,n)}}}function el(r){let e,t,l,s=r[2].t("Upload directory")+"",a,i;return e=new Rt({props:{strokeWidth:"2"}}),{c(){Q(e.$$.fragment),t=z(),l=m("div"),a=pe(s),this.h()},l(n){Y(e.$$.fragment,n),t=H(n),l=p(n,"DIV",{class:!0});var o=_(l);a=ge(o,s),o.forEach(d),this.h()},h(){f(l,"class","flex items-center")},m(n,o){Z(e,n,o),F(n,t,o),F(n,l,o),h(l,a),i=!0},p(n,o){(!i||o&4)&&s!==(s=n[2].t("Upload directory")+"")&&ve(a,s)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){T(e.$$.fragment,n),i=!1},d(n){n&&(d(t),d(l)),ee(e,n)}}}function tl(r){let e,t,l,s=r[2].t("Sync directory")+"",a,i;return e=new Jt({props:{strokeWidth:"2"}}),{c(){Q(e.$$.fragment),t=z(),l=m("div"),a=pe(s),this.h()},l(n){Y(e.$$.fragment,n),t=H(n),l=p(n,"DIV",{class:!0});var o=_(l);a=ge(o,s),o.forEach(d),this.h()},h(){f(l,"class","flex items-center")},m(n,o){Z(e,n,o),F(n,t,o),F(n,l,o),h(l,a),i=!0},p(n,o){(!i||o&4)&&s!==(s=n[2].t("Sync directory")+"")&&ve(a,s)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){T(e.$$.fragment,n),i=!1},d(n){n&&(d(t),d(l)),ee(e,n)}}}function ll(r){let e,t;return e=new Ue({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[tl]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){Q(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const a={};s&4100&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function sl(r){let e,t,l,s=r[2].t("Add text content")+"",a,i;return e=new Kt({props:{strokeWidth:"2"}}),{c(){Q(e.$$.fragment),t=z(),l=m("div"),a=pe(s),this.h()},l(n){Y(e.$$.fragment,n),t=H(n),l=p(n,"DIV",{class:!0});var o=_(l);a=ge(o,s),o.forEach(d),this.h()},h(){f(l,"class","flex items-center")},m(n,o){Z(e,n,o),F(n,t,o),F(n,l,o),h(l,a),i=!0},p(n,o){(!i||o&4)&&s!==(s=n[2].t("Add text content")+"")&&ve(a,s)},i(n){i||(V(e.$$.fragment,n),i=!0)},o(n){T(e.$$.fragment,n),i=!1},d(n){n&&(d(t),d(l)),ee(e,n)}}}function rl(r){let e,t,l,s,a,i,n,o;return e=new Ue({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Zt]},$$scope:{ctx:r}}}),e.$on("click",r[5]),l=new Ue({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[el]},$$scope:{ctx:r}}}),l.$on("click",r[6]),a=new st({props:{content:r[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[ll]},$$scope:{ctx:r}}}),n=new Ue({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[sl]},$$scope:{ctx:r}}}),n.$on("click",r[8]),{c(){Q(e.$$.fragment),t=z(),Q(l.$$.fragment),s=z(),Q(a.$$.fragment),i=z(),Q(n.$$.fragment)},l(c){Y(e.$$.fragment,c),t=H(c),Y(l.$$.fragment,c),s=H(c),Y(a.$$.fragment,c),i=H(c),Y(n.$$.fragment,c)},m(c,g){Z(e,c,g),F(c,t,g),Z(l,c,g),F(c,s,g),Z(a,c,g),F(c,i,g),Z(n,c,g),o=!0},p(c,g){const E={};g&4100&&(E.$$scope={dirty:g,ctx:c}),e.$set(E);const k={};g&4100&&(k.$$scope={dirty:g,ctx:c}),l.$set(k);const $={};g&4&&($.content=c[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),g&4100&&($.$$scope={dirty:g,ctx:c}),a.$set($);const w={};g&4100&&(w.$$scope={dirty:g,ctx:c}),n.$set(w)},i(c){o||(V(e.$$.fragment,c),V(l.$$.fragment,c),V(a.$$.fragment,c),V(n.$$.fragment,c),o=!0)},o(c){T(e.$$.fragment,c),T(l.$$.fragment,c),T(a.$$.fragment,c),T(n.$$.fragment,c),o=!1},d(c){c&&(d(t),d(s),d(i)),ee(e,c),ee(l,c),ee(a,c),ee(n,c)}}}function nl(r){let e,t,l;return t=new Ct({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:4,side:"bottom",align:"end",transition:Vt,$$slots:{default:[rl]},$$scope:{ctx:r}}}),{c(){e=m("div"),Q(t.$$.fragment),this.h()},l(s){e=p(s,"DIV",{slot:!0});var a=_(e);Y(t.$$.fragment,a),a.forEach(d),this.h()},h(){f(e,"slot","content")},m(s,a){F(s,e,a),Z(t,e,null),l=!0},p(s,a){const i={};a&4100&&(i.$$scope={dirty:a,ctx:s}),t.$set(i)},i(s){l||(V(t.$$.fragment,s),l=!0)},o(s){T(t.$$.fragment,s),l=!1},d(s){s&&d(e),ee(t)}}}function ol(r){let e,t,l;function s(i){r[10](i)}let a={align:"end",$$slots:{content:[nl],default:[Yt]},$$scope:{ctx:r}};return r[1]!==void 0&&(a.show=r[1]),e=new Dt({props:a}),je.push(()=>Oe(e,"show",s)),e.$on("change",r[11]),{c(){Q(e.$$.fragment)},l(i){Y(e.$$.fragment,i)},m(i,n){Z(e,i,n),l=!0},p(i,[n]){const o={};n&4102&&(o.$$scope={dirty:n,ctx:i}),!t&&n&2&&(t=!0,o.show=i[1],Ke(()=>t=!1)),e.$set(o)},i(i){l||(V(e.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),l=!1},d(i){ee(e,i)}}}function al(r,e,t){let l;const s=Re(),a=Xe("i18n");Pe(r,a,b=>t(2,l=b));let{onClose:i=()=>{}}=e,n=!1;const o=()=>{s("upload",{type:"files"})},c=()=>{s("upload",{type:"directory"})},g=()=>{s("sync",{type:"directory"})},E=()=>{s("upload",{type:"text"})},k=b=>{b.stopPropagation(),t(1,n=!0)};function $(b){n=b,t(1,n)}const w=b=>{b.detail===!1&&i()};return r.$$set=b=>{"onClose"in b&&t(0,i=b.onClose)},[i,n,l,s,a,o,c,g,E,k,$,w]}class il extends $e{constructor(e){super(),ye(this,e,al,ol,ke,{onClose:0})}}function tt(r){let e,t,l,s,a,i,n;return a=new rt({props:{$$slots:{default:[cl]},$$scope:{ctx:r}}}),{c(){e=m("div"),t=m("div"),l=m("div"),s=m("div"),Q(a.$$.fragment),this.h()},l(o){e=p(o,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var c=_(e);t=p(c,"DIV",{class:!0});var g=_(t);l=p(g,"DIV",{class:!0});var E=_(l);s=p(E,"DIV",{class:!0});var k=_(s);Y(a.$$.fragment,k),k.forEach(d),E.forEach(d),g.forEach(d),c.forEach(d),this.h()},h(){f(s,"class","max-w-md"),f(l,"class","m-auto pt-64 flex flex-col justify-center"),f(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),f(e,"class",i="fixed "+(r[12]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),f(e,"id","dropzone"),f(e,"role","region"),f(e,"aria-label","Drag and Drop Container")},m(o,c){F(o,e,c),h(e,t),h(t,l),h(l,s),Z(a,s,null),n=!0},p(o,c){const g={};c[1]&2097152&&(g.$$scope={dirty:c,ctx:o}),a.$set(g),(!n||c[0]&4096&&i!==(i="fixed "+(o[12]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&f(e,"class",i)},i(o){n||(V(a.$$.fragment,o),n=!0)},o(o){T(a.$$.fragment,o),n=!1},d(o){o&&d(e),ee(a)}}}function cl(r){let e,t="Drop any files here to add to my documents";return{c(){e=m("div"),e.textContent=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){f(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,s){F(l,e,s)},p:le,d(l){l&&d(e)}}}function fl(r){let e,t;return e=new yt({}),{c(){Q(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:le,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function dl(r){let e,t,l,s,a,i,n,o,c,g,E,k,$,w,b,M,U,K,I,y,B='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',S,W,re,N,ne,O,de,oe,se,L,R,v,A,P,X,ae;c=new Bt({props:{type:"success",content:"Collection"}}),O=new il({}),O.$on("upload",r[34]),O.$on("sync",r[35]);const Ie=[hl,ul],fe=[];function Ee(C,G){return C[8].length>0?0:1}L=Ee(r),R=fe[L]=Ie[L](r);let j=r[3]&&lt(r);return{c(){e=m("div"),t=m("div"),l=m("div"),s=m("div"),a=m("input"),i=z(),n=m("div"),o=m("div"),Q(c.$$.fragment),g=z(),E=m("div"),k=m("input"),$=z(),w=m("div"),b=m("div"),M=m("div"),U=m("div"),K=m("div"),I=m("div"),y=m("div"),y.innerHTML=B,S=z(),W=m("input"),N=z(),ne=m("div"),Q(O.$$.fragment),de=z(),oe=m("hr"),se=z(),R.c(),A=z(),j&&j.c(),this.h()},l(C){e=p(C,"DIV",{class:!0});var G=_(e);t=p(G,"DIV",{class:!0});var ie=_(t);l=p(ie,"DIV",{class:!0});var _e=_(l);s=p(_e,"DIV",{class:!0});var we=_(s);a=p(we,"INPUT",{type:!0,class:!0}),we.forEach(d),i=H(_e),n=p(_e,"DIV",{class:!0});var De=_(n);o=p(De,"DIV",{});var Ce=_(o);Y(c.$$.fragment,Ce),Ce.forEach(d),De.forEach(d),_e.forEach(d),g=H(ie),E=p(ie,"DIV",{class:!0});var Ve=_(E);k=p(Ve,"INPUT",{type:!0,class:!0}),Ve.forEach(d),ie.forEach(d),G.forEach(d),$=H(C),w=p(C,"DIV",{class:!0});var Fe=_(w);b=p(Fe,"DIV",{class:!0});var ze=_(b);M=p(ze,"DIV",{class:!0});var He=_(M);U=p(He,"DIV",{class:!0});var Te=_(U);K=p(Te,"DIV",{class:!0});var Ae=_(K);I=p(Ae,"DIV",{class:!0});var u=_(I);y=p(u,"DIV",{class:!0,"data-svelte-h":!0}),be(y)!=="svelte-13evlr2"&&(y.innerHTML=B),S=H(u),W=p(u,"INPUT",{class:!0,placeholder:!0}),N=H(u),ne=p(u,"DIV",{});var x=_(ne);Y(O.$$.fragment,x),x.forEach(d),u.forEach(d),de=H(Ae),oe=p(Ae,"HR",{class:!0}),Ae.forEach(d),se=H(Te),R.l(Te),Te.forEach(d),He.forEach(d),ze.forEach(d),A=H(Fe),j&&j.l(Fe),Fe.forEach(d),this.h()},h(){f(a,"type","text"),f(a,"class","w-full font-medium text-2xl font-primary bg-transparent outline-none"),f(s,"class","w-full"),f(n,"class","flex-shrink-0"),f(l,"class","flex items-center justify-between w-full px-0.5 mb-1"),f(k,"type","text"),f(k,"class","w-full text-gray-500 text-sm bg-transparent outline-none"),f(E,"class","flex w-full px-1"),f(t,"class","flex-1"),f(e,"class","flex w-full mt-1 mb-3.5"),f(y,"class","self-center ml-1 mr-3"),f(W,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),f(W,"placeholder",re=r[11].t("Search Collection")),f(I,"class","flex"),f(oe,"class","mt-2 mb-1 border-gray-50 dark:border-gray-850"),f(K,"class","px-3"),f(U,"class","w-full h-full flex flex-col"),f(M,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),f(b,"class",v=(r[3]?"flex-shrink-0":"flex-1")+" flex py-2.5 w-80 rounded-2xl border border-gray-50 dark:border-gray-850"),f(w,"class","flex flex-row h-0 flex-1 overflow-auto")},m(C,G){F(C,e,G),h(e,t),h(t,l),h(l,s),h(s,a),ue(a,r[0].name),h(l,i),h(l,n),h(n,o),Z(c,o,null),h(t,g),h(t,E),h(E,k),ue(k,r[0].description),F(C,$,G),F(C,w,G),h(w,b),h(b,M),h(M,U),h(U,K),h(K,I),h(I,y),h(I,S),h(I,W),ue(W,r[1]),h(I,N),h(I,ne),Z(O,ne,null),h(K,de),h(K,oe),h(U,se),fe[L].m(U,null),h(w,A),j&&j.m(w,null),P=!0,X||(ae=[ce(a,"input",r[29]),ce(a,"input",r[30]),ce(k,"input",r[31]),ce(k,"input",r[32]),ce(W,"input",r[33])],X=!0)},p(C,G){G[0]&1&&a.value!==C[0].name&&ue(a,C[0].name),G[0]&1&&k.value!==C[0].description&&ue(k,C[0].description),(!P||G[0]&2048&&re!==(re=C[11].t("Search Collection")))&&f(W,"placeholder",re),G[0]&2&&W.value!==C[1]&&ue(W,C[1]);let ie=L;L=Ee(C),L===ie?fe[L].p(C,G):(Se(),T(fe[ie],1,1,()=>{fe[ie]=null}),We(),R=fe[L],R?R.p(C,G):(R=fe[L]=Ie[L](C),R.c()),V(R,1),R.m(U,null)),(!P||G[0]&8&&v!==(v=(C[3]?"flex-shrink-0":"flex-1")+" flex py-2.5 w-80 rounded-2xl border border-gray-50 dark:border-gray-850"))&&f(b,"class",v),C[3]?j?(j.p(C,G),G[0]&8&&V(j,1)):(j=lt(C),j.c(),V(j,1),j.m(w,null)):j&&(Se(),T(j,1,1,()=>{j=null}),We())},i(C){P||(V(c.$$.fragment,C),V(O.$$.fragment,C),V(R),V(j),P=!0)},o(C){T(c.$$.fragment,C),T(O.$$.fragment,C),T(R),T(j),P=!1},d(C){C&&(d(e),d($),d(w)),ee(c),ee(O),fe[L].d(),j&&j.d(),X=!1,qe(ae)}}}function ul(r){let e,t="No content found";return{c(){e=m("div"),e.textContent=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-82mg0"&&(e.textContent=t),this.h()},h(){f(e,"class","m-auto text-gray-500 text-xs")},m(l,s){F(l,e,s)},p:le,i:le,o:le,d(l){l&&d(e)}}}function hl(r){let e,t,l;return t=new Wt({props:{files:r[8],selectedFileId:r[2]}}),t.$on("click",r[36]),t.$on("delete",r[37]),{c(){e=m("div"),Q(t.$$.fragment),this.h()},l(s){e=p(s,"DIV",{class:!0});var a=_(e);Y(t.$$.fragment,a),a.forEach(d),this.h()},h(){f(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(s,a){F(s,e,a),Z(t,e,null),l=!0},p(s,a){const i={};a[0]&256&&(i.files=s[8]),a[0]&4&&(i.selectedFileId=s[2]),t.$set(i)},i(s){l||(V(t.$$.fragment,s),l=!0)},o(s){T(t.$$.fragment,s),l=!1},d(s){s&&d(e),ee(t)}}}function lt(r){let e,t,l,s;const a=[pl,ml],i=[];function n(o,c){return o[9]?0:1}return t=n(r),l=i[t]=a[t](r),{c(){e=m("div"),l.c(),this.h()},l(o){e=p(o,"DIV",{class:!0});var c=_(e);l.l(c),c.forEach(d),this.h()},h(){f(e,"class","flex-1 flex justify-start max-h-full overflow-hidden pl-3")},m(o,c){F(o,e,c),i[t].m(e,null),s=!0},p(o,c){let g=t;t=n(o),t===g?i[t].p(o,c):(Se(),T(i[g],1,1,()=>{i[g]=null}),We(),l=i[t],l?l.p(o,c):(l=i[t]=a[t](o),l.c()),V(l,1),l.m(e,null))},i(o){s||(V(l),s=!0)},o(o){T(l),s=!1},d(o){o&&d(e),i[t].d()}}}function ml(r){let e,t,l;return t=new rt({props:{title:r[11].t("Select/Add Files"),$$slots:{default:[gl]},$$scope:{ctx:r}}}),{c(){e=m("div"),Q(t.$$.fragment),this.h()},l(s){e=p(s,"DIV",{class:!0});var a=_(e);Y(t.$$.fragment,a),a.forEach(d),this.h()},h(){f(e,"class","m-auto")},m(s,a){F(s,e,a),Z(t,e,null),l=!0},p(s,a){const i={};a[0]&2048&&(i.title=s[11].t("Select/Add Files")),a[1]&2097152&&(i.$$scope={dirty:a,ctx:s}),t.$set(i)},i(s){l||(V(t.$$.fragment,s),l=!0)},o(s){T(t.$$.fragment,s),l=!1},d(s){s&&d(e),ee(t)}}}function pl(r){var U,K;let e,t,l,s=((K=(U=r[9])==null?void 0:U.meta)==null?void 0:K.name)+"",a,i,n,o,c=r[11].t("Save")+"",g,E,k,$,w,b,M;return{c(){e=m("div"),t=m("div"),l=m("div"),a=pe(s),i=z(),n=m("div"),o=m("button"),g=pe(c),E=z(),k=m("div"),$=m("textarea"),this.h()},l(I){e=p(I,"DIV",{class:!0});var y=_(e);t=p(y,"DIV",{class:!0});var B=_(t);l=p(B,"DIV",{class:!0});var S=_(l);a=ge(S,s),S.forEach(d),i=H(B),n=p(B,"DIV",{});var W=_(n);o=p(W,"BUTTON",{class:!0});var re=_(o);g=ge(re,c),re.forEach(d),W.forEach(d),B.forEach(d),E=H(y),k=p(y,"DIV",{class:!0});var N=_(k);$=p(N,"TEXTAREA",{class:!0,placeholder:!0}),_($).forEach(d),N.forEach(d),y.forEach(d),this.h()},h(){f(l,"class","flex-1 text-xl line-clamp-1"),f(o,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),f(t,"class","flex-shrink-0 mb-2 flex items-center"),f($,"class","w-full h-full resize-none rounded-xl py-4 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-none"),f($,"placeholder",w=r[11].t("Add content here")),f(k,"class","flex-grow"),f(e,"class","flex flex-col w-full h-full")},m(I,y){F(I,e,y),h(e,t),h(t,l),h(l,a),h(t,i),h(t,n),h(n,o),h(o,g),h(e,E),h(e,k),h(k,$),ue($,r[9].data.content),b||(M=[ce(o,"click",r[38]),ce($,"input",r[39])],b=!0)},p(I,y){var B,S;y[0]&512&&s!==(s=((S=(B=I[9])==null?void 0:B.meta)==null?void 0:S.name)+"")&&ve(a,s),y[0]&2048&&c!==(c=I[11].t("Save")+"")&&ve(g,c),y[0]&2048&&w!==(w=I[11].t("Add content here"))&&f($,"placeholder",w),y[0]&512&&ue($,I[9].data.content)},i:le,o:le,d(I){I&&d(e),b=!1,qe(M)}}}function gl(r){let e,t="Select a file to view or drag and drop a file to upload";return{c(){e=m("div"),e.textContent=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-1f8ipyt"&&(e.textContent=t),this.h()},h(){f(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,s){F(l,e,s)},p:le,d(l){l&&d(e)}}}function vl(r){let e,t,l,s,a,i,n,o,c,g,E,k,$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',w,b,M=r[11].t("Back")+"",U,K,I,y,B,S,W,re,N=r[10]&&tt(r);function ne(v){r[22](v)}let O={message:r[11].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};r[6]!==void 0&&(O.show=r[6]),t=new Tt({props:O}),je.push(()=>Oe(t,"show",ne)),t.$on("confirm",r[23]);function de(v){r[24](v)}let oe={};r[5]!==void 0&&(oe.show=r[5]),a=new Ht({props:oe}),je.push(()=>Oe(a,"show",de)),a.$on("submit",r[25]);const se=[dl,fl],L=[];function R(v,A){return v[4]&&v[0]?0:1}return y=R(r),B=L[y]=se[y](r),{c(){N&&N.c(),e=z(),Q(t.$$.fragment),s=z(),Q(a.$$.fragment),n=z(),o=m("input"),c=z(),g=m("div"),E=m("button"),k=m("div"),k.innerHTML=$,w=z(),b=m("div"),U=pe(M),K=z(),I=m("div"),B.c(),this.h()},l(v){N&&N.l(v),e=H(v),Y(t.$$.fragment,v),s=H(v),Y(a.$$.fragment,v),n=H(v),o=p(v,"INPUT",{id:!0,type:!0}),c=H(v),g=p(v,"DIV",{class:!0});var A=_(g);E=p(A,"BUTTON",{class:!0});var P=_(E);k=p(P,"DIV",{class:!0,"data-svelte-h":!0}),be(k)!=="svelte-1klo87r"&&(k.innerHTML=$),w=H(P),b=p(P,"DIV",{class:!0});var X=_(b);U=ge(X,M),X.forEach(d),P.forEach(d),K=H(A),I=p(A,"DIV",{class:!0});var ae=_(I);B.l(ae),ae.forEach(d),A.forEach(d),this.h()},h(){f(o,"id","files-input"),f(o,"type","file"),o.multiple=!0,o.hidden=!0,f(k,"class","self-center"),f(b,"class","self-center font-medium text-sm"),f(E,"class","flex space-x-1 w-fit"),f(I,"class","flex flex-col my-2 flex-1 overflow-auto h-0"),f(g,"class","flex flex-col w-full max-h-[100dvh] h-full")},m(v,A){N&&N.m(v,A),F(v,e,A),Z(t,v,A),F(v,s,A),Z(a,v,A),F(v,n,A),F(v,o,A),F(v,c,A),F(v,g,A),h(g,E),h(E,k),h(E,w),h(E,b),h(b,U),h(g,K),h(g,I),L[y].m(I,null),S=!0,W||(re=[ce(o,"change",r[26]),ce(o,"change",r[27]),ce(E,"click",r[28])],W=!0)},p(v,A){v[10]?N?(N.p(v,A),A[0]&1024&&V(N,1)):(N=tt(v),N.c(),V(N,1),N.m(e.parentNode,e)):N&&(Se(),T(N,1,1,()=>{N=null}),We());const P={};A[0]&2048&&(P.message=v[11].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&A[0]&64&&(l=!0,P.show=v[6],Ke(()=>l=!1)),t.$set(P);const X={};!i&&A[0]&32&&(i=!0,X.show=v[5],Ke(()=>i=!1)),a.$set(X),(!S||A[0]&2048)&&M!==(M=v[11].t("Back")+"")&&ve(U,M);let ae=y;y=R(v),y===ae?L[y].p(v,A):(Se(),T(L[ae],1,1,()=>{L[ae]=null}),We(),B=L[y],B?B.p(v,A):(B=L[y]=se[y](v),B.c()),V(B,1),B.m(I,null))},i(v){S||(V(N),V(t.$$.fragment,v),V(a.$$.fragment,v),V(B),S=!0)},o(v){T(N),T(t.$$.fragment,v),T(a.$$.fragment,v),T(B),S=!1},d(v){v&&(d(e),d(s),d(n),d(o),d(c),d(g)),N&&N.d(v),ee(t,v),ee(a,v),L[y].d(),W=!1,qe(re)}}}function _l(r,e,t){let l,s,a;Pe(r,dt,u=>t(42,l=u)),Pe(r,ut,u=>t(12,a=u));const i=Xe("i18n");Pe(r,i,u=>t(11,s=u));let n=!0,o=null,c=null,g="",E=!1,k=!1,$=null,w=[],b=null,M=null,U=null,K=null,I,y=!1;const B=(u,x)=>{const D=new Blob([x],{type:"text/plain"}),q=Ye(D,`${u}.md`);return console.log(q),q},S=async u=>{console.log(u);const x={type:"file",file:"",id:null,url:"",name:u.name,size:u.size,status:"uploading",error:""};if(t(0,c.files=[...c.files??[],x],c),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(u.type)){const D=await Et(localStorage.token,u).catch(q=>(J.error(q),null));if(D){console.log(D);const q=new Blob([D.text],{type:"text/plain"});u=Ye(q,`${u.name}.txt`)}}try{const D=await mt(localStorage.token,u).catch(q=>{J.error(q)});D?(console.log(D),await oe(D.id)):J.error(s.t("Failed to upload file."))}catch(D){J.error(D)}},W=async()=>{const u="showDirectoryPicker"in window;try{u?await N():await ne()}catch(x){O(x)}},re=u=>u.split("/").some(x=>x.startsWith(".")),N=async()=>{const u=await window.showDirectoryPicker();let x=0,D=0;const q=()=>{const xe=D/x*100;J.info(`Upload Progress: ${D}/${x} (${xe.toFixed(2)}%)`)};async function he(xe){for await(const te of xe.values())te.name.startsWith(".")||(te.kind==="file"?x++:te.kind==="directory"&&(te.name.startsWith(".")||await he(te)))}async function Me(xe,te=""){for await(const me of xe.values()){if(me.name.startsWith("."))continue;const Le=te?`${te}/${me.name}`:me.name;if(!re(Le))if(me.kind==="file"){const Ge=await me.getFile(),nt=new File([Ge],Le,{type:Ge.type});await S(nt),D++,q()}else me.kind==="directory"&&(me.name.startsWith(".")||await Me(me,Le))}}await he(u),q(),x>0?await Me(u):console.log("No files to upload.")},ne=async()=>new Promise((u,x)=>{const D=document.createElement("input");D.type="file",D.webkitdirectory=!0,D.directory=!0,D.multiple=!0,D.style.display="none",document.body.appendChild(D),D.onchange=async()=>{try{const q=Array.from(D.files).filter(te=>!re(te.webkitRelativePath));let he=q.length,Me=0;const xe=()=>{const te=Me/he*100;J.info(`Upload Progress: ${Me}/${he} (${te.toFixed(2)}%)`)};xe();for(const te of q)if(!te.name.startsWith(".")){const me=te.webkitRelativePath||te.name,Le=new File([te],me,{type:te.type});await S(Le),Me++,xe()}document.body.removeChild(D),u()}catch(q){x(q)}},D.onerror=q=>{document.body.removeChild(D),x(q)},D.click()}),O=u=>{u.name==="AbortError"?J.info("Directory selection was cancelled"):(J.error("Error accessing directory"),console.error("Directory access error:",u))},de=async()=>{if(((c==null?void 0:c.files)??[]).length>0){const u=await vt(localStorage.token,o).catch(x=>{J.error(x)});u&&(t(0,c=u),J.success(s.t("Knowledge reset successfully.")),W())}else W()},oe=async u=>{const x=await _t(localStorage.token,o,u).catch(D=>{J.error(D)});x&&(t(0,c=x),J.success(s.t("File added successfully.")))},se=async u=>{const x=await wt(localStorage.token,o,u).catch(D=>{J.error(D)});x&&(t(0,c=x),J.success(s.t("File removed successfully.")))},L=async()=>{const u=b.id,x=b.data.content,D=pt(localStorage.token,u,x).catch(he=>{J.error(he)}),q=await bt(localStorage.token,o,u).catch(he=>{J.error(he)});D&&q&&(t(0,c=q),J.success(s.t("File content updated successfully.")))},R=()=>{console.log("debounce"),K&&clearTimeout(K),K=setTimeout(async()=>{if(c.name.trim()===""||c.description.trim()===""){J.error(s.t("Please fill in all fields."));return}await kt(localStorage.token,o,{name:c.name,description:c.description}).catch(x=>{J.error(x)})&&(J.success(s.t("Knowledge updated successfully")),ht.set(await $t(localStorage.token)))},1e3)},v=async u=>{u.matches?t(3,n=!0):t(3,n=!1)},A=u=>{u.preventDefault(),t(10,y=!0)},P=()=>{t(10,y=!1)},X=async u=>{var x,D;if(u.preventDefault(),t(10,y=!1),(x=u.dataTransfer)!=null&&x.files){const q=(D=u.dataTransfer)==null?void 0:D.files;if(q&&q.length>0)for(const he of q)await S(he);else J.error(s.t("File not found."))}};it(async()=>{I=window.matchMedia("(min-width: 1024px)"),I.addEventListener("change",v),v(I),t(4,o=l.params.id);const u=await gt(localStorage.token,o).catch(D=>(J.error(D),null));u?t(0,c=u):Je("/workspace/knowledge");const x=document.querySelector("body");x==null||x.addEventListener("dragover",A),x==null||x.addEventListener("drop",X),x==null||x.addEventListener("dragleave",P)}),ct(()=>{I==null||I.removeEventListener("change",v);const u=document.querySelector("body");u==null||u.removeEventListener("dragover",A),u==null||u.removeEventListener("drop",X),u==null||u.removeEventListener("dragleave",P)});function ae(u){k=u,t(6,k)}const Ie=()=>{de()};function fe(u){E=u,t(5,E)}const Ee=u=>{const x=B(u.detail.name,u.detail.content);S(x)};function j(){$=this.files,t(7,$)}const C=()=>{if($&&$.length>0){for(const x of $)S(x);t(7,$=null);const u=document.getElementById("files-input");u&&(u.value="")}else J.error(s.t("File not found."))},G=()=>{Je("/workspace/knowledge")};function ie(){c.name=this.value,t(0,c)}const _e=()=>{R()};function we(){c.description=this.value,t(0,c)}const De=()=>{R()};function Ce(){g=this.value,t(1,g)}const Ve=u=>{u.detail.type==="directory"?W():u.detail.type==="text"?t(5,E=!0):document.getElementById("files-input").click()},Fe=u=>{t(6,k=!0)},ze=u=>{t(2,M=u.detail)},He=u=>{console.log(u.detail),t(2,M=null),se(u.detail)},Te=()=>{L()};function Ae(){b.data.content=this.value,t(9,b),t(2,M),t(0,c)}return r.$$.update=()=>{if(r.$$.dirty[0]&1&&c&&t(21,U=new ft(c.files,{keys:["meta.name","meta.description"]})),r.$$.dirty[0]&2097155&&U&&t(8,w=g?U.search(g).map(u=>u.item):(c==null?void 0:c.files)??[]),r.$$.dirty[0]&5)if(M){const u=((c==null?void 0:c.files)??[]).find(x=>x.id===M);u?(u.data=u.data??{content:""},t(9,b=u)):t(9,b=null)}else t(9,b=null)},[c,g,M,n,o,E,k,$,w,b,y,s,a,i,B,S,W,de,se,L,R,U,ae,Ie,fe,Ee,j,C,G,ie,_e,we,De,Ce,Ve,Fe,ze,He,Te,Ae]}class wl extends $e{constructor(e){super(),ye(this,e,_l,vl,ke,{},null,[-1,-1])}}function bl(r){let e,t;return e=new wl({}),{c(){Q(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:le,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}class Kl extends $e{constructor(e){super(),ye(this,e,null,bl,ke,{})}}export{Kl as component};
//# sourceMappingURL=16.D5RD81Q6.js.map
