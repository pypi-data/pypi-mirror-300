import{s as Oe,A as Ee,e as n,k as A,t as O,c as i,a as h,B as Re,o as U,b as R,d,f as s,i as ke,g as e,C as X,u as se,D as We,h as W,E as Fe,F as Ge,p as Ke,j as Ye,G as ze,H as be}from"./scheduler.Dyt_jldW.js";import{S as Je,i as Qe,f as Xe,b as Ue,d as He,m as Ne,t as Me,a as Se,e as je}from"./index.g9C97g6-.js";import{C as Ze}from"./CodeEditor.B1Pqv6G3.js";import{g as $e}from"./entry.Dyv90Pv0.js";import{C as et}from"./ConfirmDialog.BEvjqHNe.js";function tt(t){let u,a,_,D=t[9].t("Please carefully review the following warnings:")+"",v,y,I,x,w=t[9].t("Tools have a function calling system that allows arbitrary code execution.")+"",b,E,q,f=t[9].t("Do not install tools from sources you do not fully trust.")+"",p,C,c,H=t[9].t("I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.")+"",S;return{c(){u=n("div"),a=n("div"),_=n("div"),v=O(D),y=A(),I=n("ul"),x=n("li"),b=O(w),E=A(),q=n("li"),p=O(f),C=A(),c=n("div"),S=O(H),this.h()},l(l){u=i(l,"DIV",{class:!0});var g=h(u);a=i(g,"DIV",{class:!0});var j=h(a);_=i(j,"DIV",{});var k=h(_);v=R(k,D),k.forEach(d),y=U(j),I=i(j,"UL",{class:!0});var N=h(I);x=i(N,"LI",{});var F=h(x);b=R(F,w),F.forEach(d),E=U(N),q=i(N,"LI",{});var M=h(q);p=R(M,f),M.forEach(d),N.forEach(d),j.forEach(d),C=U(g),c=i(g,"DIV",{class:!0});var T=h(c);S=R(T,H),T.forEach(d),g.forEach(d),this.h()},h(){s(I,"class","mt-1 list-disc pl-4 text-xs"),s(a,"class","bg-yellow-500/20 text-yellow-700 dark:text-yellow-200 rounded-lg px-4 py-3"),s(c,"class","my-3"),s(u,"class","text-sm text-gray-500")},m(l,g){ke(l,u,g),e(u,a),e(a,_),e(_,v),e(a,y),e(a,I),e(I,x),e(x,b),e(I,E),e(I,q),e(q,p),e(u,C),e(u,c),e(c,S)},p(l,g){g&512&&D!==(D=l[9].t("Please carefully review the following warnings:")+"")&&W(v,D),g&512&&w!==(w=l[9].t("Tools have a function calling system that allows arbitrary code execution.")+"")&&W(b,w),g&512&&f!==(f=l[9].t("Do not install tools from sources you do not fully trust.")+"")&&W(p,f),g&512&&H!==(H=l[9].t("I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.")+"")&&W(S,H)},d(l){l&&d(u)}}}function at(t){let u,a,_,D,v,y,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',x,w,b=t[9].t("Back")+"",E,q,f,p,C,c,H,S,l,g,j,k,N,F,M,T,Z,B,G,P,o,$=t[9].t("Warning:")+"",oe,he,ee=t[9].t("Tools are a function calling system with arbitrary code execution")+"",le,_e,pe,ge,J,te=t[9].t("don't install random tools from sources you don't trust.")+"",ne,ve,z,ae=t[9].t("Save")+"",ie,ue,L,ye,V,we,Ie,Be={value:t[1],boilerplate:t[11],lang:"python"};T=new Ze({props:Be}),t[18](T),T.$on("change",t[19]),T.$on("save",t[20]);function Le(r){t[23](r)}let Te={$$slots:{default:[tt]},$$scope:{ctx:t}};return t[6]!==void 0&&(Te.show=t[6]),L=new et({props:Te}),Ee.push(()=>Xe(L,"show",Le)),L.$on("confirm",t[24]),{c(){u=n("div"),a=n("div"),_=n("form"),D=n("div"),v=n("button"),y=n("div"),y.innerHTML=I,x=A(),w=n("div"),E=O(b),q=A(),f=n("div"),p=n("div"),C=n("div"),c=n("input"),S=A(),l=n("input"),j=A(),k=n("input"),F=A(),M=n("div"),Ue(T.$$.fragment),Z=A(),B=n("div"),G=n("div"),P=n("div"),o=n("span"),oe=O($),he=A(),le=O(ee),_e=A(),pe=n("br"),ge=O(`—
							`),J=n("span"),ne=O(te),ve=A(),z=n("button"),ie=O(ae),ue=A(),Ue(L.$$.fragment),this.h()},l(r){u=i(r,"DIV",{class:!0});var m=h(u);a=i(m,"DIV",{class:!0});var re=h(a);_=i(re,"FORM",{class:!0});var K=h(_);D=i(K,"DIV",{class:!0});var De=h(D);v=i(De,"BUTTON",{class:!0,type:!0});var de=h(v);y=i(de,"DIV",{class:!0,"data-svelte-h":!0}),Re(y)!=="svelte-1t52rj4"&&(y.innerHTML=I),x=U(de),w=i(de,"DIV",{class:!0});var xe=h(w);E=R(xe,b),xe.forEach(d),de.forEach(d),De.forEach(d),q=U(K),f=i(K,"DIV",{class:!0});var Q=h(f);p=i(Q,"DIV",{class:!0});var ce=h(p);C=i(ce,"DIV",{class:!0});var fe=h(C);c=i(fe,"INPUT",{class:!0,type:!0,placeholder:!0}),S=U(fe),l=i(fe,"INPUT",{class:!0,type:!0,placeholder:!0}),fe.forEach(d),j=U(ce),k=i(ce,"INPUT",{class:!0,type:!0,placeholder:!0}),ce.forEach(d),F=U(Q),M=i(Q,"DIV",{class:!0});var qe=h(M);He(T.$$.fragment,qe),qe.forEach(d),Z=U(Q),B=i(Q,"DIV",{class:!0});var me=h(B);G=i(me,"DIV",{class:!0});var Ce=h(G);P=i(Ce,"DIV",{class:!0});var Y=h(P);o=i(Y,"SPAN",{class:!0});var Pe=h(o);oe=R(Pe,$),Pe.forEach(d),he=U(Y),le=R(Y,ee),_e=U(Y),pe=i(Y,"BR",{}),ge=R(Y,`—
							`),J=i(Y,"SPAN",{class:!0});var Ve=h(J);ne=R(Ve,te),Ve.forEach(d),Y.forEach(d),Ce.forEach(d),ve=U(me),z=i(me,"BUTTON",{class:!0,type:!0});var Ae=h(z);ie=R(Ae,ae),Ae.forEach(d),me.forEach(d),Q.forEach(d),K.forEach(d),re.forEach(d),m.forEach(d),ue=U(r),He(L.$$.fragment,r),this.h()},h(){s(y,"class","self-center"),s(w,"class","self-center font-medium text-sm"),s(v,"class","flex space-x-1"),s(v,"type","button"),s(D,"class","mb-2.5"),s(c,"class","w-full px-3 py-2 text-sm font-medium bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(c,"type","text"),s(c,"placeholder",H=t[9].t("Toolkit Name (e.g. My ToolKit)")),c.required=!0,s(l,"class","w-full px-3 py-2 text-sm font-medium disabled:text-gray-300 dark:disabled:text-gray-700 bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(l,"type","text"),s(l,"placeholder",g=t[9].t("Toolkit ID (e.g. my_toolkit)")),l.required=!0,l.disabled=t[4],s(C,"class","flex gap-2 w-full"),s(k,"class","w-full px-3 py-2 text-sm font-medium bg-gray-50 dark:bg-gray-850 dark:text-gray-200 rounded-lg outline-none"),s(k,"type","text"),s(k,"placeholder",N=t[9].t("Toolkit Description (e.g. A toolkit for performing various operations)")),k.required=!0,s(p,"class","w-full mb-2 flex flex-col gap-1.5"),s(M,"class","mb-2 flex-1 overflow-auto h-0 rounded-lg"),s(o,"class","font-semibold dark:text-gray-200"),s(J,"class","font-medium dark:text-gray-400"),s(P,"class","text-xs text-gray-500 line-clamp-2"),s(G,"class","flex-1 pr-3"),s(z,"class","px-3 py-1.5 text-sm font-medium bg-emerald-600 hover:bg-emerald-700 text-gray-50 transition rounded-lg"),s(z,"type","submit"),s(B,"class","pb-3 flex justify-between"),s(f,"class","flex flex-col flex-1 overflow-auto h-0 rounded-lg"),s(_,"class","flex flex-col max-h-[100dvh] h-full"),s(a,"class","mx-auto w-full md:px-0 h-full"),s(u,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m(r,m){ke(r,u,m),e(u,a),e(a,_),e(_,D),e(D,v),e(v,y),e(v,x),e(v,w),e(w,E),e(_,q),e(_,f),e(f,p),e(p,C),e(C,c),X(c,t[0]),e(C,S),e(C,l),X(l,t[2]),e(p,j),e(p,k),X(k,t[3].description),e(f,F),e(f,M),Ne(T,M,null),e(f,Z),e(f,B),e(B,G),e(G,P),e(P,o),e(o,oe),e(P,he),e(P,le),e(P,_e),e(P,pe),e(P,ge),e(P,J),e(J,ne),e(B,ve),e(B,z),e(z,ie),t[21](_),ke(r,ue,m),Ne(L,r,m),V=!0,we||(Ie=[se(v,"click",t[14]),se(c,"input",t[15]),se(l,"input",t[16]),se(k,"input",t[17]),se(_,"submit",We(t[22]))],we=!0)},p(r,[m]){(!V||m&512)&&b!==(b=r[9].t("Back")+"")&&W(E,b),(!V||m&512&&H!==(H=r[9].t("Toolkit Name (e.g. My ToolKit)")))&&s(c,"placeholder",H),m&1&&c.value!==r[0]&&X(c,r[0]),(!V||m&512&&g!==(g=r[9].t("Toolkit ID (e.g. my_toolkit)")))&&s(l,"placeholder",g),(!V||m&16)&&(l.disabled=r[4]),m&4&&l.value!==r[2]&&X(l,r[2]),(!V||m&512&&N!==(N=r[9].t("Toolkit Description (e.g. A toolkit for performing various operations)")))&&s(k,"placeholder",N),m&8&&k.value!==r[3].description&&X(k,r[3].description);const re={};m&2&&(re.value=r[1]),T.$set(re),(!V||m&512)&&$!==($=r[9].t("Warning:")+"")&&W(oe,$),(!V||m&512)&&ee!==(ee=r[9].t("Tools are a function calling system with arbitrary code execution")+"")&&W(le,ee),(!V||m&512)&&te!==(te=r[9].t("don't install random tools from sources you don't trust.")+"")&&W(ne,te),(!V||m&512)&&ae!==(ae=r[9].t("Save")+"")&&W(ie,ae);const K={};m&536871424&&(K.$$scope={dirty:m,ctx:r}),!ye&&m&64&&(ye=!0,K.show=r[6],Fe(()=>ye=!1)),L.$set(K)},i(r){V||(Me(T.$$.fragment,r),Me(L.$$.fragment,r),V=!0)},o(r){Se(T.$$.fragment,r),Se(L.$$.fragment,r),V=!1},d(r){r&&(d(u),d(ue)),t[18](null),je(T),t[21](null),je(L,r),we=!1,Ge(Ie)}}}function rt(t,u,a){let _;const D=Ke("i18n");Ye(t,D,o=>a(9,_=o));const v=ze();let y=null,I=!1,{edit:x=!1}=u,{clone:w=!1}=u,{id:b=""}=u,{name:E=""}=u,{meta:q={description:""}}=u,{content:f=""}=u,p="";const C=()=>{a(7,p=f)};let c,H=`import os
import requests
from datetime import datetime


class Tools:
    def __init__(self):
        pass

    # Add your custom tools using pure Python code here, make sure to add type hints
    # Use Sphinx-style docstrings to document your tools, they will be used for generating tools specifications
    # Please refer to function_calling_filter_pipeline.py file from pipelines project for an example

    def get_user_name_and_email_and_id(self, __user__: dict = {}) -> str:
        """
        Get the user name, Email and ID from the user object.
        """

        # Do not include :param for __user__ in the docstring as it should not be shown in the tool's specification
        # The session user object will be passed as a parameter when the function is called

        print(__user__)
        result = ""

        if "name" in __user__:
            result += f"User: {__user__['name']}"
        if "id" in __user__:
            result += f" (ID: {__user__['id']})"
        if "email" in __user__:
            result += f" (Email: {__user__['email']})"

        if result == "":
            result = "User: Unknown"

        return result

    def get_current_time(self) -> str:
        """
        Get the current time in a more human-readable format.
        :return: The current time.
        """

        now = datetime.now()
        current_time = now.strftime("%I:%M:%S %p")  # Using 12-hour format with AM/PM
        current_date = now.strftime(
            "%A, %B %d, %Y"
        )  # Full weekday, month name, day, and year

        return f"Current Date and Time = {current_date}, {current_time}"

    def calculator(self, equation: str) -> str:
        """
        Calculate the result of an equation.
        :param equation: The equation to calculate.
        """

        # Avoid using eval in production code
        # https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html
        try:
            result = eval(equation)
            return f"{equation} = {result}"
        except Exception as e:
            print(e)
            return "Invalid equation"

    def get_current_weather(self, city: str) -> str:
        """
        Get the current weather for a given city.
        :param city: The name of the city to get the weather for.
        :return: The current weather information or an error message.
        """
        api_key = os.getenv("OPENWEATHER_API_KEY")
        if not api_key:
            return (
                "API key is not set in the environment variable 'OPENWEATHER_API_KEY'."
            )

        base_url = "http://api.openweathermap.org/data/2.5/weather"
        params = {
            "q": city,
            "appid": api_key,
            "units": "metric",  # Optional: Use 'imperial' for Fahrenheit
        }

        try:
            response = requests.get(base_url, params=params)
            response.raise_for_status()  # Raise HTTPError for bad responses (4xx and 5xx)
            data = response.json()

            if data.get("cod") != 200:
                return f"Error fetching weather data: {data.get('message')}"

            weather_description = data["weather"][0]["description"]
            temperature = data["main"]["temp"]
            humidity = data["main"]["humidity"]
            wind_speed = data["wind"]["speed"]

            return f"Weather in {city}: {temperature}°C"
        except requests.RequestException as e:
            return f"Error fetching weather data: {str(e)}"
`;const S=async()=>{v("save",{id:b,name:E,meta:q,content:f})},l=async()=>{if(c){a(1,f=p),await be();const o=await c.formatPythonCodeHandler();await be(),a(1,f=p),await be(),o&&(console.log("Code formatted successfully"),S())}},g=()=>{$e("/workspace/tools")};function j(){E=this.value,a(0,E)}function k(){b=this.value,a(2,b),a(0,E),a(4,x),a(13,w)}function N(){q.description=this.value,a(3,q)}function F(o){Ee[o?"unshift":"push"](()=>{c=o,a(8,c)})}const M=o=>{a(7,p=o.detail.value)},T=()=>{y&&y.requestSubmit()};function Z(o){Ee[o?"unshift":"push"](()=>{y=o,a(5,y)})}const B=()=>{x?l():a(6,I=!0)};function G(o){I=o,a(6,I)}const P=()=>{l()};return t.$$set=o=>{"edit"in o&&a(4,x=o.edit),"clone"in o&&a(13,w=o.clone),"id"in o&&a(2,b=o.id),"name"in o&&a(0,E=o.name),"meta"in o&&a(3,q=o.meta),"content"in o&&a(1,f=o.content)},t.$$.update=()=>{t.$$.dirty&2&&f&&C(),t.$$.dirty&8209&&E&&!x&&!w&&a(2,b=E.replace(/\s+/g,"_").toLowerCase())},[E,f,b,q,x,y,I,p,c,_,D,H,l,w,g,j,k,N,F,M,T,Z,B,G,P]}class ut extends Je{constructor(u){super(),Qe(this,u,rt,at,Oe,{edit:4,clone:13,id:2,name:0,meta:3,content:1})}}export{ut as T};
//# sourceMappingURL=ToolkitEditor.BfydxjO3.js.map
