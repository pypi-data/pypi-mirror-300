"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2233],{82233:(e,t,o)=>{o.r(t),o.d(t,{COLUMN_NAME_ALIASES:()=>k.DS,COMPARATOR:()=>I.O9,ColumnOption:()=>he.E,ColumnTypeLabel:()=>be.j,ControlSubSectionHeader:()=>_.U,D3_FORMAT_DOCS:()=>Q.YD,D3_FORMAT_OPTIONS:()=>Q.F6,D3_NUMBER_FORMAT_DESCRIPTION_PERCENTAGE_TEXT:()=>Q.u6,D3_NUMBER_FORMAT_DESCRIPTION_VALUES_TEXT:()=>Q.pj,D3_TIME_FORMAT_DOCS:()=>Q.oq,D3_TIME_FORMAT_OPTIONS:()=>Q.HC,DATASET_TIME_COLUMN_OPTION:()=>k.LU,DEFAULT_MAX_ROW:()=>k.$z,DEFAULT_NUMBER_FORMAT:()=>Q.Ul,DEFAULT_SORT_SERIES_DATA:()=>k.PJ,DEFAULT_TIME_FORMAT:()=>Q._r,DEFAULT_XAXIS_SORT_SERIES_DATA:()=>k.ZK,InfoTooltipWithTrigger:()=>ve.V,MULTIPLE_VALUE_COMPARATORS:()=>I.vD,MetricOption:()=>xe.m,QUERY_TIME_COLUMN_OPTION:()=>k.CV,QueryModeLabel:()=>k.cm,SORT_SERIES_CHOICES:()=>k.YY,SortSeriesType:()=>I.Id,TIME_COMPARISON_SEPARATOR:()=>ge.K,TIME_FILTER_LABELS:()=>k.m_,TestDataset:()=>Ee,boxplotOperator:()=>ue.F,checkColumnType:()=>D,columnChoices:()=>K.Z,contributionModeControl:()=>L,contributionOperator:()=>se.I,datePickerInAdhocFilterMixin:()=>Ce.sy,defineSavedMetrics:()=>J.R,expandControlConfig:()=>z.q,expandControlType:()=>z.$,extractExtraMetrics:()=>fe.T,flattenOperator:()=>de.k,formatSelectOptions:()=>f.m,formatSelectOptionsForRange:()=>f.B,getColorFormatters:()=>G.ni,getColorFunction:()=>G.E2,getMetricOffsetsMap:()=>me.O,getOpacity:()=>G.Km,getOriginalSeries:()=>ye.f,getStandardizedControls:()=>ee.u,getTemporalColumns:()=>N.X,hasTimeOffset:()=>ye.b,isColumnMeta:()=>I.xN,isControlPanelSectionConfig:()=>I.D_,isDataset:()=>I.It,isDerivedSeries:()=>_e.m,isQueryResponse:()=>I.JQ,isSavedExpression:()=>I.zy,isStandardizedFormData:()=>I.pp,isTemporalColumn:()=>N.x,isTimeComparison:()=>pe.H,mainMetric:()=>$,pivotOperator:()=>re.H,prophetOperator:()=>ce.D,renameOperator:()=>le.N,resampleOperator:()=>ie.X,rollingWindowOperator:()=>te.V,round:()=>G.NM,sections:()=>we,sharedControlComponents:()=>Oe.default,sharedControls:()=>Te.ZP,sortOperator:()=>ae.C,temporalColumnMixin:()=>Ce.V7,timeCompareOperator:()=>oe.N,timeComparePivotOperator:()=>ne.O,withDndFallback:()=>Se.pO,xAxisForceCategoricalControl:()=>q,xAxisMixin:()=>Ce.P2,xAxisSortAscControl:()=>H,xAxisSortControl:()=>U,xAxisSortSeriesAscendingControl:()=>j,xAxisSortSeriesControl:()=>Y});var n={};o.r(n),o.d(n,{FORECAST_DEFAULT_DATA:()=>T,TITLE_MARGIN_OPTIONS:()=>O,TITLE_POSITION_OPTIONS:()=>C,advancedAnalyticsControls:()=>g,annotationLayers:()=>v,annotations:()=>m,annotationsAndLayersControls:()=>h,colorScheme:()=>d,datasourceAndVizType:()=>u,echartsTimeSeriesQuery:()=>W,echartsTimeSeriesQueryWithXAxisSort:()=>X,forecastIntervalControls:()=>S,genericTime:()=>s,legacyRegularTime:()=>c,legacyTimeseriesTime:()=>l,titleControls:()=>A});var a=o(61988),r=o(11146);const i={label:(0,a.t)("Time"),expanded:!0,description:(0,a.t)("Time related form attributes")},l={...i,controlSetRows:[["granularity"],["granularity_sqla"],["time_grain_sqla"],["time_range"]]},s=r.O6?{controlSetRows:[]}:{...i,controlSetRows:[["granularity_sqla"],["time_grain_sqla"],["time_range"]]},c=r.O6?{controlSetRows:[]}:{...i,controlSetRows:[["granularity_sqla"],["time_range"]]},u={label:(0,a.t)("Datasource & Chart Type"),expanded:!0,controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:(0,a.t)("Chart ID"),hidden:!0,description:(0,a.t)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:(0,a.t)("Cache Timeout (seconds)"),hidden:!0,description:(0,a.t)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:(0,a.t)("URL Parameters"),hidden:!0,description:(0,a.t)("Extra url parameters for use in Jinja templated queries")}},{name:"custom_params",config:{type:"HiddenControl",label:(0,a.t)("Extra Parameters"),hidden:!0,description:(0,a.t)("Extra parameters that any plugins can choose to set for use in Jinja templated queries")}}]]},d={label:(0,a.t)("Color Scheme"),controlSetRows:[["color_scheme"]]},m={label:(0,a.t)("Annotations and Layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:(0,a.t)("Annotation Layers"),renderTrigger:!0}}]]};o(67294);var p=o(62363),_=o(46666),f=o(6126),y=o(11965);const g={label:(0,a.t)("Advanced analytics"),tabOverride:"data",description:(0,a.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,y.tZ)(_.U,null,(0,a.t)("Rolling window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,a.t)("Rolling function"),default:null,choices:[[null,(0,a.t)("None")]].concat((0,f.m)(Object.values(p.su))),description:(0,a.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,a.t)("Periods"),isInt:!0,description:(0,a.t)("Defines the size of the rolling window function, relative to the time granularity selected"),visibility:(e,t)=>{var o,n;let{controls:a}=e,{name:r}=t;const i=r.endsWith("_b")?"rolling_type_b":"rolling_type";return Boolean(null==(o=a[i])?void 0:o.value)&&(null==(n=a[i])?void 0:n.value)!==p.su.Cumsum}}}],[{name:"min_periods",config:{type:"TextControl",label:(0,a.t)("Min periods"),isInt:!0,description:(0,a.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods'),visibility:(e,t)=>{var o,n;let{controls:a}=e,{name:r}=t;const i=r.endsWith("_b")?"rolling_type_b":"rolling_type";return Boolean(null==(o=a[i])?void 0:o.value)&&(null==(n=a[i])?void 0:n.value)!==p.su.Cumsum}}}],[(0,y.tZ)(_.U,null,(0,a.t)("Time comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,a.t)("Time shift"),choices:[["1 day ago",(0,a.t)("1 day ago")],["1 week ago",(0,a.t)("1 week ago")],["28 days ago",(0,a.t)("28 days ago")],["30 days ago",(0,a.t)("30 days ago")],["52 weeks ago",(0,a.t)("52 weeks ago")],["1 year ago",(0,a.t)("1 year ago")],["104 weeks ago",(0,a.t)("104 weeks ago")],["2 years ago",(0,a.t)("2 years ago")],["156 weeks ago",(0,a.t)("156 weeks ago")],["3 years ago",(0,a.t)("3 years ago")]],description:(0,a.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}}],[{name:"comparison_type",config:{type:"SelectControl",label:(0,a.t)("Calculation type"),default:"values",choices:[[p.wj.Values,(0,a.t)("Actual values")],[p.wj.Difference,(0,a.t)("Difference")],[p.wj.Percentage,(0,a.t)("Percentage change")],[p.wj.Ratio,(0,a.t)("Ratio")]],description:(0,a.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,y.tZ)(_.U,null,(0,a.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Rule"),default:null,choices:[["1T",(0,a.t)("1 minutely frequency")],["1H",(0,a.t)("1 hourly frequency")],["1D",(0,a.t)("1 calendar day frequency")],["7D",(0,a.t)("7 calendar day frequency")],["1MS",(0,a.t)("1 month start frequency")],["1M",(0,a.t)("1 month end frequency")],["1AS",(0,a.t)("1 year start frequency")],["1A",(0,a.t)("1 year end frequency")]],description:(0,a.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",label:(0,a.t)("Fill method"),default:null,choices:[["asfreq",(0,a.t)("Null imputation")],["zerofill",(0,a.t)("Zero imputation")],["linear",(0,a.t)("Linear interpolation")],["ffill",(0,a.t)("Forward values")],["bfill",(0,a.t)("Backward values")],["median",(0,a.t)("Median values")],["mean",(0,a.t)("Mean values")],["sum",(0,a.t)("Sum values")]],description:(0,a.t)("Pandas resample method")}}]]},v=[],h={label:(0,a.t)("Annotations and Layers"),expanded:!1,tabOverride:"data",controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:v,description:(0,a.t)("Annotation Layers"),renderTrigger:!1}}]]};var b=o(75294),x=o(99298);const T={forecastEnabled:!1,forecastInterval:.8,forecastPeriods:10,forecastSeasonalityDaily:null,forecastSeasonalityWeekly:null,forecastSeasonalityYearly:null},S={label:(0,a.t)("Predictive Analytics"),expanded:!1,controlSetRows:[[{name:"forecastEnabled",config:{type:"CheckboxControl",label:(0,a.t)("Enable forecast"),renderTrigger:!1,default:T.forecastEnabled,description:(0,a.t)("Enable forecasting")}}],[{name:"forecastPeriods",config:{type:"TextControl",label:(0,a.t)("Forecast periods"),validators:[b.Z],default:T.forecastPeriods,description:(0,a.t)("How many periods into the future do we want to predict")}}],[{name:"forecastInterval",config:{type:"TextControl",label:(0,a.t)("Confidence interval"),validators:[x.Z],default:T.forecastInterval,description:(0,a.t)("Width of the confidence interval. Should be between 0 and 1")}}],[{name:"forecastSeasonalityYearly",config:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Yearly seasonality"),choices:[[null,(0,a.t)("default")],[!0,(0,a.t)("Yes")],[!1,(0,a.t)("No")]],default:T.forecastSeasonalityYearly,description:(0,a.t)("Should yearly seasonality be applied. An integer value will specify Fourier order of seasonality.")}}],[{name:"forecastSeasonalityWeekly",config:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Weekly seasonality"),choices:[[null,(0,a.t)("default")],[!0,(0,a.t)("Yes")],[!1,(0,a.t)("No")]],default:T.forecastSeasonalityWeekly,description:(0,a.t)("Should weekly seasonality be applied. An integer value will specify Fourier order of seasonality.")}}],[{name:"forecastSeasonalityDaily",config:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Daily seasonality"),choices:[[null,(0,a.t)("default")],[!0,(0,a.t)("Yes")],[!1,(0,a.t)("No")]],default:T.forecastSeasonalityDaily,description:(0,a.t)("Should daily seasonality be applied. An integer value will specify Fourier order of seasonality.")}}]]},O=[15,30,50,75,100,125,150,200],C=[["Left",(0,a.t)("Left")],["Top",(0,a.t)("Top")]],A={label:(0,a.t)("Chart Title"),tabOverride:"customize",expanded:!0,controlSetRows:[[(0,y.tZ)(_.U,null,(0,a.t)("X Axis"))],[{name:"x_axis_title",config:{type:"TextControl",label:(0,a.t)("X Axis Title"),renderTrigger:!0,default:"",description:(0,a.t)("Changing this control takes effect instantly")}}],[{name:"x_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,a.t)("X AXIS TITLE BOTTOM MARGIN"),renderTrigger:!0,default:O[0],choices:(0,f.m)(O),description:(0,a.t)("Changing this control takes effect instantly")}}],[(0,y.tZ)(_.U,null,(0,a.t)("Y Axis"))],[{name:"y_axis_title",config:{type:"TextControl",label:(0,a.t)("Y Axis Title"),renderTrigger:!0,default:"",description:(0,a.t)("Changing this control takes effect instantly")}}],[{name:"y_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,a.t)("Y Axis Title Margin"),renderTrigger:!0,default:O[0],choices:(0,f.m)(O),description:(0,a.t)("Changing this control takes effect instantly")}}],[{name:"y_axis_title_position",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,a.t)("Y Axis Title Position"),renderTrigger:!0,default:C[0][0],choices:C,description:(0,a.t)("Changing this control takes effect instantly")}}]]};var E=o(43716),w=o(10581),R=o(88889),M=o(55786),Z=o(56652),I=o(38575),N=o(45211),k=o(35622);function D(e,t,o){return(0,I.It)(t)?(0,M.Z)(t.columns).some((t=>void 0!==t.type_generic&&o.includes(t.type_generic)&&e===t.column_name)):!!(0,I.JQ)(t)&&(0,M.Z)(t.columns).filter((e=>void 0!==e.type_generic&&o.includes(e.type_generic))).map((e=>e.column_name)).some((t=>e===t))}const L={name:"contributionMode",config:{type:"SelectControl",label:(0,a.t)("Contribution Mode"),default:null,choices:[[null,(0,a.t)("None")],[E.YC.Row,(0,a.t)("Row")],[E.YC.Column,(0,a.t)("Series")]],description:(0,a.t)("Calculate contribution per series or row")}};function F(e){var t,o;return function(e){var t,o,n;return D((0,w.Z)(null==e||null==(t=e.x_axis)?void 0:t.value),null==e||null==(o=e.datasource)?void 0:o.datasource,[R.Z.NUMERIC])&&!(null==e||null==(n=e.xAxisForceCategorical)||!n.value)}(e)||D((0,w.Z)(null==e||null==(t=e.x_axis)?void 0:t.value),null==e||null==(o=e.datasource)?void 0:o.datasource,[R.Z.STRING,R.Z.BOOLEAN])}const V=e=>{var t,o;let{controls:n}=e;return F(n)&&0===(0,M.Z)(null==n||null==(t=n.groupby)?void 0:t.value).length&&1===(0,M.Z)(null==n||null==(o=n.metrics)?void 0:o.value).length},P=e=>{var t,o;let{controls:n}=e;return F(n)&&(!!(0,M.Z)(null==n||null==(t=n.groupby)?void 0:t.value).length||(0,M.Z)(null==n||null==(o=n.metrics)?void 0:o.value).length>1)},U={name:"x_axis_sort",config:{type:"XAxisSortControl",label:e=>{var t;return"horizontal"===(null==(t=e.form_data)?void 0:t.orientation)?(0,a.t)("Y-Axis Sort By"):(0,a.t)("X-Axis Sort By")},description:(0,a.t)("Decides which column to sort the base axis by."),shouldMapStateToProps:()=>!0,mapStateToProps:(e,t)=>{var o,n,a,r,i;const{controls:l,datasource:s}=e,c=(0,I.It)(s)?s:void 0,u=[null==l||null==(o=l.x_axis)?void 0:o.value].filter(Boolean),d=[...(0,M.Z)(null==l||null==(n=l.metrics)?void 0:n.value),null==l||null==(a=l.timeseries_limit_metric)?void 0:a.value].filter(Boolean),m=[...new Set(d.map(Z.Z))],p=[...u.map((e=>{var t;const o=(0,w.Z)(e);return{value:o,label:(null==c||null==(t=c.verbose_map)?void 0:t[o])||o}})),...m.map((e=>{var t;return{value:e,label:(null==c||null==(t=c.verbose_map)?void 0:t[e])||e}}))];return{shouldReset:!("string"==typeof t.value&&p.map((e=>e.value)).includes(t.value)&&!(0,N.x)((0,w.Z)(null==l||null==(r=l.x_axis)?void 0:r.value),null==l||null==(i=l.datasource)?void 0:i.datasource)),options:p}},visibility:V}},H={name:"x_axis_sort_asc",config:{type:"CheckboxControl",label:e=>{var t;return"horizontal"===(null==(t=e.form_data)?void 0:t.orientation)?(0,a.t)("Y-Axis Sort Ascending"):(0,a.t)("X-Axis Sort Ascending")},default:!0,description:(0,a.t)("Whether to sort ascending or descending on the base Axis."),visibility:e=>{var t;let{controls:o}=e;return void 0!==(null==o||null==(t=o.x_axis_sort)?void 0:t.value)&&V({controls:o})}}},q={name:"xAxisForceCategorical",config:{type:"CheckboxControl",label:()=>(0,a.t)("Force categorical"),default:!1,description:(0,a.t)("Treat values as categorical."),initialValue:(e,t)=>{var o;return void 0!==(null==t||null==(o=t.form_data)?void 0:o.x_axis_sort)||e.value},renderTrigger:!0,visibility:e=>{var t,o;let{controls:n}=e;return D((0,w.Z)(null==n||null==(t=n.x_axis)?void 0:t.value),null==n||null==(o=n.datasource)?void 0:o.datasource,[R.Z.NUMERIC])},shouldMapStateToProps:()=>!0}},Y={name:"x_axis_sort_series",config:{type:"SelectControl",freeForm:!1,label:e=>{var t;return"horizontal"===(null==(t=e.form_data)?void 0:t.orientation)?(0,a.t)("Y-Axis Sort By"):(0,a.t)("X-Axis Sort By")},choices:k.YY,default:k.ZK.sort_series_type,renderTrigger:!0,description:(0,a.t)("Decides which measure to sort the base axis by."),visibility:P}},j={name:"x_axis_sort_series_ascending",config:{type:"CheckboxControl",label:e=>{var t;return"horizontal"===(null==(t=e.form_data)?void 0:t.orientation)?(0,a.t)("Y-Axis Sort Ascending"):(0,a.t)("X-Axis Sort Ascending")},default:k.ZK.sort_series_ascending,description:(0,a.t)("Whether to sort ascending or descending on the base Axis."),renderTrigger:!0,visibility:e=>{var t;let{controls:o}=e;return void 0!==(null==o||null==(t=o.x_axis_sort_series)?void 0:t.value)&&P({controls:o})}}},B=[["metrics"],["groupby"],[L],["adhoc_filters"],["limit"],["timeseries_limit_metric"],["order_desc"],["row_limit"],["truncate_metric"],["show_empty_columns"]],W={label:(0,a.t)("Query"),expanded:!0,controlSetRows:[[r.O6?"x_axis":null],[r.O6?"time_grain_sqla":null],...B]},X={label:(0,a.t)("Query"),expanded:!0,controlSetRows:[[r.O6?"x_axis":null],[r.O6?"time_grain_sqla":null],[r.O6?q:null],[r.O6?U:null],[r.O6?H:null],[r.O6?Y:null],[r.O6?j:null],...B]};var Q=o(58842),z=o(89368),G=o(9609);function $(e){let t;return e&&e.length>0&&(e.forEach((e=>{"count"===e.metric_name&&(t="count")})),t||(t=e[0].metric_name)),t}var K=o(75781),J=o(19835),ee=o(20002),te=o(97490),oe=o(60955),ne=o(92155),ae=o(44928),re=o(4098),ie=o(99343),le=o(19546),se=o(69862),ce=o(37701),ue=o(20884),de=o(63038),me=o(6219),pe=o(73739),_e=o(27751),fe=o(51689),ye=o(17077),ge=o(14920),ve=o(9882),he=o(65634),be=o(46488),xe=o(51384),Te=o(39650),Se=o(53769),Oe=o(93362),Ce=o(83389),Ae=o(46078);const Ee={column_formats:{},currency_formats:{},columns:[{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"num",description:null,expression:"",filterable:!0,groupby:!0,id:332,is_certified:!1,is_dttm:!1,python_date_format:null,type:"BIGINT",type_generic:R.Z.NUMERIC,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"gender",description:null,expression:"",filterable:!0,groupby:!0,id:330,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(16)",type_generic:R.Z.STRING,verbose_name:"",warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"state",description:null,expression:"",filterable:!0,groupby:!0,id:333,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(10)",type_generic:R.Z.STRING,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"ds",description:null,expression:"",filterable:!0,groupby:!0,id:329,is_certified:!1,is_dttm:!0,python_date_format:null,type:"TIMESTAMP WITHOUT TIME ZONE",type_generic:R.Z.TEMPORAL,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"name",description:null,expression:"",filterable:!0,groupby:!0,id:331,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(255)",type_generic:R.Z.STRING,verbose_name:null,warning_markdown:null}],datasource_name:"birth_names",description:null,granularity_sqla:"ds",id:2,main_dttm_col:"ds",metrics:[{certification_details:null,certified_by:null,d3format:null,currency:null,description:null,expression:"COUNT(*)",id:7,is_certified:!1,metric_name:"count",verbose_name:"COUNT(*)",warning_markdown:"",warning_text:null}],name:"public.birth_names",order_by_choices:[],owners:[{first_name:"admin",id:1,last_name:"user",username:"admin"}],type:Ae.i9.Dataset,uid:"2__table",verbose_map:{}},we=n},20884:(e,t,o)=>{o.d(t,{F:()=>l});var n=o(55786),a=o(10581),r=o(56652);const i=/(\d+)\/(\d+) percentiles/,l=(e,t)=>{const{groupby:o,whiskerOptions:l}=e;if(l){let e,s;const c=i.exec(l);if("Tukey"!==l&&l)if("Min/max (no outliers)"===l)e="min/max";else{if(!c)throw new Error(`Unsupported whisker type: ${l}`);e="percentile",s=[parseInt(c[1],10),parseInt(c[2],10)]}else e="tukey";return{operation:"boxplot",options:{whisker_type:e,percentiles:s,groupby:(0,n.Z)(o).map(a.Z),metrics:(0,n.Z)(t.metrics).map(r.Z)}}}}},69862:(e,t,o)=>{o.d(t,{I:()=>n});const n=(e,t)=>{if(e.contributionMode)return{operation:"contribution",options:{orientation:e.contributionMode}}}},63038:(e,t,o)=>{o.d(t,{k:()=>n});const n=(e,t)=>({operation:"flatten"})},4098:(e,t,o)=>{o.d(t,{H:()=>s});var n=o(55786),a=o(56652),r=o(11146),i=o(10581),l=o(51689);const s=(e,t)=>{const o=[...(0,n.Z)(t.metrics),...(0,l.T)(e)].map(a.Z),s=(0,r.M8)(e),c=t.series_columns||t.columns;if(s&&o.length)return{operation:"pivot",options:{index:[s],columns:(0,n.Z)(c).map(i.Z),aggregates:Object.fromEntries(o.map((e=>[e,{operator:"mean"}]))),drop_missing_columns:!(null!=e&&e.show_empty_columns)}}}},37701:(e,t,o)=>{o.d(t,{D:()=>a});var n=o(11146);const a=(e,t)=>{const o=(0,n.M8)(e);if(e.forecastEnabled&&o)return{operation:"prophet",options:{time_grain:e.time_grain_sqla,periods:parseInt(e.forecastPeriods,10),confidence_interval:parseFloat(e.forecastInterval),yearly_seasonality:e.forecastSeasonalityYearly,weekly_seasonality:e.forecastSeasonalityWeekly,daily_seasonality:e.forecastSeasonalityDaily,index:o}}}},19546:(e,t,o)=>{o.d(t,{N:()=>c});var n=o(55786),a=o(11146),r=o(62363),i=o(56652),l=o(73739),s=o(6219);const c=(e,t)=>{const o=(0,n.Z)(t.metrics),c=(0,n.Z)(t.series_columns||t.columns),{truncate_metric:u}=e,d=(0,a.M8)(e);if(1===o.length&&c.length>0&&d&&(!(0,l.H)(e,t)||![r.wj.Difference,r.wj.Ratio,r.wj.Percentage].includes(e.comparison_type))&&void 0!==u&&u){const a=[];if((0,l.H)(e,t)&&e.comparison_type===r.wj.Values){const o=(0,s.O)(e,t),r=(0,n.Z)(e.time_compare);[...o.keys()].forEach((e=>{const t=r.find((t=>e.includes(t)));a.push([e,t])}))}return a.push([(0,i.Z)(o[0]),null]),{operation:"rename",options:{columns:Object.fromEntries(a),level:0,inplace:!0}}}}},99343:(e,t,o)=>{o.d(t,{X:()=>n});const n=(e,t)=>{const o="zerofill"===e.resample_method,n=o?"asfreq":e.resample_method,a=e.resample_rule;if(n&&a)return{operation:"resample",options:{method:n,rule:a,fill_value:o?0:null}}}},97490:(e,t,o)=>{o.d(t,{V:()=>s});var n=o(55786),a=o(62363),r=o(77675),i=o(73739),l=o(6219);const s=(e,t)=>{let o;if((0,i.H)(e,t)){const n=(0,l.O)(e,t);o=[...Array.from(n.values()),...Array.from(n.keys())]}else o=(0,n.Z)(t.metrics).map((e=>"string"==typeof e?e:e.label));const s=Object.fromEntries(o.map((e=>[e,e])));return e.rolling_type===a.su.Cumsum?{operation:"cum",options:{operator:"sum",columns:s}}:[a.su.Sum,a.su.Mean,a.su.Std].includes(e.rolling_type)?{operation:"rolling",options:{rolling_type:e.rolling_type,window:(0,r.Z)(e.rolling_periods,1),min_periods:(0,r.Z)(e.min_periods,0),columns:s}}:void 0}},44928:(e,t,o)=>{o.d(t,{C:()=>u});var n=o(41609),a=o.n(n),r=o(11146),i=o(55786),l=o(56652),s=o(37731),c=o(51689);const u=(e,t)=>{const o=[(0,r.M8)(e),...(0,i.Z)(e.metrics).map(l.Z),...(0,c.T)(e).map(l.Z)].filter(Boolean);if(r.O6&&(0,s.Z)(null==e?void 0:e.x_axis_sort)&&(0,s.Z)(null==e?void 0:e.x_axis_sort_asc)&&o.includes(e.x_axis_sort)&&a()(e.groupby))return e.x_axis_sort===(0,r.M8)(e)?{operation:"sort",options:{is_sort_index:!0,ascending:e.x_axis_sort_asc}}:{operation:"sort",options:{by:e.x_axis_sort,ascending:e.x_axis_sort_asc}}}},60955:(e,t,o)=>{o.d(t,{N:()=>i});var n=o(62363),a=o(6219),r=o(73739);const i=(e,t)=>{const o=e.comparison_type,i=(0,a.O)(e,t);if((0,r.H)(e,t)&&o!==n.wj.Values)return{operation:"compare",options:{source_columns:Array.from(i.values()),compare_columns:Array.from(i.keys()),compare_type:o,drop_original_columns:!0}}}},92155:(e,t,o)=>{o.d(t,{O:()=>s});var n=o(11146),a=o(55786),r=o(10581),i=o(6219),l=o(73739);const s=(e,t)=>{const o=(0,i.O)(e,t),s=(0,n.M8)(e),c=t.series_columns||t.columns;if((0,l.H)(e,t)&&s){const t=Object.fromEntries([...o.values(),...o.keys()].map((e=>[e,{operator:"mean"}])));return{operation:"pivot",options:{index:[s],columns:(0,a.Z)(c).map(r.Z),drop_missing_columns:!(null!=e&&e.show_empty_columns),aggregates:t}}}}},14920:(e,t,o)=>{o.d(t,{K:()=>n});const n="__"},51689:(e,t,o)=>{o.d(t,{T:()=>r});var n=o(55786),a=o(56652);function r(e){const{groupby:t,timeseries_limit_metric:o,x_axis_sort:r,metrics:i}=e,l=[],s=(0,n.Z)(o)[0];return(t||[]).length||!s||(0,a.Z)(s)!==r||null!=i&&i.some((e=>(0,a.Z)(e)===r))||l.push(s),l}},6219:(e,t,o)=>{o.d(t,{O:()=>i});var n=o(55786),a=o(56652),r=o(14920);const i=(e,t)=>{const o=(0,n.Z)(t.metrics),i=(0,n.Z)(e.time_compare),l=o.map(a.Z),s=new Map;return l.forEach((e=>{i.forEach((t=>{s.set([e,t].join(r.K),e)}))})),s}},27751:(e,t,o)=>{o.d(t,{m:()=>i});var n=o(62363),a=o(55786),r=o(17077);const i=(e,t)=>{if(t.comparison_type!==n.wj.Values)return!1;const o=(0,a.Z)(null==t?void 0:t.time_compare);return(0,r.b)(e,o)}},73739:(e,t,o)=>{o.d(t,{H:()=>r});var n=o(62363),a=o(6219);const r=(e,t)=>{const o=e.comparison_type,r=(0,a.O)(e,t);return Object.values(n.wj).includes(o)&&r.size>0}},17077:(e,t,o)=>{o.d(t,{b:()=>r,f:()=>i});var n=o(47037),a=o.n(n);const r=(e,t)=>!!a()(e.name)&&!!t.find((t=>e.name.includes(`${t},`)||e.name.includes(`__${t}`))),i=(e,t)=>{let o=e;return t.forEach((e=>{o=o.replace(`${e},`,""),o=o.replace(`__${e}`,"")})),o.trim()}},75781:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(38575);function a(e){return(0,n.It)(e)||(0,n.JQ)(e)?e.columns.map((e=>[e.column_name,"verbose_name"in e&&e.verbose_name||e.column_name])).sort(((e,t)=>e[1].toLowerCase()>t[1].toLowerCase()?1:-1)):[]}},9609:(e,t,o)=>{o.d(t,{E2:()=>s,Km:()=>l,NM:()=>i,ni:()=>c});var n=o(30845),a=o(25130),r=o(38575);const i=function(e,t){return void 0===t&&(t=0),Number(`${Math.round(Number(`${e}e+${t}`))}e-${t}`)},l=function(e,t,o,n,a){return void 0===n&&(n=.05),void 0===a&&(a=1),o===t?a:Math.min(a,i(Math.abs((a-n)/(o-t)*(e-t))+n,2))},s=(e,t,o)=>{let n,{operator:i,targetValue:s,targetValueLeft:c,targetValueRight:u,colorScheme:d}=e,m=.05;if(void 0===i||void 0===d)return()=>{};if(r.vD.includes(i)&&(void 0===c||void 0===u))return()=>{};if(i!==r.O9.NONE&&!r.vD.includes(i)&&void 0===s)return()=>{};switch(i){case r.O9.NONE:m=0,n=(e,t)=>{const o=Math.min(...t),n=Math.max(...t);return e>=o&&e<=n&&{cutoffValue:o,extremeValue:n}};break;case r.O9.GREATER_THAN:n=(e,t)=>e>s&&{cutoffValue:s,extremeValue:Math.max(...t)};break;case r.O9.LESS_THAN:n=(e,t)=>e<s&&{cutoffValue:s,extremeValue:Math.min(...t)};break;case r.O9.GREATER_OR_EQUAL:n=(e,t)=>e>=s&&{cutoffValue:s,extremeValue:Math.max(...t)};break;case r.O9.LESS_OR_EQUAL:n=(e,t)=>e<=s&&{cutoffValue:s,extremeValue:Math.min(...t)};break;case r.O9.EQUAL:n=e=>e===s&&{cutoffValue:s,extremeValue:s};break;case r.O9.NOT_EQUAL:n=(e,t)=>{if(e===s)return!1;const o=Math.max(...t),n=Math.min(...t);return{cutoffValue:s,extremeValue:Math.abs(s-n)>Math.abs(o-s)?n:o}};break;case r.O9.BETWEEN:n=e=>e>c&&e<u&&{cutoffValue:c,extremeValue:u};break;case r.O9.BETWEEN_OR_EQUAL:n=e=>e>=c&&e<=u&&{cutoffValue:c,extremeValue:u};break;case r.O9.BETWEEN_OR_LEFT_EQUAL:n=e=>e>=c&&e<u&&{cutoffValue:c,extremeValue:u};break;case r.O9.BETWEEN_OR_RIGHT_EQUAL:n=e=>e>c&&e<=u&&{cutoffValue:c,extremeValue:u};break;default:n=()=>!1}return e=>{const r=n(e,t);if(!1===r)return;const{cutoffValue:i,extremeValue:s}=r;return void 0===o||o?(0,a.Zf)(d,l(e,i,s,m,1)):d}},c=(0,n.Z)(((e,t,o)=>{var n;return null!=(n=null==e?void 0:e.reduce(((e,n)=>(void 0!==(null==n?void 0:n.column)&&((null==n?void 0:n.operator)===r.O9.NONE||void 0!==(null==n?void 0:n.operator)&&(r.vD.includes(null==n?void 0:n.operator)?void 0!==(null==n?void 0:n.targetValueLeft)&&void 0!==(null==n?void 0:n.targetValueRight):void 0!==(null==n?void 0:n.targetValue)))&&e.push({column:null==n?void 0:n.column,getColorFromValue:s(n,t.map((e=>e[n.column])),o)}),e)),[]))?n:[]}))},77675:(e,t,o)=>{function n(e,t){const o=parseInt(String(e),10),n=void 0===t?NaN:t;return Number.isNaN(o)?n:o}o.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=2233.5bc67cf5c44290248725.entry.js.map