{"version":3,"file":"7f38263a96a059cc1954.chunk.js","mappings":"mNAwBA,MAAMA,GAAmBC,EAAAA,EAAAA,IAAOC,EAAAA,GAAkB;;;;;;;;EAU5CC,EAAmBF,EAAAA,GAAOG,GAE9B;;;;;;;MAOIC,IAAA,IAAAC,EAAA,IAAC,eAAEC,EAAc,MAAEC,GAAOH,EAAA,OAC1BE,GAAkB,iBAA6C,OAA7CD,EAAiBE,EAAMC,OAAOF,SAAe,EAA5BD,EAA8BI,MAAM;;EAI/D,SAAUC,EAAiBC,GAA+B,IAAHC,EACnE,MAAM,YACJC,EAAW,iBACXC,EAAgB,mBAChBC,EAAkB,iBAClBC,EAAgB,mBAChBC,EAAkB,gBAClBC,EAAe,MACfC,EAAK,OACLC,EAAM,YACNC,EAAW,SACXC,EAAQ,uBACRC,GAAyB,GACvBZ,EAEEa,GAAwBC,EAAAA,EAAAA,cAC3BC,IACC,MAAMC,EAAQD,GAAaA,IAAcE,EAAAA,GACzCf,EAAY,CACVgB,cAAeF,EACX,CACEG,WAAYJ,GAEd,CAAC,EACLL,YAAa,CACXU,MAAOJ,EAAQD,OAAYM,IAE7B,GAEJ,CAACnB,IAOH,OAJAoB,EAAAA,EAAAA,YAAU,KACRT,EAAsBH,EAAYU,MAAM,GACvC,CAACV,EAAYU,QAEK,OAAdnB,EAAAD,EAAMuB,WAANtB,EAAgBuB,QACrBC,EAAAA,EAAAA,IAACrC,EAAgB,CAACoB,MAAOA,EAAOC,OAAQA,IACtCgB,EAAAA,EAAAA,IAAClC,EAAgB,CACfmC,IAAKf,EACLhB,eAAgBe,EAAYf,eAC5BgC,QAAStB,EACTuB,OAAQtB,EACRuB,aAAc1B,EACd2B,aAAc1B,IAEdqB,EAAAA,EAAAA,IAACM,EAAAA,GAAiB,CAChBX,MAAOV,EAAYU,OAASH,EAAAA,GAC5Be,KAAK,aACLC,SAAUpB,EACVqB,cAAeA,IAAM3B,GAAgB,GACrC4B,eAAgBA,KACd5B,GAAgB,GAChBH,IACAE,GAAoB,EAEtBM,uBAAwBA,MAI5B,IACN,C,wFCvFO,MAAMwB,EAAmB,EAEnB9C,EAAoBD,EAAAA,GAAOG,GAA4B;gBACpDC,IAAA,IAAC,OAAEgB,GAAQhB,EAAA,OAAKgB,CAAM;WAC3B4B,IAAA,IAAC,MAAE7B,GAAO6B,EAAA,OAAM7B,IAAU4B,EAAmB,OAAS,GAAG5B,KAAS;EAGhE8B,GAAiBjD,EAAAA,EAAAA,IAAOkD,EAAAA,EAAS;;;;EAMjCC,EAAgBnD,EAAAA,GAAOG,GAElC;WACSiD,IAAA,IAAAC,EAAA,IAAC,MAAE9C,EAAK,OAAE+C,EAAS,SAASF,EAAA,OAAyB,OAAzBC,EAAK9C,EAAMC,OAAO8C,SAAO,EAApBD,EAAsB5C,IAAI","sources":["webpack://superset/./src/filters/components/Time/TimeFilterPlugin.tsx","webpack://superset/./src/filters/components/common.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, NO_TIME_RANGE } from '@superset-ui/core';\nimport React, { useCallback, useEffect } from 'react';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport { PluginFilterTimeProps } from './types';\nimport { FilterPluginStyle } from '../common';\n\nconst TimeFilterStyles = styled(FilterPluginStyle)`\n  display: flex;\n  align-items: center;\n  overflow-x: auto;\n\n  & .ant-tag {\n    margin-right: 0;\n  }\n`;\n\nconst ControlContainer = styled.div<{\n  validateStatus?: 'error' | 'warning' | 'info';\n}>`\n  display: flex;\n  height: 100%;\n  max-width: 100%;\n  width: 100%;\n  & > div,\n  & > div:hover {\n    ${({ validateStatus, theme }) =>\n      validateStatus && `border-color: ${theme.colors[validateStatus]?.base}`}\n  }\n`;\n\nexport default function TimeFilterPlugin(props: PluginFilterTimeProps) {\n  const {\n    setDataMask,\n    setHoveredFilter,\n    unsetHoveredFilter,\n    setFocusedFilter,\n    unsetFocusedFilter,\n    setFilterActive,\n    width,\n    height,\n    filterState,\n    inputRef,\n    isOverflowingFilterBar = false,\n  } = props;\n\n  const handleTimeRangeChange = useCallback(\n    (timeRange?: string): void => {\n      const isSet = timeRange && timeRange !== NO_TIME_RANGE;\n      setDataMask({\n        extraFormData: isSet\n          ? {\n              time_range: timeRange,\n            }\n          : {},\n        filterState: {\n          value: isSet ? timeRange : undefined,\n        },\n      });\n    },\n    [setDataMask],\n  );\n\n  useEffect(() => {\n    handleTimeRangeChange(filterState.value);\n  }, [filterState.value]);\n\n  return props.formData?.inView ? (\n    <TimeFilterStyles width={width} height={height}>\n      <ControlContainer\n        ref={inputRef}\n        validateStatus={filterState.validateStatus}\n        onFocus={setFocusedFilter}\n        onBlur={unsetFocusedFilter}\n        onMouseEnter={setHoveredFilter}\n        onMouseLeave={unsetHoveredFilter}\n      >\n        <DateFilterControl\n          value={filterState.value || NO_TIME_RANGE}\n          name=\"time_range\"\n          onChange={handleTimeRangeChange}\n          onOpenPopover={() => setFilterActive(true)}\n          onClosePopover={() => {\n            setFilterActive(false);\n            unsetHoveredFilter();\n            unsetFocusedFilter();\n          }}\n          isOverflowingFilterBar={isOverflowingFilterBar}\n        />\n      </ControlContainer>\n    </TimeFilterStyles>\n  ) : null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { PluginFilterStylesProps } from './types';\nimport FormItem from '../../components/Form/FormItem';\n\nexport const RESPONSIVE_WIDTH = 0;\n\nexport const FilterPluginStyle = styled.div<PluginFilterStylesProps>`\n  min-height: ${({ height }) => height}px;\n  width: ${({ width }) => (width === RESPONSIVE_WIDTH ? '100%' : `${width}px`)};\n`;\n\nexport const StyledFormItem = styled(FormItem)`\n  &.ant-row.ant-form-item {\n    margin: 0;\n  }\n`;\n\nexport const StatusMessage = styled.div<{\n  status?: 'error' | 'warning' | 'info';\n}>`\n  color: ${({ theme, status = 'error' }) => theme.colors[status]?.base};\n`;\n"],"names":["TimeFilterStyles","styled","FilterPluginStyle","ControlContainer","div","_ref","_theme$colors$validat","validateStatus","theme","colors","base","TimeFilterPlugin","props","_props$formData","setDataMask","setHoveredFilter","unsetHoveredFilter","setFocusedFilter","unsetFocusedFilter","setFilterActive","width","height","filterState","inputRef","isOverflowingFilterBar","handleTimeRangeChange","useCallback","timeRange","isSet","NO_TIME_RANGE","extraFormData","time_range","value","undefined","useEffect","formData","inView","___EmotionJSX","ref","onFocus","onBlur","onMouseEnter","onMouseLeave","DateFilterControl","name","onChange","onOpenPopover","onClosePopover","RESPONSIVE_WIDTH","_ref2","StyledFormItem","FormItem","StatusMessage","_ref3","_theme$colors$status","status"],"sourceRoot":""}