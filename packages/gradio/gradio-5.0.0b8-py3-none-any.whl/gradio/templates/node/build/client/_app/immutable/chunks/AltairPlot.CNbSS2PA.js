import{s as B,e as V,a as G,c as z,b as P,f as w,g as H,r as W,i as M,h as x,n as D,J as K,O as Q,t as U,d as X,j as Y,w as j}from"./scheduler.C_sdfy-5.js";import{S as Z,i as $}from"./index.D_Dnc2IG.js";import{r as C}from"./2.CFhpxp2a.js";import{g as ee}from"./color.B1kCk91Q.js";import te from"./vega-embed.module.Chxw61z-.js";function oe(l,t,o,n){let e=t.getPropertyValue("--color-accent"),a=t.getPropertyValue("--body-text-color"),r=t.getPropertyValue("--border-color-primary"),f=t.fontFamily,p=t.getPropertyValue("--block-title-text-weight");const m=s=>s.endsWith("px")?parseFloat(s.slice(0,-2)):12;let b=m(t.getPropertyValue("--text-md")),h=m(t.getPropertyValue("--text-sm")),d={autosize:{type:"fit",contains:"padding"},axis:{labelFont:f,labelColor:a,titleFont:f,titleColor:a,tickColor:r,labelFontSize:h,gridColor:r,titleFontWeight:"normal",titleFontSize:h,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:a,labelFont:f,titleColor:a,titleFont:f,titleFontWeight:"normal",titleFontSize:h,labelFontWeight:"normal",offset:2},title:{color:a,font:f,fontSize:b,fontWeight:p,anchor:"middle"},view:{stroke:r}};l.config=d;let c=l.encoding,_=l.layer;switch(o){case"scatter":l.config.mark={stroke:e},c.color&&c.color.type=="nominal"?c.color.scale.range=c.color.scale.range.map((s,u)=>S(n,u)):c.color&&c.color.type=="quantitative"&&(c.color.scale.range=["#eff6ff","#1e3a8a"],c.color.scale.range.interpolate="hsl");break;case"line":l.config.mark={stroke:e,cursor:"crosshair"},_.forEach(s=>{s.encoding.color&&(s.encoding.color.scale.range=s.encoding.color.scale.range.map((u,k)=>S(n,k)))});break;case"bar":l.config.mark={opacity:.8,fill:e},c.color&&(c.color.scale.range=c.color.scale.range.map((s,u)=>S(n,u)));break}return l}function S(l,t){var n;let o=l[t%l.length];return o&&o in C?(n=C[o])==null?void 0:n.primary:o||C[ee(t)].primary}function I(l){let t,o;return{c(){t=V("div"),o=U(l[0]),this.h()},l(n){t=z(n,"DIV",{class:!0});var e=P(t);o=X(e,l[0]),e.forEach(w),this.h()},h(){W(t,"class","caption layout svelte-1qhqpn7")},m(n,e){M(n,t,e),x(t,o)},p(n,e){e&1&&Y(o,n[0])},d(n){n&&w(t)}}}function le(l){let t,o,n,e=l[0]&&I(l);return{c(){t=V("div"),o=V("div"),n=G(),e&&e.c(),this.h()},l(a){t=z(a,"DIV",{"data-testid":!0,class:!0});var r=P(t);o=z(r,"DIV",{}),P(o).forEach(w),n=H(r),e&&e.l(r),r.forEach(w),this.h()},h(){W(t,"data-testid","altair"),W(t,"class","altair layout svelte-1qhqpn7")},m(a,r){M(a,t,r),x(t,o),l[11](o),x(t,n),e&&e.m(t,null),l[12](t)},p(a,[r]){a[0]?e?e.p(a,r):(e=I(a),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:D,o:D,d(a){a&&w(t),l[11](null),e&&e.d(),l[12](null)}}}function ie(l,t,o){let n,e,a,{value:r}=t,{colors:f=[]}=t,{caption:p}=t,{show_actions_button:m}=t,{gradio:b}=t,h,d,c,{_selectable:_}=t,s=window.getComputedStyle(document.body),u,k;const q=()=>Math.min(d.offsetWidth,k||d.offsetWidth);let E=()=>{};const A=()=>{a&&o(9,e.width=q(),e),te(h,e,{actions:m}).then(function(i){if(c=i.view,E=()=>{c.signal("width",q()).run()},!_)return;const y=(v,F)=>{const g=c.signal("brush");if(g)if(Object.keys(g).length===0)b.dispatch("select",{value:null,index:null,selected:!1});else{const T=Object.keys(g)[0];let N=g[T].map(R=>R/1e3);b.dispatch("select",{value:g,index:N,selected:!0})}};c.addEventListener("mouseup",y),c.addEventListener("touchup",y)})};let O=new ResizeObserver(()=>{a&&e.width!==d.offsetWidth&&E()});K(()=>{A(),O.observe(d)}),Q(()=>{O.disconnect()});function J(i){j[i?"unshift":"push"](()=>{h=i,o(1,h)})}function L(i){j[i?"unshift":"push"](()=>{d=i,o(2,d)})}return l.$$set=i=>{"value"in i&&o(3,r=i.value),"colors"in i&&o(4,f=i.colors),"caption"in i&&o(0,p=i.caption),"show_actions_button"in i&&o(5,m=i.show_actions_button),"gradio"in i&&o(6,b=i.gradio),"_selectable"in i&&o(7,_=i._selectable)},l.$$.update=()=>{var i,y,v,F;l.$$.dirty&8&&o(10,n=r==null?void 0:r.plot),l.$$.dirty&1024&&o(9,e=JSON.parse(n)),l.$$.dirty&640&&e&&e.params&&!_&&o(9,e.params=e.params.filter(g=>g.name!=="brush"),e),l.$$.dirty&536&&r.chart&&o(9,e=oe(e,s,r.chart,f)),l.$$.dirty&768&&u!==e&&(o(8,u=e),k=e.width),l.$$.dirty&520&&(a=!((y=(i=e.encoding)==null?void 0:i.column)!=null&&y.field||(F=(v=e.encoding)==null?void 0:v.row)!=null&&F.field||r.chart===void 0))},[p,h,d,r,f,m,b,_,u,e,n,J,L]}class fe extends Z{constructor(t){super(),$(this,t,ie,le,B,{value:3,colors:4,caption:0,show_actions_button:5,gradio:6,_selectable:7})}}export{fe as default};
