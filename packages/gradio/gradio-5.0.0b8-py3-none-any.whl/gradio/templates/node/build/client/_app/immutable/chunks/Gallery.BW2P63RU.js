import{s as rl,H as fl,a as $,z as Z,g as U,i as L,F as le,f as E,y as ol,J as al,a0 as sl,W as ul,w as se,M as pe,e as C,c as S,b as P,r as V,E as H,v as R,h as N,Q as Ue,a1 as cl,R as ml,t as Oe,d as Re,j as Ae,n as Me}from"./scheduler.C_sdfy-5.js";import{S as _l,i as hl,t as g,g as A,b as k,e as M,c as z,a as B,m as D,d as q}from"./index.D_Dnc2IG.js";import{u as gl,e as re,I as fe,C as bl}from"./2.CFhpxp2a.js";import{D as pl}from"./Download.CWyupjtW.js";import{a as ue,M as de}from"./Minimize.C_v_Hen9.js";import{I as Ce}from"./Image.BICviL2V.js";import{P as Se}from"./Play.DqfTz1xW.js";import{B as dl}from"./BlockLabel.RrZy2lJ2.js";import{E as wl}from"./Empty.DFzkRrVJ.js";import{S as kl}from"./ShareButton.DwcGqZjK.js";import{I as Pe}from"./IconButtonWrapper.ByxIRnez.js";/* empty css                                             */import{M as vl}from"./ModifyUpload.FOOCl2js.js";import{I as ce}from"./Image.D1v7iwpD.js";/* empty css                                                   *//* empty css                                                   */import{V as me}from"./Video.TFLsjsvU.js";var we=Object.prototype.hasOwnProperty;function ke(n,l,t){for(t of n.keys())if(ee(t,l))return t}function ee(n,l){var t,e,i;if(n===l)return!0;if(n&&l&&(t=n.constructor)===l.constructor){if(t===Date)return n.getTime()===l.getTime();if(t===RegExp)return n.toString()===l.toString();if(t===Array){if((e=n.length)===l.length)for(;e--&&ee(n[e],l[e]););return e===-1}if(t===Set){if(n.size!==l.size)return!1;for(e of n)if(i=e,i&&typeof i=="object"&&(i=ke(l,i),!i)||!l.has(i))return!1;return!0}if(t===Map){if(n.size!==l.size)return!1;for(e of n)if(i=e[0],i&&typeof i=="object"&&(i=ke(l,i),!i)||!ee(e[1],l.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),l=new Uint8Array(l);else if(t===DataView){if((e=n.byteLength)===l.byteLength)for(;e--&&n.getInt8(e)===l.getInt8(e););return e===-1}if(ArrayBuffer.isView(n)){if((e=n.byteLength)===l.byteLength)for(;e--&&n[e]===l[e];);return e===-1}if(!t||typeof n=="object"){e=0;for(t in n)if(we.call(n,t)&&++e&&!we.call(l,t)||!(t in l)||!ee(n[t],l[t]))return!1;return Object.keys(l).length===e}}return n!==n&&l!==l}async function yl(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([t,e])=>t===null||!t.url?"":await gl(t.url)))).map(t=>`<img src="${t}" style="height: 400px" />`).join("")}</div>`:""}const{window:Fe}=sl;function ve(n,l,t){const e=n.slice();return e[47]=l[t],e[49]=t,e}function ye(n,l,t){const e=n.slice();return e[50]=l[t],e[51]=l,e[49]=t,e}function je(n){let l,t;return l=new dl({props:{show_label:n[2],Icon:Ce,label:n[3]||"Gallery"}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&4&&(r.show_label=e[2]),i[0]&8&&(r.label=e[3]||"Gallery"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function jl(n){let l,t,e,i,r,a,b,f,_=n[21]&&n[7]&&Ee(n),o=n[12]&&Ve(n);a=new Pe({props:{$$slots:{default:[ql]},$$scope:{ctx:n}}});let p=re(n[15]),u=[];for(let c=0;c<p.length;c+=1)u[c]=$e(ve(n,p,c));const v=c=>k(u[c],1,1,()=>{u[c]=null});return{c(){l=C("div"),_&&_.c(),t=$(),e=C("div"),i=C("div"),o&&o.c(),r=$(),z(a.$$.fragment),b=$();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){l=S(c,"DIV",{class:!0});var d=P(l);_&&_.l(d),t=U(d),e=S(d,"DIV",{class:!0});var h=P(e);i=S(h,"DIV",{class:!0,style:!0});var w=P(i);o&&o.l(w),r=U(w),B(a.$$.fragment,w),b=U(w);for(let m=0;m<u.length;m+=1)u[m].l(w);w.forEach(E),h.forEach(E),d.forEach(E),this.h()},h(){V(i,"class","grid-container svelte-17j4qub"),H(i,"--grid-cols",n[4]),H(i,"--grid-rows",n[5]),H(i,"--object-fit",n[8]),H(i,"height",n[6]),R(i,"pt-6",n[2]),V(e,"class","grid-wrap svelte-17j4qub"),R(e,"minimal",n[13]==="minimal"),R(e,"fixed-height",n[13]!=="minimal"&&(!n[6]||n[6]=="auto")),R(e,"hidden",n[16]),V(l,"class","gallery-container")},m(c,d){L(c,l,d),_&&_.m(l,null),N(l,t),N(l,e),N(e,i),o&&o.m(i,null),N(i,r),D(a,i,null),N(i,b);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(i,null);n[42](l),f=!0},p(c,d){c[21]&&c[7]?_?(_.p(c,d),d[0]&2097280&&g(_,1)):(_=Ee(c),_.c(),g(_,1),_.m(l,t)):_&&(A(),k(_,1,1,()=>{_=null}),M()),c[12]?o?(o.p(c,d),d[0]&4096&&g(o,1)):(o=Ve(c),o.c(),g(o,1),o.m(i,r)):o&&(A(),k(o,1,1,()=>{o=null}),M());const h={};if(d[0]&35328|d[1]&2097152&&(h.$$scope={dirty:d,ctx:c}),a.$set(h),d[0]&32770){p=re(c[15]);let w;for(w=0;w<p.length;w+=1){const m=ve(c,p,w);u[w]?(u[w].p(m,d),g(u[w],1)):(u[w]=$e(m),u[w].c(),g(u[w],1),u[w].m(i,null))}for(A(),w=p.length;w<u.length;w+=1)v(w);M()}(!f||d[0]&16)&&H(i,"--grid-cols",c[4]),(!f||d[0]&32)&&H(i,"--grid-rows",c[5]),(!f||d[0]&256)&&H(i,"--object-fit",c[8]),(!f||d[0]&64)&&H(i,"height",c[6]),(!f||d[0]&4)&&R(i,"pt-6",c[2]),(!f||d[0]&8192)&&R(e,"minimal",c[13]==="minimal"),(!f||d[0]&8256)&&R(e,"fixed-height",c[13]!=="minimal"&&(!c[6]||c[6]=="auto")),(!f||d[0]&65536)&&R(e,"hidden",c[16])},i(c){if(!f){g(_),g(o),g(a.$$.fragment,c);for(let d=0;d<p.length;d+=1)g(u[d]);f=!0}},o(c){k(_),k(o),k(a.$$.fragment,c),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)k(u[d]);f=!1},d(c){c&&E(l),_&&_.d(),o&&o.d(),q(a),Ue(u,c),n[42](null)}}}function El(n){let l,t;return l=new wl({props:{unpadded_box:!0,size:"large",$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[1]&2097152&&(r.$$scope={dirty:i,ctx:e}),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function Ee(n){var Q;let l,t,e,i,r,a,b,f,_,o,p,u;t=new Pe({props:{$$slots:{default:[Il]},$$scope:{ctx:n}}});const v=[zl,Tl],c=[];function d(j,y){return"image"in j[21]?0:1}r=d(n),a=c[r]=v[r](n);let h=((Q=n[21])==null?void 0:Q.caption)&&De(n),w=re(n[15]),m=[];for(let j=0;j<w.length;j+=1)m[j]=qe(ye(n,w,j));const te=j=>k(m[j],1,1,()=>{m[j]=null});return{c(){l=C("button"),z(t.$$.fragment),e=$(),i=C("button"),a.c(),b=$(),h&&h.c(),f=$(),_=C("div");for(let j=0;j<m.length;j+=1)m[j].c();this.h()},l(j){l=S(j,"BUTTON",{class:!0});var y=P(l);B(t.$$.fragment,y),e=U(y),i=S(y,"BUTTON",{class:!0,style:!0,"aria-label":!0});var O=P(i);a.l(O),O.forEach(E),b=U(y),h&&h.l(y),f=U(y),_=S(y,"DIV",{class:!0,"data-testid":!0});var F=P(_);for(let W=0;W<m.length;W+=1)m[W].l(F);F.forEach(E),y.forEach(E),this.h()},h(){V(i,"class","media-button svelte-17j4qub"),H(i,"height","calc(100% - "+(n[21].caption?"80px":"60px")+")"),V(i,"aria-label","detailed view of selected image"),V(_,"class","thumbnails scroll-hide svelte-17j4qub"),V(_,"data-testid","container_el"),V(l,"class","preview svelte-17j4qub"),R(l,"minimal",n[13]==="minimal")},m(j,y){L(j,l,y),D(t,l,null),N(l,e),N(l,i),c[r].m(i,null),N(l,b),h&&h.m(l,null),N(l,f),N(l,_);for(let O=0;O<m.length;O+=1)m[O]&&m[O].m(_,null);n[37](_),o=!0,p||(u=[le(i,"click",function(){cl("image"in n[21]?n[34]:null)&&("image"in n[21]?n[34]:null).apply(this,arguments)}),le(l,"keydown",n[23])],p=!0)},p(j,y){var W;n=j;const O={};y[0]&2182146|y[1]&2097152&&(O.$$scope={dirty:y,ctx:n}),t.$set(O);let F=r;if(r=d(n),r===F?c[r].p(n,y):(A(),k(c[F],1,1,()=>{c[F]=null}),M(),a=c[r],a?a.p(n,y):(a=c[r]=v[r](n),a.c()),g(a,1),a.m(i,null)),(!o||y[0]&2097152)&&H(i,"height","calc(100% - "+(n[21].caption?"80px":"60px")+")"),(W=n[21])!=null&&W.caption?h?h.p(n,y):(h=De(n),h.c(),h.m(l,f)):h&&(h.d(1),h=null),y[0]&303106){w=re(n[15]);let I;for(I=0;I<w.length;I+=1){const T=ye(n,w,I);m[I]?(m[I].p(T,y),g(m[I],1)):(m[I]=qe(T),m[I].c(),g(m[I],1),m[I].m(_,null))}for(A(),I=w.length;I<m.length;I+=1)te(I);M()}(!o||y[0]&8192)&&R(l,"minimal",n[13]==="minimal")},i(j){if(!o){g(t.$$.fragment,j),g(a);for(let y=0;y<w.length;y+=1)g(m[y]);o=!0}},o(j){k(t.$$.fragment,j),k(a),m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)k(m[y]);o=!1},d(j){j&&E(l),q(t),c[r].d(),h&&h.d(),Ue(m,j),n[37](null),p=!1,ml(u)}}}function Ie(n){let l,t;return l=new fe({props:{Icon:pl,label:n[11]("common.download")}}),l.$on("click",n[32]),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2048&&(r.label=e[11]("common.download")),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function Te(n){let l,t;return l=new fe({props:{Icon:n[16]?ue:de,label:n[16]?"Exit full screen":"View in full screen"}}),l.$on("click",n[25]),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&65536&&(r.Icon=e[16]?ue:de),i[0]&65536&&(r.label=e[16]?"Exit full screen":"View in full screen"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function ze(n){let l,t;return l=new fe({props:{Icon:ue,label:"Exit full screen"}}),l.$on("click",n[25]),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p:Me,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function Be(n){let l,t;return l=new fe({props:{Icon:bl,label:"Close"}}),l.$on("click",n[33]),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p:Me,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function Il(n){let l,t,e,i,r,a=n[10]&&Ie(n),b=n[14]&&!n[16]&&Te(n),f=n[14]&&n[16]&&ze(n),_=!n[16]&&Be(n);return{c(){a&&a.c(),l=$(),b&&b.c(),t=$(),f&&f.c(),e=$(),_&&_.c(),i=Z()},l(o){a&&a.l(o),l=U(o),b&&b.l(o),t=U(o),f&&f.l(o),e=U(o),_&&_.l(o),i=Z()},m(o,p){a&&a.m(o,p),L(o,l,p),b&&b.m(o,p),L(o,t,p),f&&f.m(o,p),L(o,e,p),_&&_.m(o,p),L(o,i,p),r=!0},p(o,p){o[10]?a?(a.p(o,p),p[0]&1024&&g(a,1)):(a=Ie(o),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(A(),k(a,1,1,()=>{a=null}),M()),o[14]&&!o[16]?b?(b.p(o,p),p[0]&81920&&g(b,1)):(b=Te(o),b.c(),g(b,1),b.m(t.parentNode,t)):b&&(A(),k(b,1,1,()=>{b=null}),M()),o[14]&&o[16]?f?(f.p(o,p),p[0]&81920&&g(f,1)):(f=ze(o),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(A(),k(f,1,1,()=>{f=null}),M()),o[16]?_&&(A(),k(_,1,1,()=>{_=null}),M()):_?(_.p(o,p),p[0]&65536&&g(_,1)):(_=Be(o),_.c(),g(_,1),_.m(i.parentNode,i))},i(o){r||(g(a),g(b),g(f),g(_),r=!0)},o(o){k(a),k(b),k(f),k(_),r=!1},d(o){o&&(E(l),E(t),E(e),E(i)),a&&a.d(o),b&&b.d(o),f&&f.d(o),_&&_.d(o)}}}function Tl(n){let l,t;return l=new me({props:{src:n[21].video.url,"data-testid":"detailed-video",alt:n[21].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2097152&&(r.src=e[21].video.url),i[0]&2097152&&(r.alt=e[21].caption||""),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function zl(n){let l,t;return l=new ce({props:{"data-testid":"detailed-image",src:n[21].image.url,alt:n[21].caption||"",title:n[21].caption||null,class:n[21].caption&&"with-caption",loading:"lazy"}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2097152&&(r.src=e[21].image.url),i[0]&2097152&&(r.alt=e[21].caption||""),i[0]&2097152&&(r.title=e[21].caption||null),i[0]&2097152&&(r.class=e[21].caption&&"with-caption"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function De(n){let l,t=n[21].caption+"",e;return{c(){l=C("caption"),e=Oe(t),this.h()},l(i){l=S(i,"CAPTION",{class:!0});var r=P(l);e=Re(r,t),r.forEach(E),this.h()},h(){V(l,"class","caption svelte-17j4qub")},m(i,r){L(i,l,r),N(l,e)},p(i,r){r[0]&2097152&&t!==(t=i[21].caption+"")&&Ae(e,t)},d(i){i&&E(l)}}}function Bl(n){let l,t,e,i;return l=new Se({}),e=new me({props:{src:n[50].video.url,title:n[50].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){z(l.$$.fragment),t=$(),z(e.$$.fragment)},l(r){B(l.$$.fragment,r),t=U(r),B(e.$$.fragment,r)},m(r,a){D(l,r,a),L(r,t,a),D(e,r,a),i=!0},p(r,a){const b={};a[0]&32768&&(b.src=r[50].video.url),a[0]&32768&&(b.title=r[50].caption||null),e.$set(b)},i(r){i||(g(l.$$.fragment,r),g(e.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),k(e.$$.fragment,r),i=!1},d(r){r&&E(t),q(l,r),q(e,r)}}}function Dl(n){let l,t;return l=new ce({props:{src:n[50].image.url,title:n[50].caption||null,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy"}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&32768&&(r.src=e[50].image.url),i[0]&32768&&(r.title=e[50].caption||null),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function qe(n){let l,t,e,i,r,a=n[49],b,f,_;const o=[Dl,Bl],p=[];function u(h,w){return"image"in h[50]?0:1}t=u(n),e=p[t]=o[t](n);const v=()=>n[35](l,a),c=()=>n[35](null,a);function d(){return n[36](n[49])}return{c(){l=C("button"),e.c(),i=$(),this.h()},l(h){l=S(h,"BUTTON",{class:!0,"aria-label":!0});var w=P(l);e.l(w),i=U(w),w.forEach(E),this.h()},h(){V(l,"class","thumbnail-item thumbnail-small svelte-17j4qub"),V(l,"aria-label",r="Thumbnail "+(n[49]+1)+" of "+n[15].length),R(l,"selected",n[1]===n[49]&&n[13]!=="minimal")},m(h,w){L(h,l,w),p[t].m(l,null),N(l,i),v(),b=!0,f||(_=le(l,"click",d),f=!0)},p(h,w){n=h;let m=t;t=u(n),t===m?p[t].p(n,w):(A(),k(p[m],1,1,()=>{p[m]=null}),M(),e=p[t],e?e.p(n,w):(e=p[t]=o[t](n),e.c()),g(e,1),e.m(l,i)),(!b||w[0]&32768&&r!==(r="Thumbnail "+(n[49]+1)+" of "+n[15].length))&&V(l,"aria-label",r),a!==n[49]&&(c(),a=n[49],v()),(!b||w[0]&8194)&&R(l,"selected",n[1]===n[49]&&n[13]!=="minimal")},i(h){b||(g(e),b=!0)},o(h){k(e),b=!1},d(h){h&&E(l),p[t].d(),c(),f=!1,_()}}}function Ve(n){let l,t,e;return t=new vl({props:{i18n:n[11]}}),t.$on("clear",n[38]),{c(){l=C("div"),z(t.$$.fragment),this.h()},l(i){l=S(i,"DIV",{class:!0});var r=P(l);B(t.$$.fragment,r),r.forEach(E),this.h()},h(){V(l,"class","icon-button svelte-17j4qub")},m(i,r){L(i,l,r),D(t,l,null),e=!0},p(i,r){const a={};r[0]&2048&&(a.i18n=i[11]),t.$set(a)},i(i){e||(g(t.$$.fragment,i),e=!0)},o(i){k(t.$$.fragment,i),e=!1},d(i){i&&E(l),q(t)}}}function Le(n){let l,t,e;return t=new kl({props:{i18n:n[11],value:n[15],formatter:yl}}),t.$on("share",n[39]),t.$on("error",n[40]),{c(){l=C("div"),z(t.$$.fragment),this.h()},l(i){l=S(i,"DIV",{class:!0});var r=P(l);B(t.$$.fragment,r),r.forEach(E),this.h()},h(){V(l,"class","icon-button svelte-17j4qub")},m(i,r){L(i,l,r),D(t,l,null),e=!0},p(i,r){const a={};r[0]&2048&&(a.i18n=i[11]),r[0]&32768&&(a.value=i[15]),t.$set(a)},i(i){e||(g(t.$$.fragment,i),e=!0)},o(i){k(t.$$.fragment,i),e=!1},d(i){i&&E(l),q(t)}}}function ql(n){let l,t,e=n[9]&&Le(n);return{c(){e&&e.c(),l=Z()},l(i){e&&e.l(i),l=Z()},m(i,r){e&&e.m(i,r),L(i,l,r),t=!0},p(i,r){i[9]?e?(e.p(i,r),r[0]&512&&g(e,1)):(e=Le(i),e.c(),g(e,1),e.m(l.parentNode,l)):e&&(A(),k(e,1,1,()=>{e=null}),M())},i(i){t||(g(e),t=!0)},o(i){k(e),t=!1},d(i){i&&E(l),e&&e.d(i)}}}function Vl(n){let l,t,e,i;return l=new Se({}),e=new me({props:{src:n[47].video.url,title:n[47].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){z(l.$$.fragment),t=$(),z(e.$$.fragment)},l(r){B(l.$$.fragment,r),t=U(r),B(e.$$.fragment,r)},m(r,a){D(l,r,a),L(r,t,a),D(e,r,a),i=!0},p(r,a){const b={};a[0]&32768&&(b.src=r[47].video.url),a[0]&32768&&(b.title=r[47].caption||null),e.$set(b)},i(r){i||(g(l.$$.fragment,r),g(e.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),k(e.$$.fragment,r),i=!1},d(r){r&&E(t),q(l,r),q(e,r)}}}function Ll(n){let l,t;return l=new ce({props:{alt:n[47].caption||"",src:typeof n[47].image=="string"?n[47].image:n[47].image.url,loading:"lazy"}}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&32768&&(r.alt=e[47].caption||""),i[0]&32768&&(r.src=typeof e[47].image=="string"?e[47].image:e[47].image.url),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function Ne(n){let l,t=n[47].caption+"",e;return{c(){l=C("div"),e=Oe(t),this.h()},l(i){l=S(i,"DIV",{class:!0});var r=P(l);e=Re(r,t),r.forEach(E),this.h()},h(){V(l,"class","caption-label svelte-17j4qub")},m(i,r){L(i,l,r),N(l,e)},p(i,r){r[0]&32768&&t!==(t=i[47].caption+"")&&Ae(e,t)},d(i){i&&E(l)}}}function $e(n){let l,t,e,i,r,a,b,f,_;const o=[Ll,Vl],p=[];function u(d,h){return"image"in d[47]?0:1}t=u(n),e=p[t]=o[t](n);let v=n[47].caption&&Ne(n);function c(){return n[41](n[49])}return{c(){l=C("button"),e.c(),i=$(),v&&v.c(),r=$(),this.h()},l(d){l=S(d,"BUTTON",{class:!0,"aria-label":!0});var h=P(l);e.l(h),i=U(h),v&&v.l(h),r=U(h),h.forEach(E),this.h()},h(){V(l,"class","thumbnail-item thumbnail-lg svelte-17j4qub"),V(l,"aria-label",a="Thumbnail "+(n[49]+1)+" of "+n[15].length),R(l,"selected",n[1]===n[49])},m(d,h){L(d,l,h),p[t].m(l,null),N(l,i),v&&v.m(l,null),N(l,r),b=!0,f||(_=le(l,"click",c),f=!0)},p(d,h){n=d;let w=t;t=u(n),t===w?p[t].p(n,h):(A(),k(p[w],1,1,()=>{p[w]=null}),M(),e=p[t],e?e.p(n,h):(e=p[t]=o[t](n),e.c()),g(e,1),e.m(l,i)),n[47].caption?v?v.p(n,h):(v=Ne(n),v.c(),v.m(l,r)):v&&(v.d(1),v=null),(!b||h[0]&32768&&a!==(a="Thumbnail "+(n[49]+1)+" of "+n[15].length))&&V(l,"aria-label",a),(!b||h[0]&2)&&R(l,"selected",n[1]===n[49])},i(d){b||(g(e),b=!0)},o(d){k(e),b=!1},d(d){d&&E(l),p[t].d(),v&&v.d(),f=!1,_()}}}function Nl(n){let l,t;return l=new Ce({}),{c(){z(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){q(l,e)}}}function $l(n){let l,t,e,i,r,a,b;fl(n[31]);let f=n[2]&&je(n);const _=[El,jl],o=[];function p(u,v){return u[0]==null||u[15]==null||u[15].length===0?0:1}return t=p(n),e=o[t]=_[t](n),{c(){f&&f.c(),l=$(),e.c(),i=Z()},l(u){f&&f.l(u),l=U(u),e.l(u),i=Z()},m(u,v){f&&f.m(u,v),L(u,l,v),o[t].m(u,v),L(u,i,v),r=!0,a||(b=le(Fe,"resize",n[31]),a=!0)},p(u,v){u[2]?f?(f.p(u,v),v[0]&4&&g(f,1)):(f=je(u),f.c(),g(f,1),f.m(l.parentNode,l)):f&&(A(),k(f,1,1,()=>{f=null}),M());let c=t;t=p(u),t===c?o[t].p(u,v):(A(),k(o[c],1,1,()=>{o[c]=null}),M(),e=o[t],e?e.p(u,v):(e=o[t]=_[t](u),e.c()),g(e,1),e.m(i.parentNode,i))},i(u){r||(g(f),g(e),r=!0)},o(u){k(f),k(e),r=!1},d(u){u&&(E(l),E(i)),f&&f.d(u),o[t].d(u),a=!1,b()}}}function Ul(n,l,t){let e,i,r,{show_label:a=!0}=l,{label:b}=l,{value:f=null}=l,{columns:_=[2]}=l,{rows:o=void 0}=l,{height:p="auto"}=l,{preview:u}=l,{allow_preview:v=!0}=l,{object_fit:c="cover"}=l,{show_share_button:d=!1}=l,{show_download_button:h=!1}=l,{i18n:w}=l,{selected_index:m=null}=l,{interactive:te}=l,{_fetch:Q}=l,{mode:j="normal"}=l,{show_fullscreen_button:y=!0}=l,O=!1,F;const W=ol();let I=!0,T=null,oe=f;m==null&&u&&(f!=null&&f.length)&&(m=0);let ae=m;function _e(s){const G=s.target,J=s.offsetX,Y=G.offsetWidth/2;J<Y?t(1,m=e):t(1,m=i)}function Ge(s){switch(s.code){case"Escape":s.preventDefault(),t(1,m=null);break;case"ArrowLeft":s.preventDefault(),t(1,m=e);break;case"ArrowRight":s.preventDefault(),t(1,m=i);break}}let K=[],X;async function He(s){var be;if(typeof s!="number"||(await ul(),K[s]===void 0))return;(be=K[s])==null||be.focus();const{left:G,width:J}=X.getBoundingClientRect(),{left:ne,width:Y}=K[s].getBoundingClientRect(),x=ne-G+Y/2-J/2+X.scrollLeft;X&&typeof X.scrollTo=="function"&&X.scrollTo({left:x<0?0:x,behavior:"smooth"})}let he=0;async function ge(s,G){let J;try{J=await Q(s)}catch(x){if(x instanceof TypeError){window.open(s,"_blank","noreferrer");return}throw x}const ne=await J.blob(),Y=URL.createObjectURL(ne),ie=document.createElement("a");ie.href=Y,ie.download=G,ie.click(),URL.revokeObjectURL(Y)}al(()=>{document.addEventListener("fullscreenchange",()=>{t(16,O=!!document.fullscreenElement)})});const We=async()=>{O?await document.exitFullscreen():await F.requestFullscreen()};function Xe(){t(20,he=Fe.innerHeight)}const Je=()=>{const s="image"in r?r==null?void 0:r.image:r==null?void 0:r.video;if(s==null)return;const{url:G,orig_name:J}=s;G&&ge(G,J??"image")},Qe=()=>t(1,m=null),Ke=s=>_e(s);function Ye(s,G){se[s?"unshift":"push"](()=>{K[G]=s,t(18,K)})}const Ze=s=>t(1,m=s);function xe(s){se[s?"unshift":"push"](()=>{X=s,t(19,X)})}const el=()=>t(0,f=[]);function ll(s){pe.call(this,n,s)}function tl(s){pe.call(this,n,s)}const nl=s=>t(1,m=s);function il(s){se[s?"unshift":"push"](()=>{F=s,t(17,F)})}return n.$$set=s=>{"show_label"in s&&t(2,a=s.show_label),"label"in s&&t(3,b=s.label),"value"in s&&t(0,f=s.value),"columns"in s&&t(4,_=s.columns),"rows"in s&&t(5,o=s.rows),"height"in s&&t(6,p=s.height),"preview"in s&&t(26,u=s.preview),"allow_preview"in s&&t(7,v=s.allow_preview),"object_fit"in s&&t(8,c=s.object_fit),"show_share_button"in s&&t(9,d=s.show_share_button),"show_download_button"in s&&t(10,h=s.show_download_button),"i18n"in s&&t(11,w=s.i18n),"selected_index"in s&&t(1,m=s.selected_index),"interactive"in s&&t(12,te=s.interactive),"_fetch"in s&&t(27,Q=s._fetch),"mode"in s&&t(13,j=s.mode),"show_fullscreen_button"in s&&t(14,y=s.show_fullscreen_button)},n.$$.update=()=>{n.$$.dirty[0]&268435457&&t(28,I=f==null||f.length===0?!0:I),n.$$.dirty[0]&1&&t(15,T=f==null?null:f.map(s=>"video"in s?{video:s.video,caption:s.caption}:"image"in s?{image:s.image,caption:s.caption}:{})),n.$$.dirty[0]&872415235&&(ee(oe,f)||(I?(t(1,m=u&&(f!=null&&f.length)?0:null),t(28,I=!1)):t(1,m=m!=null&&f!=null&&m<f.length?m:null),W("change"),t(29,oe=f))),n.$$.dirty[0]&32770&&(e=((m??0)+((T==null?void 0:T.length)??0)-1)%((T==null?void 0:T.length)??0)),n.$$.dirty[0]&32770&&(i=((m??0)+1)%((T==null?void 0:T.length)??0)),n.$$.dirty[0]&1073774594&&m!==ae&&(t(30,ae=m),m!==null&&W("select",{index:m,value:T==null?void 0:T[m]})),n.$$.dirty[0]&130&&v&&He(m),n.$$.dirty[0]&32770&&t(21,r=m!=null&&T!=null?T[m]:null)},[f,m,a,b,_,o,p,v,c,d,h,w,te,j,y,T,O,F,K,X,he,r,_e,Ge,ge,We,u,Q,I,oe,ae,Xe,Je,Qe,Ke,Ye,Ze,xe,el,ll,tl,nl,il]}class xl extends _l{constructor(l){super(),hl(this,l,Ul,$l,rl,{show_label:2,label:3,value:0,columns:4,rows:5,height:6,preview:26,allow_preview:7,object_fit:8,show_share_button:9,show_download_button:10,i18n:11,selected_index:1,interactive:12,_fetch:27,mode:13,show_fullscreen_button:14},null,[-1,-1])}}export{xl as default};
