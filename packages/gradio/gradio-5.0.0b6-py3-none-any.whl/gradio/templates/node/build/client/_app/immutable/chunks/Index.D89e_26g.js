const __vite__fileDeps=["./vega-embed.module.DGpiuZHg.js","./2.DdwTC9iJ.js","./preload-helper.D6kgxu3v.js","./scheduler.xQsDa6L3.js","./index.lnKugwF0.js","./entry.BWtpGV5x.js","./stores.Bc6IucXj.js","../assets/2.C0GPlPVC.css","./dsv.DB8NKgIY.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as je}from"./preload-helper.D6kgxu3v.js";import{s as Ie,J as De,a as le,z as G,g as ie,i as C,f as v,r as Be,B as Ne,t as we,d as xe,j as Fe,e as Pe,c as ze,b as Ee,p as Se,n as be,h as qe}from"./scheduler.xQsDa6L3.js";import{S as Me,i as Re,c as I,a as D,m as B,t as k,b as F,d as N,g as he,e as ye}from"./index.lnKugwF0.js";import{B as He,h as Ue,d as Je,b as Xe,e as Ye}from"./2.DdwTC9iJ.js";import{E as Ge}from"./Empty.CgcJDYjO.js";import{L as Ke}from"./LineChart.CQp-JLz8.js";function ke(o){let e,t;const i=[{autoscroll:o[2].autoscroll},{i18n:o[2].i18n},o[10]];let a={};for(let n=0;n<i.length;n+=1)a=Ne(a,i[n]);return e=new Je({props:a}),e.$on("clear_status",o[37]),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,f){B(e,n,f),t=!0},p(n,f){const m=f[0]&1028?Xe(i,[f[0]&4&&{autoscroll:n[2].autoscroll},f[0]&4&&{i18n:n[2].i18n},f[0]&1024&&Ye(n[10])]):{};e.$set(m)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Qe(o){let e;return{c(){e=we(o[3])},l(t){e=xe(t,o[3])},m(t,i){C(t,e,i)},p(t,i){i[0]&8&&Fe(e,t[3])},d(t){t&&v(e)}}}function Ze(o){let e,t;return e=new Ge({props:{unpadded_box:!0,$$slots:{default:[$e]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},p(i,a){const n={};a[1]&4194304&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function pe(o){let e,t,i,a=o[1]&&ve(o);return{c(){e=Pe("div"),t=le(),a&&a.c(),i=G(),this.h()},l(n){e=ze(n,"DIV",{class:!0}),Ee(e).forEach(v),t=ie(n),a&&a.l(n),i=G(),this.h()},h(){Se(e,"class","svelte-10k9m4v")},m(n,f){C(n,e,f),o[38](e),C(n,t,f),a&&a.m(n,f),C(n,i,f)},p(n,f){n[1]?a?a.p(n,f):(a=ve(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:be,o:be,d(n){n&&(v(e),v(t),v(i)),o[38](null),a&&a.d(n)}}}function $e(o){let e,t;return e=new Ke({}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function ve(o){let e,t;return{c(){e=Pe("p"),t=we(o[1]),this.h()},l(i){e=ze(i,"P",{class:!0});var a=Ee(e);t=xe(a,o[1]),a.forEach(v),this.h()},h(){Se(e,"class","caption svelte-10k9m4v")},m(i,a){C(i,e,a),qe(e,t)},p(i,a){a[0]&2&&Fe(t,i[1])},d(i){i&&v(e)}}}function et(o){let e,t,i,a,n,f,m,r=o[10]&&ke(o);t=new Ue({props:{show_label:o[7],info:void 0,$$slots:{default:[Qe]},$$scope:{ctx:o}}});const d=[pe,Ze],c=[];function u(s,_){return s[0]&&s[13]?0:1}return a=u(o),n=c[a]=d[a](o),{c(){r&&r.c(),e=le(),I(t.$$.fragment),i=le(),n.c(),f=G()},l(s){r&&r.l(s),e=ie(s),D(t.$$.fragment,s),i=ie(s),n.l(s),f=G()},m(s,_){r&&r.m(s,_),C(s,e,_),B(t,s,_),C(s,i,_),c[a].m(s,_),C(s,f,_),m=!0},p(s,_){s[10]?r?(r.p(s,_),_[0]&1024&&k(r,1)):(r=ke(s),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(he(),F(r,1,1,()=>{r=null}),ye());const P={};_[0]&128&&(P.show_label=s[7]),_[0]&8|_[1]&4194304&&(P.$$scope={dirty:_,ctx:s}),t.$set(P);let O=a;a=u(s),a===O?c[a].p(s,_):(he(),F(c[O],1,1,()=>{c[O]=null}),ye(),n=c[a],n?n.p(s,_):(n=c[a]=d[a](s),n.c()),k(n,1),n.m(f.parentNode,f))},i(s){m||(k(r),k(t.$$.fragment,s),k(n),m=!0)},o(s){F(r),F(t.$$.fragment,s),F(n),m=!1},d(s){s&&(v(e),v(i),v(f)),r&&r.d(s),N(t,s),c[a].d(s)}}}function tt(o){let e,t;return e=new He({props:{visible:o[6],elem_id:o[4],elem_classes:o[5],scale:o[8],min_width:o[9],allow_overflow:!1,padding:!0,height:o[11],$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},p(i,a){const n={};a[0]&64&&(n.visible=i[6]),a[0]&16&&(n.elem_id=i[4]),a[0]&32&&(n.elem_classes=i[5]),a[0]&256&&(n.scale=i[8]),a[0]&512&&(n.min_width=i[9]),a[0]&2048&&(n.height=i[11]),a[0]&5263|a[1]&4194304&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function lt(o,e,t){let i,a,n,f,m,{value:r}=e,{x:d}=e,{y:c}=e,{color:u=null}=e,{title:s=null}=e,{x_title:_=null}=e,{y_title:P=null}=e,{color_title:O=null}=e,{x_bin:w=null}=e,{y_aggregate:T=void 0}=e,{color_map:q=null}=e,{x_lim:A=null}=e,{y_lim:M=null}=e,{x_label_angle:R=null}=e,{y_label_angle:H=null}=e,{caption:ne=null}=e,{sort:K=null}=e;function Ce(l){if(l==="x")return"ascending";if(l==="-x")return"descending";if(l==="y")return{field:c,order:"ascending"};if(l==="-y")return{field:c,order:"descending"};if(l===null)return;if(Array.isArray(l))return l}let{_selectable:U=!1}=e,J,{gradio:L}=e,z,Q=!1;const Oe={s:1,m:60,h:60*60,d:24*60*60};let j,V;function We(l){let b=l.columns.indexOf(d),S=l.columns.indexOf(c),y=u?l.columns.indexOf(u):null;return l.data.map(x=>{const h={[d]:x[b],[c]:x[S]};return u&&y!==null&&(h[u]=x[y]),h})}const Ae=typeof window<"u";let g,E,Z=!1,ae,X,p;async function oe(){if(E&&E.finalize(),!r||!g)return;ae=g.offsetWidth;const l=Le();l&&(X=new ResizeObserver(b=>{!b[0].target||!(b[0].target instanceof HTMLElement)||(ae===0&&g.offsetWidth!==0&&r.datatypes[d]==="nominal"?oe():E.signal("width",b[0].target.offsetWidth).run())}),p||(p=(await je(()=>import("./vega-embed.module.DGpiuZHg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)).default),p(g,l,{actions:!1}).then(function(b){E=b.view,X.observe(g);var S;E.addEventListener("dblclick",()=>{L.dispatch("double_click")}),g.addEventListener("mousedown",function(y){y.detail>1&&y.preventDefault()},!1),U&&E.addSignalListener("brush",function(y,x){if(Object.keys(x).length===0)return;clearTimeout(S);let h=x[Object.keys(x)[0]];n&&(h=[h[0]/1e3,h[1]/1e3]),Q?Y=()=>{L.dispatch("select",{value:h,index:h,selected:!0})}:S=setTimeout(function(){L.dispatch("select",{value:h,index:h,selected:!0})},250)})}))}let Y=null;De(()=>(t(34,Z=!0),g.addEventListener("mousedown",()=>{Q=!0}),g.addEventListener("mouseup",()=>{Q=!1,Y&&(Y(),Y=null)}),()=>{t(34,Z=!1),E&&E.finalize(),X&&X.disconnect()}));function Le(){if(!r||!m)return null;let l=m.getPropertyValue("--color-accent"),b=m.getPropertyValue("--body-text-color"),S=m.getPropertyValue("--border-color-primary"),y=m.fontFamily,x=m.getPropertyValue("--block-title-text-weight");const h=W=>W.endsWith("px")?parseFloat(W.slice(0,-2)):12;let ge=h(m.getPropertyValue("--text-md")),ee=h(m.getPropertyValue("--text-sm"));return{$schema:"https://vega.github.io/schema/vega-lite/v5.17.0.json",background:"transparent",config:{autosize:{type:"fit",contains:"padding"},axis:{labelFont:y,labelColor:b,titleFont:y,titleColor:b,titlePadding:8,tickColor:S,labelFontSize:ee,gridColor:S,titleFontWeight:"normal",titleFontSize:ee,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:b,labelFont:y,titleColor:b,titleFont:y,titleFontWeight:"normal",titleFontSize:ee,labelFontWeight:"normal",offset:2},title:{color:b,font:y,fontSize:ge,fontWeight:x,anchor:"middle"},view:{stroke:S},mark:{stroke:r.mark!=="bar"?l:void 0,fill:r.mark==="bar"?l:void 0,cursor:"crosshair"}},data:{name:"data"},datasets:{data:J},layer:["plot",...r.mark==="line"?["hover"]:[]].map(W=>({encoding:{size:r.mark==="line"?W=="plot"?{condition:{empty:!1,param:"hoverPlot",value:3},value:2}:{condition:{empty:!1,param:"hover",value:100},value:0}:void 0,opacity:W==="plot"?void 0:{condition:{empty:!1,param:"hover",value:1},value:0},x:{axis:R?{labelAngle:R}:{},field:d,title:_||d,type:r.datatypes[d],scale:f?{domain:f}:void 0,bin:z?{step:z}:void 0,sort:a},y:{axis:H?{labelAngle:H}:{},field:c,title:P||c,type:r.datatypes[c],scale:M?{domain:M}:void 0,aggregate:V?j:void 0},color:u?{field:u,legend:{orient:"bottom",title:O},scale:r.datatypes[u]==="nominal"?{domain:i,range:q?i.map(te=>q[te]):void 0}:{range:[100,200,300,400,500,600,700,800,900].map(te=>m.getPropertyValue("--primary-"+te)),interpolate:"hsl"},type:r.datatypes[u]}:void 0,tooltip:[{field:c,type:r.datatypes[c],aggregate:V?j:void 0,title:P||c},{field:d,type:r.datatypes[d],title:_||d,format:n?"%Y-%m-%d %H:%M:%S":void 0,bin:z?{step:z}:void 0},...u?[{field:u,type:r.datatypes[u]}]:[]]},strokeDash:{},mark:{clip:!0,type:W==="hover"?"point":r.mark},name:W})),params:[...r.mark==="line"?[{name:"hoverPlot",select:{clear:"mouseout",fields:u?[u]:[],nearest:!0,on:"mouseover",type:"point"},views:["hover"]},{name:"hover",select:{clear:"mouseout",nearest:!0,on:"mouseover",type:"point"},views:["hover"]}]:[],...U?[{name:"brush",select:{encodings:["x"],mark:{fill:"gray",fillOpacity:.3,stroke:"none"},type:"interval"},views:["plot"]}]:[]],width:g.offsetWidth,title:s||void 0}}let{label:re="Textbox"}=e,{elem_id:se=""}=e,{elem_classes:fe=[]}=e,{visible:ce=!0}=e,{show_label:ue}=e,{scale:_e=null}=e,{min_width:me=void 0}=e,{loading_status:$=void 0}=e,{height:de=void 0}=e;const Ve=()=>L.dispatch("clear_status",$);function Te(l){Be[l?"unshift":"push"](()=>{g=l,t(12,g)})}return o.$$set=l=>{"value"in l&&t(0,r=l.value),"x"in l&&t(14,d=l.x),"y"in l&&t(15,c=l.y),"color"in l&&t(16,u=l.color),"title"in l&&t(17,s=l.title),"x_title"in l&&t(18,_=l.x_title),"y_title"in l&&t(19,P=l.y_title),"color_title"in l&&t(20,O=l.color_title),"x_bin"in l&&t(21,w=l.x_bin),"y_aggregate"in l&&t(22,T=l.y_aggregate),"color_map"in l&&t(23,q=l.color_map),"x_lim"in l&&t(24,A=l.x_lim),"y_lim"in l&&t(25,M=l.y_lim),"x_label_angle"in l&&t(26,R=l.x_label_angle),"y_label_angle"in l&&t(27,H=l.y_label_angle),"caption"in l&&t(1,ne=l.caption),"sort"in l&&t(28,K=l.sort),"_selectable"in l&&t(29,U=l._selectable),"gradio"in l&&t(2,L=l.gradio),"label"in l&&t(3,re=l.label),"elem_id"in l&&t(4,se=l.elem_id),"elem_classes"in l&&t(5,fe=l.elem_classes),"visible"in l&&t(6,ce=l.visible),"show_label"in l&&t(7,ue=l.show_label),"scale"in l&&t(8,_e=l.scale),"min_width"in l&&t(9,me=l.min_width),"loading_status"in l&&t(10,$=l.loading_status),"height"in l&&t(11,de=l.height)},o.$$.update=()=>{o.$$.dirty[0]&1&&t(30,J=r?We(r):[]),o.$$.dirty[0]&1073807361&&(i=u&&r&&r.datatypes[u]==="nominal"?Array.from(new Set(J.map(l=>l[u]))):[]),o.$$.dirty[0]&268435456&&(a=Ce(K)),o.$$.dirty[0]&16385&&t(35,n=r&&r.datatypes[d]==="temporal"),o.$$.dirty[0]&16777216|o.$$.dirty[1]&16&&(f=A&&n?[A[0]*1e3,A[1]*1e3]:A),o.$$.dirty[0]&2097152&&t(31,z=w?typeof w=="string"?1e3*parseInt(w.substring(0,w.length-1))*Oe[w[w.length-1]]:w:void 0),o.$$.dirty[0]&4210689|o.$$.dirty[1]&5&&r&&(r.mark==="point"?(t(33,V=z!==void 0),t(32,j=T||V?"sum":void 0)):(t(33,V=z!==void 0||r.datatypes[d]==="nominal"),t(32,j=T||"sum"))),o.$$.dirty[0]&4096&&t(36,m=g?window.getComputedStyle(g):null),o.$$.dirty[0]&331337731|o.$$.dirty[1]&42&&m&&requestAnimationFrame(oe)},[r,ne,L,re,se,fe,ce,ue,_e,me,$,de,g,Ae,d,c,u,s,_,P,O,w,T,q,A,M,R,H,K,U,J,z,j,V,Z,n,m,Ve,Te]}class ft extends Me{constructor(e){super(),Re(this,e,lt,tt,Ie,{value:0,x:14,y:15,color:16,title:17,x_title:18,y_title:19,color_title:20,x_bin:21,y_aggregate:22,color_map:23,x_lim:24,y_lim:25,x_label_angle:26,y_label_angle:27,caption:1,sort:28,_selectable:29,gradio:2,label:3,elem_id:4,elem_classes:5,visible:6,show_label:7,scale:8,min_width:9,loading_status:10,height:11},null,[-1,-1])}}export{ft as default};
