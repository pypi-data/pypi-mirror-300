import{s as T,e as H,a as J,c as K,g as L,p as r,i as P,F as G,f as S,R as p,y as $,l as ee,u as ie,m as le,o as te,r as ne,P as M,W as ae,t as fe,d as se,j as ue}from"./scheduler.xQsDa6L3.js";import{S as O,i as Q,c as V,a as X,m as Y,t as D,b as E,d as Z}from"./index.lnKugwF0.js";import{a as _e,p as ce}from"./2.DdwTC9iJ.js";function R(t){let e,l,i;return{c(){e=H("img"),this.h()},l(n){e=K(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){r(e,"class","button-icon svelte-1rvxzzt"),M(e.src,l=t[7].url)||r(e,"src",l),r(e,"alt",i=`${t[0]} icon`)},m(n,a){P(n,e,a)},p(n,a){a&128&&!M(e.src,l=n[7].url)&&r(e,"src",l),a&1&&i!==(i=`${n[0]} icon`)&&r(e,"alt",i)},d(n){n&&S(e)}}}function me(t){let e,l,i=t[7]&&R(t);const n=t[20].default,a=ee(n,t,t[22],null);return{c(){i&&i.c(),e=J(),a&&a.c()},l(_){i&&i.l(_),e=L(_),a&&a.l(_)},m(_,m){i&&i.m(_,m),P(_,e,m),a&&a.m(_,m),l=!0},p(_,m){_[7]?i?i.p(_,m):(i=R(_),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),a&&a.p&&(!l||m&4194304)&&ie(a,n,_,_[22],l?te(n,_[22],m,null):le(_[22]),null)},i(_){l||(D(a,_),l=!0)},o(_){E(a,_),l=!1},d(_){_&&S(e),i&&i.d(_),a&&a.d(_)}}}function oe(t){let e,l,i,n,a,_,m,o,b,h;return m=new _e({props:{size:t[6],variant:t[10],elem_id:t[1],elem_classes:t[2],visible:t[3],scale:t[8],min_width:t[9],disabled:t[11],$$slots:{default:[me]},$$scope:{ctx:t}}}),m.$on("click",t[14]),{c(){e=H("input"),_=J(),V(m.$$.fragment),this.h()},l(u){e=K(u,"INPUT",{class:!0,accept:!0,type:!0,webkitdirectory:!0,mozdirectory:!0,"data-testid":!0}),_=L(u),X(m.$$.fragment,u),this.h()},h(){r(e,"class","hide svelte-1rvxzzt"),r(e,"accept",t[13]),r(e,"type","file"),e.multiple=l=t[5]==="multiple"||void 0,r(e,"webkitdirectory",i=t[5]==="directory"||void 0),r(e,"mozdirectory",n=t[5]==="directory"||void 0),r(e,"data-testid",a=t[4]+"-upload-button")},m(u,c){P(u,e,c),t[21](e),P(u,_,c),Y(m,u,c),o=!0,b||(h=[G(e,"change",t[15]),G(e,"click",de)],b=!0)},p(u,[c]){(!o||c&8192)&&r(e,"accept",u[13]),(!o||c&32&&l!==(l=u[5]==="multiple"||void 0))&&(e.multiple=l),(!o||c&32&&i!==(i=u[5]==="directory"||void 0))&&r(e,"webkitdirectory",i),(!o||c&32&&n!==(n=u[5]==="directory"||void 0))&&r(e,"mozdirectory",n),(!o||c&16&&a!==(a=u[4]+"-upload-button"))&&r(e,"data-testid",a);const d={};c&64&&(d.size=u[6]),c&1024&&(d.variant=u[10]),c&2&&(d.elem_id=u[1]),c&4&&(d.elem_classes=u[2]),c&8&&(d.visible=u[3]),c&256&&(d.scale=u[8]),c&512&&(d.min_width=u[9]),c&2048&&(d.disabled=u[11]),c&4194433&&(d.$$scope={dirty:c,ctx:u}),m.$set(d)},i(u){o||(D(m.$$.fragment,u),o=!0)},o(u){E(m.$$.fragment,u),o=!1},d(u){u&&(S(e),S(_)),t[21](null),Z(m,u),b=!1,p(h)}}}function de(t){const e=t.target;e.value&&(e.value="")}function re(t,e,l){let{$$slots:i={},$$scope:n}=e,{elem_id:a=""}=e,{elem_classes:_=[]}=e,{visible:m=!0}=e,{label:o}=e,{value:b}=e,{file_count:h}=e,{file_types:u=[]}=e,{root:c}=e,{size:d="lg"}=e,{icon:y=null}=e,{scale:I=null}=e,{min_width:U=void 0}=e,{variant:g="secondary"}=e,{disabled:v=!1}=e,{max_file_size:z=null}=e,{upload:j}=e;const w=$();let k,q;u==null?q=null:(u=u.map(f=>f.startsWith(".")?f:f+"/*"),q=u.join(", "));function W(){w("click"),k.click()}async function s(f){var F;let N=Array.from(f);if(!f.length)return;h==="single"&&(N=[f[0]]);let B=await ce(N);await ae();try{B=(F=await j(B,c,void 0,z??1/0))==null?void 0:F.filter(C=>C!==null)}catch(C){w("error",C.message);return}l(0,b=h==="single"?B==null?void 0:B[0]:B),w("change",b),w("upload",b)}async function A(f){const N=f.target;N.files&&await s(N.files)}function x(f){ne[f?"unshift":"push"](()=>{k=f,l(12,k)})}return t.$$set=f=>{"elem_id"in f&&l(1,a=f.elem_id),"elem_classes"in f&&l(2,_=f.elem_classes),"visible"in f&&l(3,m=f.visible),"label"in f&&l(4,o=f.label),"value"in f&&l(0,b=f.value),"file_count"in f&&l(5,h=f.file_count),"file_types"in f&&l(16,u=f.file_types),"root"in f&&l(17,c=f.root),"size"in f&&l(6,d=f.size),"icon"in f&&l(7,y=f.icon),"scale"in f&&l(8,I=f.scale),"min_width"in f&&l(9,U=f.min_width),"variant"in f&&l(10,g=f.variant),"disabled"in f&&l(11,v=f.disabled),"max_file_size"in f&&l(18,z=f.max_file_size),"upload"in f&&l(19,j=f.upload),"$$scope"in f&&l(22,n=f.$$scope)},[b,a,_,m,o,h,d,y,I,U,g,v,k,q,W,A,u,c,z,j,i,x,n]}class be extends O{constructor(e){super(),Q(this,e,re,oe,T,{elem_id:1,elem_classes:2,visible:3,label:4,value:0,file_count:5,file_types:16,root:17,size:6,icon:7,scale:8,min_width:9,variant:10,disabled:11,max_file_size:18,upload:19})}}const he=be;function ge(t){let e=(t[4]?t[13].i18n(t[4]):"")+"",l;return{c(){l=fe(e)},l(i){l=se(i,e)},m(i,n){P(i,l,n)},p(i,n){n&8208&&e!==(e=(i[4]?i[13].i18n(i[4]):"")+"")&&ue(l,e)},d(i){i&&S(l)}}}function ze(t){let e,l;return e=new he({props:{elem_id:t[1],elem_classes:t[2],visible:t[3],file_count:t[5],file_types:t[6],size:t[8],scale:t[9],icon:t[10],min_width:t[11],root:t[7],value:t[0],disabled:t[14],variant:t[12],label:t[4],max_file_size:t[13].max_file_size,upload:t[17],$$slots:{default:[ge]},$$scope:{ctx:t}}}),e.$on("click",t[18]),e.$on("change",t[19]),e.$on("upload",t[20]),e.$on("error",t[21]),{c(){V(e.$$.fragment)},l(i){X(e.$$.fragment,i)},m(i,n){Y(e,i,n),l=!0},p(i,[n]){const a={};n&2&&(a.elem_id=i[1]),n&4&&(a.elem_classes=i[2]),n&8&&(a.visible=i[3]),n&32&&(a.file_count=i[5]),n&64&&(a.file_types=i[6]),n&256&&(a.size=i[8]),n&512&&(a.scale=i[9]),n&1024&&(a.icon=i[10]),n&2048&&(a.min_width=i[11]),n&128&&(a.root=i[7]),n&1&&(a.value=i[0]),n&16384&&(a.disabled=i[14]),n&4096&&(a.variant=i[12]),n&16&&(a.label=i[4]),n&8192&&(a.max_file_size=i[13].max_file_size),n&8192&&(a.upload=i[17]),n&4202512&&(a.$$scope={dirty:n,ctx:i}),e.$set(a)},i(i){l||(D(e.$$.fragment,i),l=!0)},o(i){E(e.$$.fragment,i),l=!1},d(i){Z(e,i)}}}function ve(t,e,l){let i,{elem_id:n=""}=e,{elem_classes:a=[]}=e,{visible:_=!0}=e,{label:m}=e,{value:o}=e,{file_count:b}=e,{file_types:h=[]}=e,{root:u}=e,{size:c="lg"}=e,{scale:d=null}=e,{icon:y=null}=e,{min_width:I=void 0}=e,{variant:U="secondary"}=e,{gradio:g}=e,{interactive:v}=e;async function z(s,A){l(0,o=s),g.dispatch(A)}const j=(...s)=>g.client.upload(...s),w=()=>g.dispatch("click"),k=({detail:s})=>z(s,"change"),q=({detail:s})=>z(s,"upload"),W=({detail:s})=>{g.dispatch("error",s)};return t.$$set=s=>{"elem_id"in s&&l(1,n=s.elem_id),"elem_classes"in s&&l(2,a=s.elem_classes),"visible"in s&&l(3,_=s.visible),"label"in s&&l(4,m=s.label),"value"in s&&l(0,o=s.value),"file_count"in s&&l(5,b=s.file_count),"file_types"in s&&l(6,h=s.file_types),"root"in s&&l(7,u=s.root),"size"in s&&l(8,c=s.size),"scale"in s&&l(9,d=s.scale),"icon"in s&&l(10,y=s.icon),"min_width"in s&&l(11,I=s.min_width),"variant"in s&&l(12,U=s.variant),"gradio"in s&&l(13,g=s.gradio),"interactive"in s&&l(16,v=s.interactive)},t.$$.update=()=>{t.$$.dirty&65536&&l(14,i=!v)},[o,n,a,_,m,b,h,u,c,d,y,I,U,g,i,z,v,j,w,k,q,W]}class ye extends O{constructor(e){super(),Q(this,e,ve,ze,T,{elem_id:1,elem_classes:2,visible:3,label:4,value:0,file_count:5,file_types:6,root:7,size:8,scale:9,icon:10,min_width:11,variant:12,gradio:13,interactive:16})}}export{he as BaseUploadButton,ye as default};
