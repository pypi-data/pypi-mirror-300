import{s as $,e as A,c as D,b as P,f as w,r as B,E as ie,i as C,h as F,y as ge,t as G,a as O,d as K,g as R,v as se,F as Q,j as Z,T as ke,R as ve,n as fe,X as pe,Y as Ee,z as V,M as Y,W as ye,w as oe,L as re,l as ze,u as Fe,m as Be,o as qe}from"./scheduler.C_sdfy-5.js";import{S as x,i as ee,g as W,e as X,t as p,b as E,c as U,a as M,m as N,d as I,f as ue}from"./index.D_Dnc2IG.js";import{e as _e,n as Te,s as Ae}from"./2.CFhpxp2a.js";import{F as le}from"./File.DxiDeGWL.js";import{B as be}from"./BlockLabel.RrZy2lJ2.js";import{E as De}from"./Empty.DFzkRrVJ.js";import{U as Ce}from"./Upload.BdGT9g1b.js";import{M as Pe}from"./ModifyUpload.FOOCl2js.js";import{D as Ue}from"./DownloadLink.D7iokOPQ.js";const ce=i=>{let e=["B","KB","MB","GB","PB"],t=0;for(;i>1024;)i/=1024,t++;let l=e[t];return i.toFixed(1)+"&nbsp;"+l};function he(i,e,t){const l=i.slice();return l[12]=e[t],l[14]=t,l}function Me(i){let e=i[2]("file.uploading")+"",t;return{c(){t=G(e)},l(l){t=K(l,e)},m(l,n){C(l,t,n)},p(l,n){n&4&&e!==(e=l[2]("file.uploading")+"")&&Z(t,e)},i:fe,o:fe,d(l){l&&w(t)}}}function Ne(i){let e,t;return e=new Ue({props:{href:i[12].url,download:i[6]&&window.__is_colab__?null:i[12].orig_name,$$slots:{default:[Ie]},$$scope:{ctx:i}}}),{c(){U(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,n){N(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.href=l[12].url),n&8&&(a.download=l[6]&&window.__is_colab__?null:l[12].orig_name),n&32776&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function Ie(i){let e,t=(i[12].size!=null?ce(i[12].size):"(size unknown)")+"",l;return{c(){e=new pe(!1),l=G(" ⇣"),this.h()},l(n){e=Ee(n,!1),l=K(n," ⇣"),this.h()},h(){e.a=l},m(n,a){e.m(t,n,a),C(n,l,a)},p(n,a){a&8&&t!==(t=(n[12].size!=null?ce(n[12].size):"(size unknown)")+"")&&e.p(t)},d(n){n&&(e.d(),w(l))}}}function me(i){let e,t,l="×",n,a;function _(){return i[8](i[14])}function m(...r){return i[9](i[14],...r)}return{c(){e=A("td"),t=A("button"),t.textContent=l,this.h()},l(r){e=D(r,"TD",{class:!0});var f=P(e);t=D(f,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),ke(t)!=="svelte-nhtord"&&(t.textContent=l),f.forEach(w),this.h()},h(){B(t,"class","label-clear-button svelte-18wv37q"),B(t,"aria-label","Remove this file"),B(e,"class","svelte-18wv37q")},m(r,f){C(r,e,f),F(e,t),n||(a=[Q(t,"click",_),Q(t,"keydown",m)],n=!0)},p(r,f){i=r},d(r){r&&w(e),n=!1,ve(a)}}}function de(i,e){let t,l,n,a=e[12].filename_stem+"",_,m,r,f=e[12].filename_ext+"",o,s,c,d,g,h,v,y,q,H,L;const S=[Ne,Me],T=[];function j(z,b){return z[12].url?0:1}g=j(e),h=T[g]=S[g](e);let k=e[3].length>1&&me(e);function J(...z){return e[10](e[14],...z)}return{key:i,first:null,c(){t=A("tr"),l=A("td"),n=A("span"),_=G(a),m=O(),r=A("span"),o=G(f),c=O(),d=A("td"),h.c(),v=O(),k&&k.c(),y=O(),this.h()},l(z){t=D(z,"TR",{class:!0});var b=P(t);l=D(b,"TD",{class:!0,"aria-label":!0});var u=P(l);n=D(u,"SPAN",{class:!0});var te=P(n);_=K(te,a),te.forEach(w),m=R(u),r=D(u,"SPAN",{class:!0});var ne=P(r);o=K(ne,f),ne.forEach(w),u.forEach(w),c=R(b),d=D(b,"TD",{class:!0});var ae=P(d);h.l(ae),ae.forEach(w),v=R(b),k&&k.l(b),y=R(b),b.forEach(w),this.h()},h(){B(n,"class","stem svelte-18wv37q"),B(r,"class","ext svelte-18wv37q"),B(l,"class","filename svelte-18wv37q"),B(l,"aria-label",s=e[12].orig_name),B(d,"class","download svelte-18wv37q"),B(t,"class","file svelte-18wv37q"),se(t,"selectable",e[0]),this.first=t},m(z,b){C(z,t,b),F(t,l),F(l,n),F(n,_),F(l,m),F(l,r),F(r,o),F(t,c),F(t,d),T[g].m(d,null),F(t,v),k&&k.m(t,null),F(t,y),q=!0,H||(L=Q(t,"click",J),H=!0)},p(z,b){e=z,(!q||b&8)&&a!==(a=e[12].filename_stem+"")&&Z(_,a),(!q||b&8)&&f!==(f=e[12].filename_ext+"")&&Z(o,f),(!q||b&8&&s!==(s=e[12].orig_name))&&B(l,"aria-label",s);let u=g;g=j(e),g===u?T[g].p(e,b):(W(),E(T[u],1,1,()=>{T[u]=null}),X(),h=T[g],h?h.p(e,b):(h=T[g]=S[g](e),h.c()),p(h,1),h.m(d,null)),e[3].length>1?k?k.p(e,b):(k=me(e),k.c(),k.m(t,y)):k&&(k.d(1),k=null),(!q||b&1)&&se(t,"selectable",e[0])},i(z){q||(p(h),q=!0)},o(z){E(h),q=!1},d(z){z&&w(t),T[g].d(),k&&k.d(),H=!1,L()}}}function Le(i){let e,t,l,n=[],a=new Map,_,m=_e(i[3]);const r=f=>f[12];for(let f=0;f<m.length;f+=1){let o=he(i,m,f),s=r(o);a.set(s,n[f]=de(s,o))}return{c(){e=A("div"),t=A("table"),l=A("tbody");for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){e=D(f,"DIV",{class:!0,style:!0});var o=P(e);t=D(o,"TABLE",{class:!0});var s=P(t);l=D(s,"TBODY",{class:!0});var c=P(l);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(w),s.forEach(w),o.forEach(w),this.h()},h(){B(l,"class","svelte-18wv37q"),B(t,"class","file-preview svelte-18wv37q"),B(e,"class","file-preview-holder svelte-18wv37q"),ie(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(f,o){C(f,e,o),F(e,t),F(t,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(l,null);_=!0},p(f,[o]){o&125&&(m=_e(f[3]),W(),n=Te(n,o,r,1,f,m,a,l,Ae,de,null,he),X()),(!_||o&2)&&ie(e,"max-height",typeof f[1]===void 0?"auto":f[1]+"px")},i(f){if(!_){for(let o=0;o<m.length;o+=1)p(n[o]);_=!0}},o(f){for(let o=0;o<n.length;o+=1)E(n[o]);_=!1},d(f){f&&w(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Se(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function Oe(i,e,t){let l;const n=ge();let{value:a}=e,{selectable:_=!1}=e,{height:m=void 0}=e,{i18n:r}=e;function f(h,v){const y=h.currentTarget;(h.target===y||y&&y.firstElementChild&&h.composedPath().includes(y.firstElementChild))&&n("select",{value:l[v].orig_name,index:v})}function o(h){const v=l.splice(h,1);t(3,l=[...l]),t(7,a=l),n("delete",v[0]),n("change",l)}const s=typeof window<"u",c=h=>{o(h)},d=(h,v)=>{v.key==="Enter"&&o(h)},g=(h,v)=>{f(v,h)};return i.$$set=h=>{"value"in h&&t(7,a=h.value),"selectable"in h&&t(0,_=h.selectable),"height"in h&&t(1,m=h.height),"i18n"in h&&t(2,r=h.i18n)},i.$$.update=()=>{i.$$.dirty&128&&t(3,l=(Array.isArray(a)?a:[a]).map(h=>{const[v,y]=Se(h.orig_name??"");return{...h,filename_stem:v,filename_ext:y}}))},[_,m,r,l,f,o,s,a,c,d,g]}class Re extends x{constructor(e){super(),ee(this,e,Oe,Le,$,{value:7,selectable:0,height:1,i18n:2})}}const we=Re;function He(i){let e,t;return e=new De({props:{unpadded_box:!0,size:"large",$$slots:{default:[je]},$$scope:{ctx:i}}}),{c(){U(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,n){N(e,l,n),t=!0},p(l,n){const a={};n&128&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function Ye(i){let e,t;return e=new we({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){U(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,n){N(e,l,n),t=!0},p(l,n){const a={};n&32&&(a.i18n=l[5]),n&8&&(a.selectable=l[3]),n&1&&(a.value=l[0]),n&16&&(a.height=l[4]),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function je(i){let e,t;return e=new le({}),{c(){U(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,n){N(e,l,n),t=!0},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function Ge(i){let e,t,l,n,a,_,m;e=new be({props:{show_label:i[2],float:i[0]===null,Icon:le,label:i[1]||"File"}});const r=[Ye,He],f=[];function o(s,c){return c&1&&(l=null),l==null&&(l=!!(s[0]&&(!Array.isArray(s[0])||s[0].length>0))),l?0:1}return n=o(i,-1),a=f[n]=r[n](i),{c(){U(e.$$.fragment),t=O(),a.c(),_=V()},l(s){M(e.$$.fragment,s),t=R(s),a.l(s),_=V()},m(s,c){N(e,s,c),C(s,t,c),f[n].m(s,c),C(s,_,c),m=!0},p(s,[c]){const d={};c&4&&(d.show_label=s[2]),c&1&&(d.float=s[0]===null),c&2&&(d.label=s[1]||"File"),e.$set(d);let g=n;n=o(s,c),n===g?f[n].p(s,c):(W(),E(f[g],1,1,()=>{f[g]=null}),X(),a=f[n],a?a.p(s,c):(a=f[n]=r[n](s),a.c()),p(a,1),a.m(_.parentNode,_))},i(s){m||(p(e.$$.fragment,s),p(a),m=!0)},o(s){E(e.$$.fragment,s),E(a),m=!1},d(s){s&&(w(t),w(_)),I(e,s),f[n].d(s)}}}function Ke(i,e,t){let{value:l=null}=e,{label:n}=e,{show_label:a=!0}=e,{selectable:_=!1}=e,{height:m=void 0}=e,{i18n:r}=e;function f(o){Y.call(this,i,o)}return i.$$set=o=>{"value"in o&&t(0,l=o.value),"label"in o&&t(1,n=o.label),"show_label"in o&&t(2,a=o.show_label),"selectable"in o&&t(3,_=o.selectable),"height"in o&&t(4,m=o.height),"i18n"in o&&t(5,r=o.i18n)},[l,n,a,_,m,r,f]}class Ve extends x{constructor(e){super(),ee(this,e,Ke,Ge,$,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}}const ol=Ve;function We(i){let e,t,l,n;function a(r){i[20](r)}function _(r){i[21](r)}let m={filetype:i[5],file_count:i[4],max_file_size:i[10],root:i[7],stream_handler:i[12],upload:i[11],$$slots:{default:[Je]},$$scope:{ctx:i}};return i[13]!==void 0&&(m.dragging=i[13]),i[1]!==void 0&&(m.uploading=i[1]),e=new Ce({props:m}),oe.push(()=>ue(e,"dragging",a)),oe.push(()=>ue(e,"uploading",_)),e.$on("load",i[14]),e.$on("error",i[22]),{c(){U(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,f){N(e,r,f),n=!0},p(r,f){const o={};f&32&&(o.filetype=r[5]),f&16&&(o.file_count=r[4]),f&1024&&(o.max_file_size=r[10]),f&128&&(o.root=r[7]),f&4096&&(o.stream_handler=r[12]),f&2048&&(o.upload=r[11]),f&8388608&&(o.$$scope={dirty:f,ctx:r}),!t&&f&8192&&(t=!0,o.dragging=r[13],re(()=>t=!1)),!l&&f&2&&(l=!0,o.uploading=r[1],re(()=>l=!1)),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Xe(i){let e,t,l,n;return e=new Pe({props:{i18n:i[9]}}),e.$on("clear",i[15]),l=new we({props:{i18n:i[9],selectable:i[6],value:i[0],height:i[8]}}),l.$on("select",i[17]),l.$on("change",i[18]),l.$on("delete",i[19]),{c(){U(e.$$.fragment),t=O(),U(l.$$.fragment)},l(a){M(e.$$.fragment,a),t=R(a),M(l.$$.fragment,a)},m(a,_){N(e,a,_),C(a,t,_),N(l,a,_),n=!0},p(a,_){const m={};_&512&&(m.i18n=a[9]),e.$set(m);const r={};_&512&&(r.i18n=a[9]),_&64&&(r.selectable=a[6]),_&1&&(r.value=a[0]),_&256&&(r.height=a[8]),l.$set(r)},i(a){n||(p(e.$$.fragment,a),p(l.$$.fragment,a),n=!0)},o(a){E(e.$$.fragment,a),E(l.$$.fragment,a),n=!1},d(a){a&&w(t),I(e,a),I(l,a)}}}function Je(i){let e;const t=i[16].default,l=ze(t,i,i[23],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,a){l&&l.m(n,a),e=!0},p(n,a){l&&l.p&&(!e||a&8388608)&&Fe(l,t,n,n[23],e?qe(t,n[23],a,null):Be(n[23]),null)},i(n){e||(p(l,n),e=!0)},o(n){E(l,n),e=!1},d(n){l&&l.d(n)}}}function Qe(i){let e,t,l,n,a,_,m;e=new be({props:{show_label:i[3],Icon:le,float:!i[0],label:i[2]||"File"}});const r=[Xe,We],f=[];function o(s,c){return c&1&&(l=null),l==null&&(l=!!(s[0]&&(!Array.isArray(s[0])||s[0].length>0))),l?0:1}return n=o(i,-1),a=f[n]=r[n](i),{c(){U(e.$$.fragment),t=O(),a.c(),_=V()},l(s){M(e.$$.fragment,s),t=R(s),a.l(s),_=V()},m(s,c){N(e,s,c),C(s,t,c),f[n].m(s,c),C(s,_,c),m=!0},p(s,[c]){const d={};c&8&&(d.show_label=s[3]),c&1&&(d.float=!s[0]),c&4&&(d.label=s[2]||"File"),e.$set(d);let g=n;n=o(s,c),n===g?f[n].p(s,c):(W(),E(f[g],1,1,()=>{f[g]=null}),X(),a=f[n],a?a.p(s,c):(a=f[n]=r[n](s),a.c()),p(a,1),a.m(_.parentNode,_))},i(s){m||(p(e.$$.fragment,s),p(a),m=!0)},o(s){E(e.$$.fragment,s),E(a),m=!1},d(s){s&&(w(t),w(_)),I(e,s),f[n].d(s)}}}function Ze(i,e,t){let{$$slots:l={},$$scope:n}=e,{value:a}=e,{label:_}=e,{show_label:m=!0}=e,{file_count:r="single"}=e,{file_types:f=null}=e,{selectable:o=!1}=e,{root:s}=e,{height:c=void 0}=e,{i18n:d}=e,{max_file_size:g=null}=e,{upload:h}=e,{stream_handler:v}=e,{uploading:y=!1}=e;async function q({detail:u}){t(0,a=u),await ye(),L("change",a),L("upload",u)}function H(){t(0,a=null),L("change",null),L("clear")}const L=ge();let S=!1;function T(u){Y.call(this,i,u)}function j(u){Y.call(this,i,u)}function k(u){Y.call(this,i,u)}function J(u){S=u,t(13,S)}function z(u){y=u,t(1,y)}function b(u){Y.call(this,i,u)}return i.$$set=u=>{"value"in u&&t(0,a=u.value),"label"in u&&t(2,_=u.label),"show_label"in u&&t(3,m=u.show_label),"file_count"in u&&t(4,r=u.file_count),"file_types"in u&&t(5,f=u.file_types),"selectable"in u&&t(6,o=u.selectable),"root"in u&&t(7,s=u.root),"height"in u&&t(8,c=u.height),"i18n"in u&&t(9,d=u.i18n),"max_file_size"in u&&t(10,g=u.max_file_size),"upload"in u&&t(11,h=u.upload),"stream_handler"in u&&t(12,v=u.stream_handler),"uploading"in u&&t(1,y=u.uploading),"$$scope"in u&&t(23,n=u.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&L("drag",S)},[a,y,_,m,r,f,o,s,c,d,g,h,v,S,q,H,l,T,j,k,J,z,b,n]}class $e extends x{constructor(e){super(),ee(this,e,Ze,Qe,$,{value:0,label:2,show_label:3,file_count:4,file_types:5,selectable:6,root:7,height:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,uploading:1})}}const rl=$e;export{rl as B,ol as F,we as a};
