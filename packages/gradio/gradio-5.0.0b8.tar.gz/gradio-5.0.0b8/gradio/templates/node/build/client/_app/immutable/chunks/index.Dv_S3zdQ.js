const __vite__fileDeps=["./module.D9FAvowU.js","./module.C-VadMaF.js","./2.CFhpxp2a.js","./preload-helper.D6kgxu3v.js","./scheduler.C_sdfy-5.js","./index.D_Dnc2IG.js","./entry.C_fLXhM2.js","./stores.DucsTKqw.js","../assets/2.BXpqfeer.css","./module.niXGEr8P.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as Re,e as L,c as C,b as V,f as E,r as B,i as H,n as ke,y as $e,z as be,Q as Mt,t as fe,d as _e,_ as Ze,h as R,j as ce,w as j,a as F,g as J,F as ge,L as ee,R as St,J as et,T as Pe,E as tt,x as it,O as At,M as pe,l as Bt,u as Pt,m as Lt,o as Ct,K as O,N as Ut,B as gt}from"./scheduler.C_sdfy-5.js";import{S as Te,i as Ie,f as te,c as K,a as Q,m as Y,t as I,b as M,d as W,g as ye,e as Ee}from"./index.D_Dnc2IG.js";import{e as nt,x as we,p as zt,B as bt,c as wt,b as vt,d as pt}from"./2.CFhpxp2a.js";import{s as ot,W as Ot,p as st,a as xe,A as Nt,S as Vt}from"./StaticAudio.BpE_afYV.js";import{_ as rt}from"./preload-helper.D6kgxu3v.js";import{U as jt}from"./Upload.BdGT9g1b.js";import{M as kt}from"./ModifyUpload.FOOCl2js.js";import{M as Ht}from"./Music.Dh1RIrwb.js";import{StreamingBar as qt}from"./index.BiwXGmxB.js";import{B as Ft}from"./BlockLabel.RrZy2lJ2.js";import{a as Jt,S as Gt}from"./SelectSource.BoVzzOwP.js";import{P as Kt}from"./Trim.BWHYy-T0.js";import{U as Qt}from"./UploadText.1zctXInI.js";import{default as Xi}from"./Example.BwMPaO7D.js";function Xe(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(f){try{r(i.next(f))}catch(l){s(l)}}function u(f){try{r(i.throw(f))}catch(l){s(l)}}function r(f){var l;f.done?o(f.value):(l=f.value,l instanceof t?l:new t(function(_){_(l)})).then(a,u)}r((i=i.apply(n,[])).next())})}class Yt{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i==null?void 0:i.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class Wt extends Yt{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const Xt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Me extends Wt{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new Me(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const s=o.frequencyBinCount,a=new Float32Array(s),u=s/t.sampleRate;let r;const f=()=>{o.getFloatTimeDomainData(a),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[a],u)),r=requestAnimationFrame(f)};return f(),()=>{cancelAnimationFrame(r),i==null||i.disconnect(),t==null||t.close()}}startMic(e){return Xe(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!(e!=null&&e.deviceId)||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return Xe(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||Xt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=s=>{s.data.size>0&&o.push(s.data)},i.onstop=()=>{var s;const a=new Blob(o,{type:i.mimeType});this.emit("record-end",a),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(a)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Xe(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}function lt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Zt(n){let e,t=nt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=at(lt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=be()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=be()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);H(o,e,s)},p(o,s){if(s&1){t=nt(o[0]);let a;for(a=0;a<t.length;a+=1){const u=lt(o,t,a);i[a]?i[a].p(u,s):(i[a]=at(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(o){o&&E(e),Mt(i,o)}}}function xt(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=L("option"),i=fe(t),this.h()},l(o){e=C(o,"OPTION",{});var s=V(e);i=_e(s,t),s.forEach(E),this.h()},h(){e.__value="",Ze(e,e.__value)},m(o,s){H(o,e,s),R(e,i)},p(o,s){s&2&&t!==(t=o[1]("audio.no_microphone")+"")&&ce(i,t)},d(o){o&&E(e)}}}function at(n){let e,t=n[3].label+"",i,o;return{c(){e=L("option"),i=fe(t),this.h()},l(s){e=C(s,"OPTION",{});var a=V(e);i=_e(a,t),a.forEach(E),this.h()},h(){e.__value=o=n[3].deviceId,Ze(e,e.__value)},m(s,a){H(s,e,a),R(e,i)},p(s,a){a&1&&t!==(t=s[3].label+"")&&ce(i,t),a&1&&o!==(o=s[3].deviceId)&&(e.__value=o,Ze(e,e.__value))},d(s){s&&E(e)}}}function $t(n){let e,t;function i(a,u){return a[0].length===0?xt:Zt}let o=i(n),s=o(n);return{c(){e=L("select"),s.c(),this.h()},l(a){e=C(a,"SELECT",{class:!0,"aria-label":!0});var u=V(e);s.l(u),u.forEach(E),this.h()},h(){B(e,"class","mic-select svelte-1ya9x7a"),B(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(a,u){H(a,e,u),s.m(e,null)},p(a,[u]){o===(o=i(a))&&s?s.p(a,u):(s.d(1),s=o(a),s&&(s.c(),s.m(e,null))),u&1&&t!==(t=a[0].length===0)&&(e.disabled=t)},i:ke,o:ke,d(a){a&&E(e),s.d()}}}function ei(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const s=$e();return n.$$set=a=>{"i18n"in a&&t(1,i=a.i18n),"micDevices"in a&&t(0,o=a.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2&&typeof window<"u")try{let a=[];Me.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(r=>{r.deviceId&&a.push(r)}),t(0,o=a)})}catch(a){throw a instanceof DOMException&&a.name=="NotAllowedError"&&s("error",i("audio.allow_recording_access")),a}},[o,i]}class yt extends Te{constructor(e){super(),Ie(this,e,ei,$t,Re,{i18n:1,micDevices:0})}}function ut(n){let e,t;return{c(){e=L("time"),t=fe(n[2]),this.h()},l(i){e=C(i,"TIME",{class:!0});var o=V(e);t=_e(o,n[2]),o.forEach(E),this.h()},h(){B(e,"class","duration-button duration svelte-11fum4b")},m(i,o){H(i,e,o),R(e,t)},p(i,o){o&4&&ce(t,i[2])},d(i){i&&E(e)}}}function ti(n){let e,t,i,o=n[1]("audio.record")+"",s,a,u,r=n[1]("audio.stop")+"",f,l,_,c,w=n[1]("audio.stop")+"",S,A,b,g,d,v,G=n[1]("audio.resume")+"",p,N,Z,X,ie,U,D,se;g=new Kt({});let z=n[4]&&!n[3]&&ut(n);function de(T){n[23](T)}let he={i18n:n[1]};return n[5]!==void 0&&(he.micDevices=n[5]),X=new yt({props:he}),j.push(()=>te(X,"micDevices",de)),{c(){e=L("div"),t=L("div"),i=L("button"),s=fe(o),a=F(),u=L("button"),f=fe(r),_=F(),c=L("button"),S=fe(w),A=F(),b=L("button"),K(g.$$.fragment),d=F(),v=L("button"),p=fe(G),N=F(),z&&z.c(),Z=F(),K(X.$$.fragment),this.h()},l(T){e=C(T,"DIV",{class:!0});var P=V(e);t=C(P,"DIV",{class:!0});var y=V(t);i=C(y,"BUTTON",{class:!0});var x=V(i);s=_e(x,o),x.forEach(E),a=J(y),u=C(y,"BUTTON",{class:!0});var re=V(u);f=_e(re,r),re.forEach(E),_=J(y),c=C(y,"BUTTON",{id:!0,class:!0});var ne=V(c);S=_e(ne,w),ne.forEach(E),A=J(y),b=C(y,"BUTTON",{"aria-label":!0,class:!0});var ae=V(b);Q(g.$$.fragment,ae),ae.forEach(E),d=J(y),v=C(y,"BUTTON",{class:!0});var ue=V(v);p=_e(ue,G),ue.forEach(E),N=J(y),z&&z.l(y),y.forEach(E),Z=J(P),Q(X.$$.fragment,P),P.forEach(E),this.h()},h(){B(i,"class","record record-button svelte-11fum4b"),B(u,"class",l="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"),B(c,"id","stop-paused"),B(c,"class","stop-button-paused svelte-11fum4b"),B(b,"aria-label","pause"),B(b,"class","pause-button svelte-11fum4b"),B(v,"class","resume-button svelte-11fum4b"),B(t,"class","wrapper svelte-11fum4b"),B(e,"class","controls svelte-11fum4b")},m(T,P){H(T,e,P),R(e,t),R(t,i),R(i,s),n[13](i),R(t,a),R(t,u),R(u,f),n[15](u),R(t,_),R(t,c),R(c,S),n[17](c),R(t,A),R(t,b),Y(g,b,null),n[19](b),R(t,d),R(t,v),R(v,p),n[21](v),R(t,N),z&&z.m(t,null),R(e,Z),Y(X,e,null),U=!0,D||(se=[ge(i,"click",n[14]),ge(u,"click",n[16]),ge(c,"click",n[18]),ge(b,"click",n[20]),ge(v,"click",n[22])],D=!0)},p(T,[P]){(!U||P&2)&&o!==(o=T[1]("audio.record")+"")&&ce(s,o),(!U||P&2)&&r!==(r=T[1]("audio.stop")+"")&&ce(f,r),(!U||P&1&&l!==(l="stop-button "+(T[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"))&&B(u,"class",l),(!U||P&2)&&w!==(w=T[1]("audio.stop")+"")&&ce(S,w),(!U||P&2)&&G!==(G=T[1]("audio.resume")+"")&&ce(p,G),T[4]&&!T[3]?z?z.p(T,P):(z=ut(T),z.c(),z.m(t,null)):z&&(z.d(1),z=null);const y={};P&2&&(y.i18n=T[1]),!ie&&P&32&&(ie=!0,y.micDevices=T[5],ee(()=>ie=!1)),X.$set(y)},i(T){U||(I(g.$$.fragment,T),I(X.$$.fragment,T),U=!0)},o(T){M(g.$$.fragment,T),M(X.$$.fragment,T),U=!1},d(T){T&&E(e),n[13](null),n[15](null),n[17](null),W(g),n[19](null),n[21](null),z&&z.d(),W(X),D=!1,St(se)}}}function ii(n,e,t){let{record:i}=e,{i18n:o}=e,{recording:s=!1}=e,a=[],u,r,f,l,_,c=!1,{record_time:w}=e,{show_recording_waveform:S}=e,{timing:A=!1}=e;function b(D){j[D?"unshift":"push"](()=>{u=D,t(6,u),t(0,i)})}const g=()=>i.startRecording();function d(D){j[D?"unshift":"push"](()=>{l=D,t(9,l),t(0,i)})}const v=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function G(D){j[D?"unshift":"push"](()=>{_=D,t(10,_),t(0,i)})}const p=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function N(D){j[D?"unshift":"push"](()=>{r=D,t(7,r),t(0,i)})}const Z=()=>i.pauseRecording();function X(D){j[D?"unshift":"push"](()=>{f=D,t(8,f),t(0,i)})}const ie=()=>i.resumeRecording();function U(D){a=D,t(5,a)}return n.$$set=D=>{"record"in D&&t(0,i=D.record),"i18n"in D&&t(1,o=D.i18n),"recording"in D&&t(11,s=D.recording),"record_time"in D&&t(2,w=D.record_time),"show_recording_waveform"in D&&t(3,S=D.show_recording_waveform),"timing"in D&&t(4,A=D.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,u.style.display="none",u),t(9,l.style.display="flex",l),t(7,r.style.display="block",r)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,u.style.display="flex",u),t(9,l.style.display="none",l),t(7,r.style.display="none",r),t(6,u.disabled=!1,u)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,r.style.display="none",r),t(8,f.style.display="block",f),t(9,l.style.display="none",l),t(10,_.style.display="flex",_)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,r.style.display="block",r),t(8,f.style.display="none",f),t(6,u.style.display="none",u),t(9,l.style.display="flex",l),t(10,_.style.display="none",_)}),n.$$.dirty&6145&&(s&&!c?(i.startRecording(),t(12,c=!0)):(i.stopRecording(),t(12,c=!1)))},[i,o,w,S,A,a,u,r,f,l,_,s,c,b,g,d,v,G,p,N,Z,X,ie,U]}class ni extends Te{constructor(e){super(),Ie(this,e,ii,ti,Re,{record:0,i18n:1,recording:11,record_time:2,show_recording_waveform:3,timing:4})}}function ft(n){let e,t,i="0:00",o,s,a,u=n[0]==="edit"&&n[17]>0&&_t(n);function r(_,c){return _[16]?si:oi}let f=r(n),l=f(n);return{c(){e=L("div"),t=L("time"),t.textContent=i,o=F(),s=L("div"),u&&u.c(),a=F(),l.c(),this.h()},l(_){e=C(_,"DIV",{class:!0});var c=V(e);t=C(c,"TIME",{class:!0,"data-svelte-h":!0}),Pe(t)!=="svelte-1rda9am"&&(t.textContent=i),o=J(c),s=C(c,"DIV",{});var w=V(s);u&&u.l(w),a=J(w),l.l(w),w.forEach(E),c.forEach(E),this.h()},h(){B(t,"class","time svelte-9n45fh"),B(e,"class","timestamps svelte-9n45fh")},m(_,c){H(_,e,c),R(e,t),n[23](t),R(e,o),R(e,s),u&&u.m(s,null),R(s,a),l.m(s,null)},p(_,c){_[0]==="edit"&&_[17]>0?u?u.p(_,c):(u=_t(_),u.c(),u.m(s,a)):u&&(u.d(1),u=null),f===(f=r(_))&&l?l.p(_,c):(l.d(1),l=f(_),l&&(l.c(),l.m(s,null)))},d(_){_&&E(e),n[23](null),u&&u.d(),l.d()}}}function _t(n){let e,t=we(n[17])+"",i;return{c(){e=L("time"),i=fe(t),this.h()},l(o){e=C(o,"TIME",{class:!0});var s=V(e);i=_e(s,t),s.forEach(E),this.h()},h(){B(e,"class","trim-duration svelte-9n45fh")},m(o,s){H(o,e,s),R(e,i)},p(o,s){s[0]&131072&&t!==(t=we(o[17])+"")&&ce(i,t)},d(o){o&&E(e)}}}function oi(n){let e,t="0:00";return{c(){e=L("time"),e.textContent=t,this.h()},l(i){e=C(i,"TIME",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-1llsiqq"&&(e.textContent=t),this.h()},h(){B(e,"class","duration svelte-9n45fh")},m(i,o){H(i,e,o),n[24](e)},p:ke,d(i){i&&E(e),n[24](null)}}}function si(n){let e,t=we(n[15])+"",i;return{c(){e=L("time"),i=fe(t),this.h()},l(o){e=C(o,"TIME",{class:!0});var s=V(e);i=_e(s,t),s.forEach(E),this.h()},h(){B(e,"class","duration svelte-9n45fh")},m(o,s){H(o,e,s),R(e,i)},p(o,s){s[0]&32768&&t!==(t=we(o[15])+"")&&ce(i,t)},d(o){o&&E(e)}}}function ct(n){let e,t,i;function o(a){n[25](a)}let s={i18n:n[1],timing:n[16],recording:n[5],show_recording_waveform:n[2].show_recording_waveform,record_time:we(n[15])};return n[7]!==void 0&&(s.record=n[7]),e=new ni({props:s}),j.push(()=>te(e,"record",o)),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,u){Y(e,a,u),i=!0},p(a,u){const r={};u[0]&2&&(r.i18n=a[1]),u[0]&65536&&(r.timing=a[16]),u[0]&32&&(r.recording=a[5]),u[0]&4&&(r.show_recording_waveform=a[2].show_recording_waveform),u[0]&32768&&(r.record_time=we(a[15])),!t&&u[0]&128&&(t=!0,r.record=a[7],ee(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){M(e.$$.fragment,a),i=!1},d(a){W(e,a)}}}function dt(n){let e,t,i,o,s;function a(l){n[26](l)}function u(l){n[27](l)}function r(l){n[28](l)}let f={container:n[11],playing:n[10],audio_duration:n[14],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[18],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[6]!==void 0&&(f.waveform=n[6]),n[17]!==void 0&&(f.trimDuration=n[17]),n[0]!==void 0&&(f.mode=n[0]),e=new Ot({props:f}),j.push(()=>te(e,"waveform",a)),j.push(()=>te(e,"trimDuration",u)),j.push(()=>te(e,"mode",r)),{c(){K(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,_){Y(e,l,_),s=!0},p(l,_){const c={};_[0]&2048&&(c.container=l[11]),_[0]&1024&&(c.playing=l[10]),_[0]&16384&&(c.audio_duration=l[14]),_[0]&2&&(c.i18n=l[1]),_[0]&16&&(c.editable=l[4]),_[0]&8&&(c.handle_reset_value=l[3]),_[0]&4&&(c.waveform_options=l[2]),!t&&_[0]&64&&(t=!0,c.waveform=l[6],ee(()=>t=!1)),!i&&_[0]&131072&&(i=!0,c.trimDuration=l[17],ee(()=>i=!1)),!o&&_[0]&1&&(o=!0,c.mode=l[0],ee(()=>o=!1)),e.$set(c)},i(l){s||(I(e.$$.fragment,l),s=!0)},o(l){M(e.$$.fragment,l),s=!1},d(l){W(e,l)}}}function ri(n){let e,t,i,o,s,a,u,r,f=(n[16]||n[13])&&n[2].show_recording_waveform&&ft(n),l=n[12]&&!n[13]&&ct(n),_=n[6]&&n[13]&&dt(n);return{c(){e=L("div"),t=L("div"),i=F(),o=L("div"),s=F(),f&&f.c(),a=F(),l&&l.c(),u=F(),_&&_.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var w=V(e);t=C(w,"DIV",{class:!0,"data-testid":!0}),V(t).forEach(E),i=J(w),o=C(w,"DIV",{"data-testid":!0}),V(o).forEach(E),s=J(w),f&&f.l(w),a=J(w),l&&l.l(w),u=J(w),_&&_.l(w),w.forEach(E),this.h()},h(){B(t,"class","microphone svelte-9n45fh"),B(t,"data-testid","microphone-waveform"),B(o,"data-testid","recording-waveform"),B(e,"class","component-wrapper svelte-9n45fh")},m(c,w){H(c,e,w),R(e,t),n[21](t),R(e,i),R(e,o),n[22](o),R(e,s),f&&f.m(e,null),R(e,a),l&&l.m(e,null),R(e,u),_&&_.m(e,null),r=!0},p(c,w){(c[16]||c[13])&&c[2].show_recording_waveform?f?f.p(c,w):(f=ft(c),f.c(),f.m(e,a)):f&&(f.d(1),f=null),c[12]&&!c[13]?l?(l.p(c,w),w[0]&12288&&I(l,1)):(l=ct(c),l.c(),I(l,1),l.m(e,u)):l&&(ye(),M(l,1,1,()=>{l=null}),Ee()),c[6]&&c[13]?_?(_.p(c,w),w[0]&8256&&I(_,1)):(_=dt(c),_.c(),I(_,1),_.m(e,null)):_&&(ye(),M(_,1,1,()=>{_=null}),Ee())},i(c){r||(I(l),I(_),r=!0)},o(c){M(l),M(_),r=!1},d(c){c&&E(e),n[21](null),n[22](null),f&&f.d(),l&&l.d(),_&&_.d()}}}function li(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:s}=e,{waveform_settings:a}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:r}=e,{editable:f=!0}=e,{recording:l=!1}=e,_,c,w=!1,S,A,b,g=null,d,v,G,p=0,N,Z=!1,X=0;const ie=()=>{clearInterval(N),N=setInterval(()=>{t(15,p++,p)},1e3)},U=$e();function D(){if(ie(),t(16,Z=!0),U("start_recording"),u.show_recording_waveform){let k=A;k&&(k.style.display="block")}}async function se(k){t(15,p=0),t(16,Z=!1),clearInterval(N);try{const le=await k.arrayBuffer(),oe=await new AudioContext({sampleRate:a.sampleRate}).decodeAudioData(le);oe&&await st(oe).then(async De=>{await s([De],"change"),await s([De],"stop_recording")})}catch(le){console.error(le)}}const z=()=>{A&&t(12,A.innerHTML="",A),_!==void 0&&_.destroy(),A&&(_=xe.create({...a,normalize:!1,container:A}),t(7,b=_.registerPlugin(Me.create())),b.startMic(),b==null||b.on("record-end",se),b==null||b.on("record-start",D),b==null||b.on("record-pause",()=>{U("pause_recording"),clearInterval(N)}),b==null||b.on("record-end",k=>{t(13,g=URL.createObjectURL(k));const le=A,q=S;le&&(le.style.display="none"),q&&g&&(q.innerHTML="",de())}))},de=()=>{let k=S;!g||!k||t(6,c=xe.create({container:k,url:g,...a}))},he=async(k,le)=>{t(0,i="edit");const q=c.getDecodedData();q&&await st(q,k,le).then(async oe=>{await s([oe],"change"),await s([oe],"stop_recording"),c.destroy(),de()}),U("edit")};et(()=>{z(),window.addEventListener("keydown",k=>{k.key==="ArrowRight"?ot(c,.1):k.key==="ArrowLeft"&&ot(c,-.1)})});function T(k){j[k?"unshift":"push"](()=>{A=k,t(12,A)})}function P(k){j[k?"unshift":"push"](()=>{S=k,t(11,S)})}function y(k){j[k?"unshift":"push"](()=>{d=k,t(8,d),t(6,c)})}function x(k){j[k?"unshift":"push"](()=>{v=k,t(9,v),t(6,c)})}function re(k){b=k,t(7,b)}function ne(k){c=k,t(6,c)}function ae(k){X=k,t(17,X)}function ue(k){i=k,t(0,i)}return n.$$set=k=>{"mode"in k&&t(0,i=k.mode),"i18n"in k&&t(1,o=k.i18n),"dispatch_blob"in k&&t(19,s=k.dispatch_blob),"waveform_settings"in k&&t(20,a=k.waveform_settings),"waveform_options"in k&&t(2,u=k.waveform_options),"handle_reset_value"in k&&t(3,r=k.handle_reset_value),"editable"in k&&t(4,f=k.editable),"recording"in k&&t(5,l=k.recording)},n.$$.update=()=>{n.$$.dirty[0]&128&&(b==null||b.on("record-resume",()=>{ie()})),n.$$.dirty[0]&576&&(c==null||c.on("decode",k=>{t(14,G=k),v&&t(9,v.textContent=we(k),v)})),n.$$.dirty[0]&320&&(c==null||c.on("timeupdate",k=>d&&t(8,d.textContent=we(k),d))),n.$$.dirty[0]&64&&(c==null||c.on("pause",()=>{U("pause"),t(10,w=!1)})),n.$$.dirty[0]&64&&(c==null||c.on("play",()=>{U("play"),t(10,w=!0)})),n.$$.dirty[0]&64&&(c==null||c.on("finish",()=>{U("stop"),t(10,w=!1)}))},[i,o,u,r,f,l,c,b,d,v,w,S,A,g,G,p,Z,X,he,s,a,T,P,y,x,re,ne,ae,ue]}class ai extends Te{constructor(e){super(),Ie(this,e,li,ri,Re,{mode:0,i18n:1,dispatch_blob:19,waveform_settings:20,waveform_options:2,handle_reset_value:3,editable:4,recording:5},null,[-1,-1])}}function mt(n){let e;return{c(){e=L("div"),this.h()},l(t){e=C(t,"DIV",{}),V(e).forEach(E),this.h()},h(){tt(e,"display",n[0]?"block":"none")},m(t,i){H(t,e,i),n[11](e)},p(t,i){i&1&&tt(e,"display",t[0]?"block":"none")},d(t){t&&E(e),n[11](null)}}}function ui(n){let e,t,i='<span class="dot"></span>',o,s=n[4]("audio.record")+"",a,u,r;return{c(){e=L("button"),t=L("span"),t.innerHTML=i,o=F(),a=fe(s),this.h()},l(f){e=C(f,"BUTTON",{class:!0});var l=V(e);t=C(l,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(t)!=="svelte-1dwz2xe"&&(t.innerHTML=i),o=J(l),a=_e(l,s),l.forEach(E),this.h()},h(){B(t,"class","record-icon"),B(e,"class","record-button svelte-1fz19cj")},m(f,l){H(f,e,l),R(e,t),R(e,o),R(e,a),u||(r=ge(e,"click",n[14]),u=!0)},p(f,l){l&16&&s!==(s=f[4]("audio.record")+"")&&ce(a,s)},i:ke,o:ke,d(f){f&&E(e),u=!1,r()}}}function fi(n){let e,t,i,o,s=n[4]("audio.waiting")+"",a,u,r,f;return i=new Jt({}),{c(){e=L("button"),t=L("div"),K(i.$$.fragment),o=F(),a=fe(s),this.h()},l(l){e=C(l,"BUTTON",{class:!0});var _=V(e);t=C(_,"DIV",{class:!0});var c=V(t);Q(i.$$.fragment,c),c.forEach(E),o=J(_),a=_e(_,s),_.forEach(E),this.h()},h(){B(t,"class","icon svelte-1fz19cj"),B(e,"class","spinner-button svelte-1fz19cj")},m(l,_){H(l,e,_),R(e,t),Y(i,t,null),R(e,o),R(e,a),u=!0,r||(f=ge(e,"click",n[13]),r=!0)},p(l,_){(!u||_&16)&&s!==(s=l[4]("audio.waiting")+"")&&ce(a,s)},i(l){u||(I(i.$$.fragment,l),u=!0)},o(l){M(i.$$.fragment,l),u=!1},d(l){l&&E(e),W(i),r=!1,f()}}}function _i(n){let e,t,i='<span class="pinger"></span> <span class="dot"></span>',o,s=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",a,u,r,f;return{c(){e=L("button"),t=L("span"),t.innerHTML=i,o=F(),a=fe(s),this.h()},l(l){e=C(l,"BUTTON",{class:!0});var _=V(e);t=C(_,"SPAN",{class:!0,"data-svelte-h":!0}),Pe(t)!=="svelte-bla7qm"&&(t.innerHTML=i),o=J(_),a=_e(_,s),_.forEach(E),this.h()},h(){B(t,"class","record-icon"),B(e,"class",u=it(n[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")},m(l,_){H(l,e,_),R(e,t),R(e,o),R(e,a),r||(f=ge(e,"click",n[12]),r=!0)},p(l,_){_&18&&s!==(s=(l[1]?l[4]("audio.pause"):l[4]("audio.stop"))+"")&&ce(a,s),_&2&&u!==(u=it(l[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")&&B(e,"class",u)},i:ke,o:ke,d(l){l&&E(e),r=!1,f()}}}function ci(n){let e,t,i,o,s,a,u,r,f,l=n[5].show_recording_waveform&&mt(n);const _=[_i,fi,ui],c=[];function w(b,g){return b[0]&&!b[6]?0:b[0]&&b[6]?1:2}o=w(n),s=c[o]=_[o](n);function S(b){n[15](b)}let A={i18n:n[4]};return n[9]!==void 0&&(A.micDevices=n[9]),u=new yt({props:A}),j.push(()=>te(u,"micDevices",S)),{c(){e=L("div"),l&&l.c(),t=F(),i=L("div"),s.c(),a=F(),K(u.$$.fragment),this.h()},l(b){e=C(b,"DIV",{class:!0});var g=V(e);l&&l.l(g),t=J(g),i=C(g,"DIV",{class:!0});var d=V(i);s.l(d),a=J(d),Q(u.$$.fragment,d),d.forEach(E),g.forEach(E),this.h()},h(){B(i,"class","controls svelte-1fz19cj"),B(e,"class","mic-wrap svelte-1fz19cj")},m(b,g){H(b,e,g),l&&l.m(e,null),R(e,t),R(e,i),c[o].m(i,null),R(i,a),Y(u,i,null),f=!0},p(b,[g]){b[5].show_recording_waveform?l?l.p(b,g):(l=mt(b),l.c(),l.m(e,t)):l&&(l.d(1),l=null);let d=o;o=w(b),o===d?c[o].p(b,g):(ye(),M(c[d],1,1,()=>{c[d]=null}),Ee(),s=c[o],s?s.p(b,g):(s=c[o]=_[o](b),s.c()),I(s,1),s.m(i,a));const v={};g&16&&(v.i18n=b[4]),!r&&g&512&&(r=!0,v.micDevices=b[9],ee(()=>r=!1)),u.$set(v)},i(b){f||(I(s),I(u.$$.fragment,b),f=!0)},o(b){M(s),M(u.$$.fragment,b),f=!1},d(b){b&&E(e),l&&l.d(),c[o].d(),W(u)}}}function di(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:s}=e,{record:a}=e,{i18n:u}=e,{waveform_settings:r}=e,{waveform_options:f={show_recording_waveform:!0}}=e,{waiting:l=!1}=e,_,c,w,S=[];et(()=>{A()});const A=()=>{_!==void 0&&_.destroy(),w&&(_=xe.create({...r,height:100,container:w}),t(7,c=_.registerPlugin(Me.create())))};function b(p){j[p?"unshift":"push"](()=>{w=p,t(8,w)})}const g=()=>{c==null||c.stopMic(),s()},d=()=>{s()},v=()=>{c==null||c.startMic(),a()};function G(p){S=p,t(9,S)}return n.$$set=p=>{"recording"in p&&t(0,i=p.recording),"paused_recording"in p&&t(1,o=p.paused_recording),"stop"in p&&t(2,s=p.stop),"record"in p&&t(3,a=p.record),"i18n"in p&&t(4,u=p.i18n),"waveform_settings"in p&&t(10,r=p.waveform_settings),"waveform_options"in p&&t(5,f=p.waveform_options),"waiting"in p&&t(6,l=p.waiting)},[i,o,s,a,u,f,l,c,w,S,r,b,g,d,v,G]}class mi extends Te{constructor(e){super(),Ie(this,e,di,ci,Re,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}}function hi(n){let e,t,i,o,s;e=new kt({props:{i18n:n[12],download:n[9]?n[2].url:null}}),e.$on("clear",n[27]),e.$on("edit",n[46]);function a(r){n[47](r)}let u={value:n[2],label:n[5],i18n:n[12],dispatch_blob:n[25],waveform_settings:n[13],waveform_options:n[15],trim_region_settings:n[14],handle_reset_value:n[16],editable:n[17],loop:n[7],interactive:!0};return n[23]!==void 0&&(u.mode=n[23]),i=new Nt({props:u}),j.push(()=>te(i,"mode",a)),i.$on("stop",n[48]),i.$on("play",n[49]),i.$on("pause",n[50]),i.$on("edit",n[51]),{c(){K(e.$$.fragment),t=F(),K(i.$$.fragment)},l(r){Q(e.$$.fragment,r),t=J(r),Q(i.$$.fragment,r)},m(r,f){Y(e,r,f),H(r,t,f),Y(i,r,f),s=!0},p(r,f){const l={};f[0]&4096&&(l.i18n=r[12]),f[0]&516&&(l.download=r[9]?r[2].url:null),e.$set(l);const _={};f[0]&4&&(_.value=r[2]),f[0]&32&&(_.label=r[5]),f[0]&4096&&(_.i18n=r[12]),f[0]&8192&&(_.waveform_settings=r[13]),f[0]&32768&&(_.waveform_options=r[15]),f[0]&16384&&(_.trim_region_settings=r[14]),f[0]&65536&&(_.handle_reset_value=r[16]),f[0]&131072&&(_.editable=r[17]),f[0]&128&&(_.loop=r[7]),!o&&f[0]&8388608&&(o=!0,_.mode=r[23],ee(()=>o=!1)),i.$set(_)},i(r){s||(I(e.$$.fragment,r),I(i.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),M(i.$$.fragment,r),s=!1},d(r){r&&E(t),W(e,r),W(i,r)}}}function gi(n){let e,t,i,o;const s=[wi,bi],a=[];function u(r,f){return r[3]==="microphone"?0:r[3]==="upload"?1:-1}return~(e=u(n))&&(t=a[e]=s[e](n)),{c(){t&&t.c(),i=be()},l(r){t&&t.l(r),i=be()},m(r,f){~e&&a[e].m(r,f),H(r,i,f),o=!0},p(r,f){let l=e;e=u(r),e===l?~e&&a[e].p(r,f):(t&&(ye(),M(a[l],1,1,()=>{a[l]=null}),Ee()),~e?(t=a[e],t?t.p(r,f):(t=a[e]=s[e](r),t.c()),I(t,1),t.m(i.parentNode,i)):t=null)},i(r){o||(I(t),o=!0)},o(r){M(t),o=!1},d(r){r&&E(i),~e&&a[e].d(r)}}}function bi(n){let e,t,i,o;function s(r){n[43](r)}function a(r){n[44](r)}let u={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[6],max_file_size:n[18],upload:n[19],stream_handler:n[20],$$slots:{default:[vi]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dragging=n[0]),n[4]!==void 0&&(u.uploading=n[4]),e=new jt({props:u}),j.push(()=>te(e,"dragging",s)),j.push(()=>te(e,"uploading",a)),e.$on("load",n[28]),e.$on("error",n[45]),{c(){K(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,f){Y(e,r,f),o=!0},p(r,f){const l={};f[0]&64&&(l.root=r[6]),f[0]&262144&&(l.max_file_size=r[18]),f[0]&524288&&(l.upload=r[19]),f[0]&1048576&&(l.stream_handler=r[20]),f[1]&4194304&&(l.$$scope={dirty:f,ctx:r}),!t&&f[0]&1&&(t=!0,l.dragging=r[0],ee(()=>t=!1)),!i&&f[0]&16&&(i=!0,l.uploading=r[4],ee(()=>i=!1)),e.$set(l)},i(r){o||(I(e.$$.fragment,r),o=!0)},o(r){M(e.$$.fragment,r),o=!1},d(r){W(e,r)}}}function wi(n){let e,t,i,o,s,a;e=new kt({props:{i18n:n[12]}}),e.$on("clear",n[27]);const u=[ki,pi],r=[];function f(l,_){return l[11]?0:1}return i=f(n),o=r[i]=u[i](n),{c(){K(e.$$.fragment),t=F(),o.c(),s=be()},l(l){Q(e.$$.fragment,l),t=J(l),o.l(l),s=be()},m(l,_){Y(e,l,_),H(l,t,_),r[i].m(l,_),H(l,s,_),a=!0},p(l,_){const c={};_[0]&4096&&(c.i18n=l[12]),e.$set(c);let w=i;i=f(l),i===w?r[i].p(l,_):(ye(),M(r[w],1,1,()=>{r[w]=null}),Ee(),o=r[i],o?o.p(l,_):(o=r[i]=u[i](l),o.c()),I(o,1),o.m(s.parentNode,s))},i(l){a||(I(e.$$.fragment,l),I(o),a=!0)},o(l){M(e.$$.fragment,l),M(o),a=!1},d(l){l&&(E(t),E(s)),W(e,l),r[i].d(l)}}}function vi(n){let e;const t=n[38].default,i=Bt(t,n,n[53],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[1]&4194304)&&Pt(i,t,o,o[53],e?Ct(t,o[53],s,null):Lt(o[53]),null)},i(o){e||(I(i,o),e=!0)},o(o){M(i,o),e=!1},d(o){i&&i.d(o)}}}function pi(n){let e,t,i;function o(a){n[39](a)}let s={i18n:n[12],editable:n[17],recording:n[1],dispatch_blob:n[25],waveform_settings:n[13],waveform_options:n[15],handle_reset_value:n[16]};return n[23]!==void 0&&(s.mode=n[23]),e=new ai({props:s}),j.push(()=>te(e,"mode",o)),e.$on("start_recording",n[40]),e.$on("pause_recording",n[41]),e.$on("stop_recording",n[42]),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,u){Y(e,a,u),i=!0},p(a,u){const r={};u[0]&4096&&(r.i18n=a[12]),u[0]&131072&&(r.editable=a[17]),u[0]&2&&(r.recording=a[1]),u[0]&8192&&(r.waveform_settings=a[13]),u[0]&32768&&(r.waveform_options=a[15]),u[0]&65536&&(r.handle_reset_value=a[16]),!t&&u[0]&8388608&&(t=!0,r.mode=a[23],ee(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){M(e.$$.fragment,a),i=!1},d(a){W(e,a)}}}function ki(n){let e,t;return e=new mi({props:{record:n[26],recording:n[1],stop:n[29],i18n:n[12],waveform_settings:n[13],waveform_options:n[15],waiting:n[22]==="waiting"}}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,o){Y(e,i,o),t=!0},p(i,o){const s={};o[0]&2&&(s.recording=i[1]),o[0]&4096&&(s.i18n=i[12]),o[0]&8192&&(s.waveform_settings=i[13]),o[0]&32768&&(s.waveform_options=i[15]),o[0]&4194304&&(s.waiting=i[22]==="waiting"),e.$set(s)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){W(e,i)}}}function yi(n){let e,t,i,o,s,a,u,r,f,l,_;e=new Ft({props:{show_label:n[8],Icon:Ht,float:n[3]==="upload"&&n[2]===null,label:n[5]||n[12]("audio.audio")}}),o=new qt({props:{time_limit:n[21]}});const c=[gi,hi],w=[];function S(g,d){return g[2]===null||g[11]?0:1}a=S(n),u=w[a]=c[a](n);function A(g){n[52](g)}let b={sources:n[10],handle_clear:n[27]};return n[3]!==void 0&&(b.active_source=n[3]),f=new Gt({props:b}),j.push(()=>te(f,"active_source",A)),{c(){K(e.$$.fragment),t=F(),i=L("div"),K(o.$$.fragment),s=F(),u.c(),r=F(),K(f.$$.fragment),this.h()},l(g){Q(e.$$.fragment,g),t=J(g),i=C(g,"DIV",{class:!0});var d=V(i);Q(o.$$.fragment,d),s=J(d),u.l(d),r=J(d),Q(f.$$.fragment,d),d.forEach(E),this.h()},h(){B(i,"class","audio-container svelte-cbyffp")},m(g,d){Y(e,g,d),H(g,t,d),H(g,i,d),Y(o,i,null),R(i,s),w[a].m(i,null),R(i,r),Y(f,i,null),_=!0},p(g,d){const v={};d[0]&256&&(v.show_label=g[8]),d[0]&12&&(v.float=g[3]==="upload"&&g[2]===null),d[0]&4128&&(v.label=g[5]||g[12]("audio.audio")),e.$set(v);const G={};d[0]&2097152&&(G.time_limit=g[21]),o.$set(G);let p=a;a=S(g),a===p?w[a].p(g,d):(ye(),M(w[p],1,1,()=>{w[p]=null}),Ee(),u=w[a],u?u.p(g,d):(u=w[a]=c[a](g),u.c()),I(u,1),u.m(i,r));const N={};d[0]&1024&&(N.sources=g[10]),!l&&d[0]&8&&(l=!0,N.active_source=g[3],ee(()=>l=!1)),f.$set(N)},i(g){_||(I(e.$$.fragment,g),I(o.$$.fragment,g),I(u),I(f.$$.fragment,g),_=!0)},o(g){M(e.$$.fragment,g),M(o.$$.fragment,g),M(u),M(f.$$.fragment,g),_=!1},d(g){g&&(E(t),E(i)),W(e,g),W(o),w[a].d(),W(f)}}}const ht=44;function Ei(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:s=null}=e,{label:a}=e,{root:u}=e,{loop:r}=e,{show_label:f=!0}=e,{show_download_button:l=!1}=e,{sources:_=["microphone","upload"]}=e,{pending:c=!1}=e,{streaming:w=!1}=e,{i18n:S}=e,{waveform_settings:A}=e,{trim_region_settings:b={}}=e,{waveform_options:g={}}=e,{dragging:d}=e,{active_source:v}=e,{handle_reset_value:G=()=>{}}=e,{editable:p=!0}=e,{max_file_size:N=null}=e,{upload:Z}=e,{stream_handler:X}=e,{stream_every:ie}=e,{uploading:U=!1}=e,{recording:D=!1}=e,se=null,z="closed";const de=m=>{m==="closed"?(t(21,se=null),t(22,z="closed")):m==="waiting"?t(22,z="waiting"):t(22,z="open")},he=m=>{D&&t(21,se=m)};let T,P="",y,x=[],re=!1,ne=!1,ae=[],ue;function k(){ue=[rt(()=>import("./module.D9FAvowU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url),rt(()=>import("./module.niXGEr8P.js"),__vite__mapDeps([9,1]),import.meta.url)]}typeof window<"u"&&w&&k();const q=$e(),oe=async(m,$)=>{var Be;let me=new File(m,"audio.wav");const ve=await zt([me],$==="stream");t(2,s=(Be=await Z(ve,u,void 0,N||void 0))==null?void 0:Be.filter(Boolean)[0]),q($,s)};At(()=>{w&&T&&T.state!=="inactive"&&T.stop()});async function De(){let m;try{m=await navigator.mediaDevices.getUserMedia({audio:!0})}catch($){if(!navigator.mediaDevices){q("error",S("audio.no_device_support"));return}if($ instanceof DOMException&&$.name=="NotAllowedError"){q("error",S("audio.allow_recording_access"));return}throw $}if(m!=null){if(w){const[{MediaRecorder:$,register:me},{connect:ve}]=await Promise.all(ue);await me(await ve()),t(34,T=new $(m,{mimeType:"audio/wav"})),T.addEventListener("dataavailable",Le)}else t(34,T=new MediaRecorder(m)),T.addEventListener("dataavailable",$=>{ae.push($.data)});T.addEventListener("stop",async()=>{t(1,D=!1),await oe(ae,"change"),await oe(ae,"stop_recording"),ae=[]}),ne=!0}}async function Le(m){let $=await m.data.arrayBuffer(),me=new Uint8Array($);if(y||(t(35,y=new Uint8Array($.slice(0,ht))),me=new Uint8Array($.slice(ht))),c)x.push(me);else{let ve=[y].concat(x,[me]);if(!D||z==="waiting")return;oe(ve,"stream"),t(36,x=[])}}async function Se(){t(1,D=!0),q("start_recording"),ne||await De(),t(35,y=void 0),w&&T.start(ie*1e3)}function Ce(){q("change",null),q("clear"),t(23,P=""),t(2,s=null)}function Ue({detail:m}){t(2,s=m),q("change",m),q("upload",m)}async function Ae(){t(1,D=!1),w&&(q("close_stream"),q("stop_recording"),T.stop(),c&&t(37,re=!0),oe(ae,"stop_recording"),q("clear"),t(23,P=""))}function ze(m){P=m,t(23,P)}function Oe(m){pe.call(this,n,m)}function Ne(m){pe.call(this,n,m)}function Ve(m){pe.call(this,n,m)}function je(m){d=m,t(0,d)}function He(m){U=m,t(4,U)}const qe=({detail:m})=>q("error",m),Fe=()=>t(23,P="edit");function Je(m){P=m,t(23,P)}function Ge(m){pe.call(this,n,m)}function Ke(m){pe.call(this,n,m)}function Qe(m){pe.call(this,n,m)}function Ye(m){pe.call(this,n,m)}function We(m){v=m,t(3,v)}return n.$$set=m=>{"value"in m&&t(2,s=m.value),"label"in m&&t(5,a=m.label),"root"in m&&t(6,u=m.root),"loop"in m&&t(7,r=m.loop),"show_label"in m&&t(8,f=m.show_label),"show_download_button"in m&&t(9,l=m.show_download_button),"sources"in m&&t(10,_=m.sources),"pending"in m&&t(30,c=m.pending),"streaming"in m&&t(11,w=m.streaming),"i18n"in m&&t(12,S=m.i18n),"waveform_settings"in m&&t(13,A=m.waveform_settings),"trim_region_settings"in m&&t(14,b=m.trim_region_settings),"waveform_options"in m&&t(15,g=m.waveform_options),"dragging"in m&&t(0,d=m.dragging),"active_source"in m&&t(3,v=m.active_source),"handle_reset_value"in m&&t(16,G=m.handle_reset_value),"editable"in m&&t(17,p=m.editable),"max_file_size"in m&&t(18,N=m.max_file_size),"upload"in m&&t(19,Z=m.upload),"stream_handler"in m&&t(20,X=m.stream_handler),"stream_every"in m&&t(31,ie=m.stream_every),"uploading"in m&&t(4,U=m.uploading),"recording"in m&&t(1,D=m.recording),"$$scope"in m&&t(53,o=m.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&q("drag",d),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&112&&re&&c===!1&&(t(37,re=!1),y&&x)){let m=[y].concat(x);t(36,x=[]),oe(m,"stream")}n.$$.dirty[0]&2|n.$$.dirty[1]&8&&!D&&T&&Ae(),n.$$.dirty[0]&2|n.$$.dirty[1]&8&&D&&T&&Se()},[d,D,s,v,U,a,u,r,f,l,_,w,S,A,b,g,G,p,N,Z,X,se,z,P,q,oe,Se,Ce,Ue,Ae,c,ie,de,he,T,y,x,re,i,ze,Oe,Ne,Ve,je,He,qe,Fe,Je,Ge,Ke,Qe,Ye,We,o]}class Di extends Te{constructor(e){super(),Ie(this,e,Ei,yi,Re,{value:2,label:5,root:6,loop:7,show_label:8,show_download_button:9,sources:10,pending:30,streaming:11,i18n:12,waveform_settings:13,trim_region_settings:14,waveform_options:15,dragging:0,active_source:3,handle_reset_value:16,editable:17,max_file_size:18,upload:19,stream_handler:20,stream_every:31,uploading:4,recording:1,modify_stream:32,set_time_limit:33},null,[-1,-1])}get modify_stream(){return this.$$.ctx[32]}get set_time_limit(){return this.$$.ctx[33]}}const Ri=Di;function Ti(n){let e,t;return e=new bt({props:{variant:n[0]===null&&n[25]==="upload"?"dashed":"solid",border_mode:n[27]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[4],elem_classes:n[5],visible:n[6],container:n[12],scale:n[13],min_width:n[14],$$slots:{default:[Si]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,o){Y(e,i,o),t=!0},p(i,o){const s={};o[0]&33554433&&(s.variant=i[0]===null&&i[25]==="upload"?"dashed":"solid"),o[0]&134217728&&(s.border_mode=i[27]?"focus":"base"),o[0]&16&&(s.elem_id=i[4]),o[0]&32&&(s.elem_classes=i[5]),o[0]&64&&(s.visible=i[6]),o[0]&4096&&(s.container=i[12]),o[0]&8192&&(s.scale=i[13]),o[0]&16384&&(s.min_width=i[14]),o[0]&536710927|o[2]&128&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){W(e,i)}}}function Ii(n){let e,t;return e=new bt({props:{variant:"solid",border_mode:n[27]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[4],elem_classes:n[5],visible:n[6],container:n[12],scale:n[13],min_width:n[14],$$slots:{default:[Ai]},$$scope:{ctx:n}}}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,o){Y(e,i,o),t=!0},p(i,o){const s={};o[0]&134217728&&(s.border_mode=i[27]?"focus":"base"),o[0]&16&&(s.elem_id=i[4]),o[0]&32&&(s.elem_classes=i[5]),o[0]&64&&(s.visible=i[6]),o[0]&4096&&(s.container=i[12]),o[0]&8192&&(s.scale=i[13]),o[0]&16384&&(s.min_width=i[14]),o[0]&277842435|o[2]&128&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){W(e,i)}}}function Mi(n){let e,t;return e=new Qt({props:{i18n:n[23].i18n,type:"audio"}}),{c(){K(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,o){Y(e,i,o),t=!0},p(i,o){const s={};o[0]&8388608&&(s.i18n=i[23].i18n),e.$set(s)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){W(e,i)}}}function Si(n){let e,t,i,o,s,a,u,r,f;const l=[{autoscroll:n[23].autoscroll},{i18n:n[23].i18n},n[1]];let _={};for(let d=0;d<l.length;d+=1)_=gt(_,l[d]);e=new wt({props:_}),e.$on("clear_status",n[45]);function c(d){n[48](d)}function w(d){n[49](d)}function S(d){n[50](d)}function A(d){n[51](d)}function b(d){n[52](d)}let g={label:n[9],show_label:n[11],show_download_button:n[16],value:n[0],root:n[10],sources:n[8],active_source:n[25],pending:n[20],streaming:n[21],loop:n[15],max_file_size:n[23].max_file_size,handle_reset_value:n[29],editable:n[18],i18n:n[23].i18n,waveform_settings:n[28],waveform_options:n[19],trim_region_settings:n[30],stream_every:n[22],upload:n[46],stream_handler:n[47],$$slots:{default:[Mi]},$$scope:{ctx:n}};return n[2]!==void 0&&(g.recording=n[2]),n[27]!==void 0&&(g.dragging=n[27]),n[24]!==void 0&&(g.uploading=n[24]),n[26]!==void 0&&(g.modify_stream=n[26]),n[3]!==void 0&&(g.set_time_limit=n[3]),i=new Ri({props:g}),j.push(()=>te(i,"recording",c)),j.push(()=>te(i,"dragging",w)),j.push(()=>te(i,"uploading",S)),j.push(()=>te(i,"modify_stream",A)),j.push(()=>te(i,"set_time_limit",b)),i.$on("change",n[53]),i.$on("stream",n[54]),i.$on("drag",n[55]),i.$on("edit",n[56]),i.$on("play",n[57]),i.$on("pause",n[58]),i.$on("stop",n[59]),i.$on("start_recording",n[60]),i.$on("pause_recording",n[61]),i.$on("stop_recording",n[62]),i.$on("upload",n[63]),i.$on("clear",n[64]),i.$on("error",n[31]),i.$on("close_stream",n[65]),{c(){K(e.$$.fragment),t=F(),K(i.$$.fragment)},l(d){Q(e.$$.fragment,d),t=J(d),Q(i.$$.fragment,d)},m(d,v){Y(e,d,v),H(d,t,v),Y(i,d,v),f=!0},p(d,v){const G=v[0]&8388610?vt(l,[v[0]&8388608&&{autoscroll:d[23].autoscroll},v[0]&8388608&&{i18n:d[23].i18n},v[0]&2&&pt(d[1])]):{};e.$set(G);const p={};v[0]&512&&(p.label=d[9]),v[0]&2048&&(p.show_label=d[11]),v[0]&65536&&(p.show_download_button=d[16]),v[0]&1&&(p.value=d[0]),v[0]&1024&&(p.root=d[10]),v[0]&256&&(p.sources=d[8]),v[0]&33554432&&(p.active_source=d[25]),v[0]&1048576&&(p.pending=d[20]),v[0]&2097152&&(p.streaming=d[21]),v[0]&32768&&(p.loop=d[15]),v[0]&8388608&&(p.max_file_size=d[23].max_file_size),v[0]&262144&&(p.editable=d[18]),v[0]&8388608&&(p.i18n=d[23].i18n),v[0]&268435456&&(p.waveform_settings=d[28]),v[0]&524288&&(p.waveform_options=d[19]),v[0]&4194304&&(p.stream_every=d[22]),v[0]&8388608&&(p.upload=d[46]),v[0]&8388608&&(p.stream_handler=d[47]),v[0]&8388608|v[2]&128&&(p.$$scope={dirty:v,ctx:d}),!o&&v[0]&4&&(o=!0,p.recording=d[2],ee(()=>o=!1)),!s&&v[0]&134217728&&(s=!0,p.dragging=d[27],ee(()=>s=!1)),!a&&v[0]&16777216&&(a=!0,p.uploading=d[24],ee(()=>a=!1)),!u&&v[0]&67108864&&(u=!0,p.modify_stream=d[26],ee(()=>u=!1)),!r&&v[0]&8&&(r=!0,p.set_time_limit=d[3],ee(()=>r=!1)),i.$set(p)},i(d){f||(I(e.$$.fragment,d),I(i.$$.fragment,d),f=!0)},o(d){M(e.$$.fragment,d),M(i.$$.fragment,d),f=!1},d(d){d&&E(t),W(e,d),W(i,d)}}}function Ai(n){let e,t,i,o;const s=[{autoscroll:n[23].autoscroll},{i18n:n[23].i18n},n[1]];let a={};for(let u=0;u<s.length;u+=1)a=gt(a,s[u]);return e=new wt({props:a}),e.$on("clear_status",n[39]),i=new Vt({props:{i18n:n[23].i18n,show_label:n[11],show_download_button:n[16],show_share_button:n[17],value:n[0],label:n[9],loop:n[15],waveform_settings:n[28],waveform_options:n[19],editable:n[18]}}),i.$on("share",n[40]),i.$on("error",n[41]),i.$on("play",n[42]),i.$on("pause",n[43]),i.$on("stop",n[44]),{c(){K(e.$$.fragment),t=F(),K(i.$$.fragment)},l(u){Q(e.$$.fragment,u),t=J(u),Q(i.$$.fragment,u)},m(u,r){Y(e,u,r),H(u,t,r),Y(i,u,r),o=!0},p(u,r){const f=r[0]&8388610?vt(s,[r[0]&8388608&&{autoscroll:u[23].autoscroll},r[0]&8388608&&{i18n:u[23].i18n},r[0]&2&&pt(u[1])]):{};e.$set(f);const l={};r[0]&8388608&&(l.i18n=u[23].i18n),r[0]&2048&&(l.show_label=u[11]),r[0]&65536&&(l.show_download_button=u[16]),r[0]&131072&&(l.show_share_button=u[17]),r[0]&1&&(l.value=u[0]),r[0]&512&&(l.label=u[9]),r[0]&32768&&(l.loop=u[15]),r[0]&268435456&&(l.waveform_settings=u[28]),r[0]&524288&&(l.waveform_options=u[19]),r[0]&262144&&(l.editable=u[18]),i.$set(l)},i(u){o||(I(e.$$.fragment,u),I(i.$$.fragment,u),o=!0)},o(u){M(e.$$.fragment,u),M(i.$$.fragment,u),o=!1},d(u){u&&E(t),W(e,u),W(i,u)}}}function Bi(n){let e,t,i,o;const s=[Ii,Ti],a=[];function u(r,f){return r[7]?1:0}return e=u(n),t=a[e]=s[e](n),{c(){t.c(),i=be()},l(r){t.l(r),i=be()},m(r,f){a[e].m(r,f),H(r,i,f),o=!0},p(r,f){let l=e;e=u(r),e===l?a[e].p(r,f):(ye(),M(a[l],1,1,()=>{a[l]=null}),Ee(),t=a[e],t?t.p(r,f):(t=a[e]=s[e](r),t.c()),I(t,1),t.m(i.parentNode,i))},i(r){o||(I(t),o=!0)},o(r){M(t),o=!1},d(r){r&&E(i),a[e].d(r)}}}function Pi(n,e,t){let{value_is_output:i=!1}=e,{elem_id:o=""}=e,{elem_classes:s=[]}=e,{visible:a=!0}=e,{interactive:u}=e,{value:r=null}=e,{sources:f}=e,{label:l}=e,{root:_}=e,{show_label:c}=e,{container:w=!0}=e,{scale:S=null}=e,{min_width:A=void 0}=e,{loading_status:b}=e,{autoplay:g=!1}=e,{loop:d=!1}=e,{show_download_button:v}=e,{show_share_button:G=!1}=e,{editable:p=!0}=e,{waveform_options:N={}}=e,{pending:Z}=e,{streaming:X}=e,{stream_every:ie}=e,{input_ready:U}=e,{recording:D=!1}=e,se=!1,z="closed",de;function he(h){z=h,de(h)}const T=()=>z;let{set_time_limit:P}=e,{gradio:y}=e,x=null,re,ne=r;const ae=()=>{ne===null||r===ne||t(0,r=ne)};let ue,k,le="darkorange";et(()=>{le=getComputedStyle(document==null?void 0:document.documentElement).getPropertyValue("--color-accent"),oe(),t(28,k.waveColor=N.waveform_color||"#9ca3af",k),t(28,k.progressColor=N.waveform_progress_color||le,k),t(28,k.mediaControls=N.show_controls,k),t(28,k.sampleRate=N.sample_rate||44100,k)});const q={color:N.trim_region_color,drag:!0,resize:!0};function oe(){document.documentElement.style.setProperty("--trim-region-color",q.color||le)}function De({detail:h}){const[Tt,It]=h.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,b=b||{}),t(1,b.status=It,b),t(1,b.message=h,b),y.dispatch(Tt,h)}Ut(()=>{t(32,i=!1)});const Le=()=>y.dispatch("clear_status",b),Se=h=>y.dispatch("share",h.detail),Ce=h=>y.dispatch("error",h.detail),Ue=()=>y.dispatch("play"),Ae=()=>y.dispatch("pause"),ze=()=>y.dispatch("stop"),Oe=()=>y.dispatch("clear_status",b),Ne=(...h)=>y.client.upload(...h),Ve=(...h)=>y.client.stream(...h);function je(h){D=h,t(2,D)}function He(h){ue=h,t(27,ue)}function qe(h){se=h,t(24,se)}function Fe(h){de=h,t(26,de)}function Je(h){P=h,t(3,P)}const Ge=({detail:h})=>t(0,r=h),Ke=({detail:h})=>{t(0,r=h),y.dispatch("stream",r)},Qe=({detail:h})=>t(27,ue=h),Ye=()=>y.dispatch("edit"),We=()=>y.dispatch("play"),m=()=>y.dispatch("pause"),$=()=>y.dispatch("stop"),me=()=>y.dispatch("start_recording"),ve=()=>y.dispatch("pause_recording"),Be=h=>y.dispatch("stop_recording"),Et=()=>y.dispatch("upload"),Dt=()=>y.dispatch("clear"),Rt=()=>y.dispatch("close_stream","stream");return n.$$set=h=>{"value_is_output"in h&&t(32,i=h.value_is_output),"elem_id"in h&&t(4,o=h.elem_id),"elem_classes"in h&&t(5,s=h.elem_classes),"visible"in h&&t(6,a=h.visible),"interactive"in h&&t(7,u=h.interactive),"value"in h&&t(0,r=h.value),"sources"in h&&t(8,f=h.sources),"label"in h&&t(9,l=h.label),"root"in h&&t(10,_=h.root),"show_label"in h&&t(11,c=h.show_label),"container"in h&&t(12,w=h.container),"scale"in h&&t(13,S=h.scale),"min_width"in h&&t(14,A=h.min_width),"loading_status"in h&&t(1,b=h.loading_status),"autoplay"in h&&t(34,g=h.autoplay),"loop"in h&&t(15,d=h.loop),"show_download_button"in h&&t(16,v=h.show_download_button),"show_share_button"in h&&t(17,G=h.show_share_button),"editable"in h&&t(18,p=h.editable),"waveform_options"in h&&t(19,N=h.waveform_options),"pending"in h&&t(20,Z=h.pending),"streaming"in h&&t(21,X=h.streaming),"stream_every"in h&&t(22,ie=h.stream_every),"input_ready"in h&&t(33,U=h.input_ready),"recording"in h&&t(2,D=h.recording),"set_time_limit"in h&&t(3,P=h.set_time_limit),"gradio"in h&&t(23,y=h.gradio)},n.$$.update=()=>{n.$$.dirty[0]&16777216&&t(33,U=!se),n.$$.dirty[0]&1|n.$$.dirty[1]&128&&r&&ne===null&&t(38,ne=r),n.$$.dirty[0]&8388609|n.$$.dirty[1]&66&&JSON.stringify(r)!==JSON.stringify(x)&&(t(37,x=r),y.dispatch("change"),i||y.dispatch("input")),n.$$.dirty[0]&33554688&&!re&&f&&t(25,re=f[0]),n.$$.dirty[1]&8&&t(28,k={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:g,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20})},[r,b,D,P,o,s,a,u,f,l,_,c,w,S,A,d,v,G,p,N,Z,X,ie,y,se,re,de,ue,k,ae,q,De,i,U,g,he,T,x,ne,Le,Se,Ce,Ue,Ae,ze,Oe,Ne,Ve,je,He,qe,Fe,Je,Ge,Ke,Qe,Ye,We,m,$,me,ve,Be,Et,Dt,Rt]}class Li extends Te{constructor(e){super(),Ie(this,e,Pi,Bi,Re,{value_is_output:32,elem_id:4,elem_classes:5,visible:6,interactive:7,value:0,sources:8,label:9,root:10,show_label:11,container:12,scale:13,min_width:14,loading_status:1,autoplay:34,loop:15,show_download_button:16,show_share_button:17,editable:18,waveform_options:19,pending:20,streaming:21,stream_every:22,input_ready:33,recording:2,modify_stream_state:35,get_stream_state:36,set_time_limit:3,gradio:23},null,[-1,-1,-1])}get value_is_output(){return this.$$.ctx[32]}set value_is_output(e){this.$$set({value_is_output:e}),O()}get elem_id(){return this.$$.ctx[4]}set elem_id(e){this.$$set({elem_id:e}),O()}get elem_classes(){return this.$$.ctx[5]}set elem_classes(e){this.$$set({elem_classes:e}),O()}get visible(){return this.$$.ctx[6]}set visible(e){this.$$set({visible:e}),O()}get interactive(){return this.$$.ctx[7]}set interactive(e){this.$$set({interactive:e}),O()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),O()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),O()}get label(){return this.$$.ctx[9]}set label(e){this.$$set({label:e}),O()}get root(){return this.$$.ctx[10]}set root(e){this.$$set({root:e}),O()}get show_label(){return this.$$.ctx[11]}set show_label(e){this.$$set({show_label:e}),O()}get container(){return this.$$.ctx[12]}set container(e){this.$$set({container:e}),O()}get scale(){return this.$$.ctx[13]}set scale(e){this.$$set({scale:e}),O()}get min_width(){return this.$$.ctx[14]}set min_width(e){this.$$set({min_width:e}),O()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),O()}get autoplay(){return this.$$.ctx[34]}set autoplay(e){this.$$set({autoplay:e}),O()}get loop(){return this.$$.ctx[15]}set loop(e){this.$$set({loop:e}),O()}get show_download_button(){return this.$$.ctx[16]}set show_download_button(e){this.$$set({show_download_button:e}),O()}get show_share_button(){return this.$$.ctx[17]}set show_share_button(e){this.$$set({show_share_button:e}),O()}get editable(){return this.$$.ctx[18]}set editable(e){this.$$set({editable:e}),O()}get waveform_options(){return this.$$.ctx[19]}set waveform_options(e){this.$$set({waveform_options:e}),O()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),O()}get streaming(){return this.$$.ctx[21]}set streaming(e){this.$$set({streaming:e}),O()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),O()}get input_ready(){return this.$$.ctx[33]}set input_ready(e){this.$$set({input_ready:e}),O()}get recording(){return this.$$.ctx[2]}set recording(e){this.$$set({recording:e}),O()}get modify_stream_state(){return this.$$.ctx[35]}get get_stream_state(){return this.$$.ctx[36]}get set_time_limit(){return this.$$.ctx[3]}set set_time_limit(e){this.$$set({set_time_limit:e}),O()}get gradio(){return this.$$.ctx[23]}set gradio(e){this.$$set({gradio:e}),O()}}const Qi=Li;export{Xi as BaseExample,Ri as BaseInteractiveAudio,Nt as BasePlayer,Vt as BaseStaticAudio,Qi as default};
