{"version":3,"file":"file-url-D-K40zdU.js","sources":["../../../../../../js/app/.svelte-kit/adapter-node/chunks/file-url.js"],"sourcesContent":["import { w as getContext } from \"./ssr.js\";\nconst WORKER_PROXY_CONTEXT_KEY = \"WORKER_PROXY_CONTEXT_KEY\";\nfunction getWorkerProxyContext() {\n  return getContext(WORKER_PROXY_CONTEXT_KEY);\n}\nconst FAKE_LITE_HOST = \"lite.local\";\nfunction is_self_host(url) {\n  return url.host === window.location.host || url.host === \"localhost:7860\" || url.host === \"127.0.0.1:7860\" || // Ref: https://github.com/gradio-app/gradio/blob/v3.32.0/js/app/src/Index.svelte#L194\n  url.host === FAKE_LITE_HOST;\n}\nfunction getHeaderValue(headers, key) {\n  const unifiedKey = key.toLowerCase();\n  for (const [k, v] of Object.entries(headers)) {\n    if (k.toLowerCase() === unifiedKey) {\n      return v;\n    }\n  }\n}\nfunction should_proxy_wasm_src(src) {\n  const is_browser = typeof window !== \"undefined\";\n  if (src == null || !is_browser) {\n    return false;\n  }\n  const url = new URL(src, window.location.href);\n  if (!is_self_host(url)) {\n    return false;\n  }\n  if (url.protocol !== \"http:\" && url.protocol !== \"https:\") {\n    return false;\n  }\n  return true;\n}\nlet maybeWorkerProxy;\nasync function resolve_wasm_src(src) {\n  const is_browser = typeof window !== \"undefined\";\n  if (src == null || !is_browser || !should_proxy_wasm_src(src)) {\n    return src;\n  }\n  if (maybeWorkerProxy == null) {\n    try {\n      maybeWorkerProxy = getWorkerProxyContext();\n    } catch (e) {\n      return src;\n    }\n  }\n  if (maybeWorkerProxy == null) {\n    return src;\n  }\n  const url = new URL(src, window.location.href);\n  const path = url.pathname;\n  return maybeWorkerProxy.httpRequest({\n    method: \"GET\",\n    path,\n    headers: {},\n    query_string: \"\"\n  }).then((response) => {\n    if (response.status !== 200) {\n      throw new Error(`Failed to get file ${path} from the Wasm worker.`);\n    }\n    const blob = new Blob([response.body], {\n      type: getHeaderValue(response.headers, \"content-type\")\n    });\n    const blobUrl = URL.createObjectURL(blob);\n    return blobUrl;\n  });\n}\nexport {\n  getWorkerProxyContext as g,\n  resolve_wasm_src as r,\n  should_proxy_wasm_src as s\n};\n"],"names":[],"mappings":"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"}