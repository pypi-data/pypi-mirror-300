// vite.config.ts
import { sveltekit } from "file:///Users/aliabdalla/Documents/dev/gradio/node_modules/.pnpm/@sveltejs+kit@2.5.20_@sveltejs+vite-plugin-svelte@3.1.0_svelte@4.2.15_vite@5.2.11_@types+node_o7pp2p5svq4h5udxa4yf4mjnc4/node_modules/@sveltejs/kit/src/exports/vite/index.js";
import { defineConfig } from "file:///Users/aliabdalla/Documents/dev/gradio/node_modules/.pnpm/vite@5.2.11_@types+node@20.12.8_lightningcss@1.24.1_sass@1.66.1_stylus@0.63.0_sugarss@4.0.1_postcss@8.4.38_/node_modules/vite/dist/node/index.js";

// ../build/out/index.js
import { parse } from "file:///Users/aliabdalla/Documents/dev/gradio/node_modules/.pnpm/node-html-parser@6.1.13/node_modules/node-html-parser/dist/index.js";
import { join } from "path";
import * as url from "url";
import { readdirSync, existsSync, readFileSync, statSync } from "fs";
var __vite_injected_original_import_meta_url =
	"file:///Users/aliabdalla/Documents/dev/gradio/js/build/out/index.js";
var __filename = url.fileURLToPath(__vite_injected_original_import_meta_url);
var __dirname = url.fileURLToPath(
	new URL(".", __vite_injected_original_import_meta_url)
);
function get_export_path(path, root, pkg_json) {
	if (!pkg_json.exports) return false;
	if (typeof pkg_json.exports[`${path}`] === "object") return true;
	const _path = join(root, "..", `${pkg_json.exports[`${path}`]}`);
	return existsSync(_path);
}
var ignore_list = [
	"tootils",
	"_cdn-test",
	"_spaces-test",
	"_website",
	"app",
	"atoms",
	"fallback",
	"icons",
	"lite",
	"preview",
	"simpledropdown",
	"simpleimage",
	"simpletextbox",
	"storybook",
	"theme",
	"timeseries",
	"tooltip",
	"upload",
	"utils",
	"wasm"
];
function generate_component_imports() {
	const exports = readdirSync(join(__dirname, "..", ".."))
		.map((dir) => {
			if (ignore_list.includes(dir)) return void 0;
			if (!statSync(join(__dirname, "..", "..", dir)).isDirectory())
				return void 0;
			const package_json_path = join(
				__dirname,
				"..",
				"..",
				dir,
				"package.json"
			);
			if (existsSync(package_json_path)) {
				const package_json = JSON.parse(
					readFileSync(package_json_path, "utf8")
				);
				const component = get_export_path(".", package_json_path, package_json);
				const example = get_export_path(
					"./example",
					package_json_path,
					package_json
				);
				const base = get_export_path("./base", package_json_path, package_json);
				if (!component && !example) return void 0;
				return {
					name: package_json.name,
					component,
					example,
					base
				};
			}
			return void 0;
		})
		.filter((x) => x !== void 0);
	const imports = exports.reduce((acc, _export) => {
		if (!_export) return acc;
		const example = _export.example
			? `example: () => import("${_export.name}/example"),
`
			: "";
		const base = _export.base
			? `base: () => import("${_export.name}/base"),
`
			: "";
		return `${acc}"${_export.name.replace("@gradio/", "")}": {
			${base}
			${example}
			component: () => import("${_export.name}")
			},
`;
	}, "");
	return imports;
}
function load_virtual_component_loader(mode) {
	const loader_path = join(__dirname, "component_loader.js");
	let component_map = "";
	if (mode === "test") {
		component_map = `
		const component_map = {
			"test-component-one": {
				component: () => import("@gradio-test/test-one"),
				example: () => import("@gradio-test/test-one/example")
			},
			"dataset": {
				component: () => import("@gradio-test/test-two"),
				example: () => import("@gradio-test/test-two/example")
			},
			"image": {
				component: () => import("@gradio/image"),
				example: () => import("@gradio/image/example"),
				base: () => import("@gradio/image/base")
			},
			"audio": {
				component: () => import("@gradio/audio"),
				example: () => import("@gradio/audio/example"),
				base: () => import("@gradio/audio/base")
			},
			"video": {
				component: () => import("@gradio/video"),
				example: () => import("@gradio/video/example"),
				base: () => import("@gradio/video/base")
			},
			// "test-component-one": {
			// 	component: () => import("@gradio-test/test-one"),
			// 	example: () => import("@gradio-test/test-one/example")
			// },
		};
		`;
	} else {
		component_map = `
		const component_map = {
			${generate_component_imports()}
		};
		`;
	}
	return `${component_map}

${readFileSync(loader_path, "utf8")}`;
}
function inject_component_loader({ mode }) {
	const v_id = "virtual:component-loader";
	const resolved_v_id = "\0" + v_id;
	return {
		name: "inject-component-loader",
		enforce: "pre",
		resolveId(id) {
			if (id === v_id) return resolved_v_id;
		},
		load(id) {
			this.addWatchFile(join(__dirname, "component_loader.js"));
			if (id === resolved_v_id) {
				return load_virtual_component_loader(mode);
			}
		}
	};
}

// vite.config.ts
var vite_config_default = defineConfig(({ mode }) => ({
	plugins: [sveltekit(), inject_component_loader({ mode })],
	resolve: {
		conditions: ["gradio"]
	}
}));
export { vite_config_default as default };
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAiLi4vYnVpbGQvb3V0L2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL1VzZXJzL2FsaWFiZGFsbGEvRG9jdW1lbnRzL2Rldi9ncmFkaW8vanMvX3dlYnNpdGVcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9Vc2Vycy9hbGlhYmRhbGxhL0RvY3VtZW50cy9kZXYvZ3JhZGlvL2pzL193ZWJzaXRlL3ZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9Vc2Vycy9hbGlhYmRhbGxhL0RvY3VtZW50cy9kZXYvZ3JhZGlvL2pzL193ZWJzaXRlL3ZpdGUuY29uZmlnLnRzXCI7aW1wb3J0IHsgc3ZlbHRla2l0IH0gZnJvbSBcIkBzdmVsdGVqcy9raXQvdml0ZVwiO1xuaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSBcInZpdGVcIjtcbmltcG9ydCB7IGluamVjdF9jb21wb25lbnRfbG9hZGVyIH0gZnJvbSBcIi4uL2J1aWxkL291dC9pbmRleC5qc1wiO1xuXG4vL0B0cy1pZ25vcmVcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZygoeyBtb2RlIH0pID0+ICh7XG5cdHBsdWdpbnM6IFtzdmVsdGVraXQoKSwgaW5qZWN0X2NvbXBvbmVudF9sb2FkZXIoeyBtb2RlIH0pXSxcblx0cmVzb2x2ZToge1xuXHRcdGNvbmRpdGlvbnM6IFtcImdyYWRpb1wiXVxuXHR9XG59KSk7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9Vc2Vycy9hbGlhYmRhbGxhL0RvY3VtZW50cy9kZXYvZ3JhZGlvL2pzL2J1aWxkL291dFwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL1VzZXJzL2FsaWFiZGFsbGEvRG9jdW1lbnRzL2Rldi9ncmFkaW8vanMvYnVpbGQvb3V0L2luZGV4LmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9Vc2Vycy9hbGlhYmRhbGxhL0RvY3VtZW50cy9kZXYvZ3JhZGlvL2pzL2J1aWxkL291dC9pbmRleC5qc1wiOy8vIHNyYy9pbmRleC50c1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tIFwibm9kZS1odG1sLXBhcnNlclwiO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgKiBhcyB1cmwgZnJvbSBcInVybFwiO1xuaW1wb3J0IHsgcmVhZGRpclN5bmMsIGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgc3RhdFN5bmMgfSBmcm9tIFwiZnNcIjtcbmZ1bmN0aW9uIGluamVjdF9lanMoKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJpbmplY3QtZWpzXCIsXG4gICAgZW5mb3JjZTogXCJwb3N0XCIsXG4gICAgdHJhbnNmb3JtSW5kZXhIdG1sOiAoaHRtbCkgPT4ge1xuICAgICAgY29uc3QgcmVwbGFjZV9ncmFkaW9faW5mb19pbmZvX2h0bWwgPSBodG1sLnJlcGxhY2UoXG4gICAgICAgIC8lZ3JhZGlvX2FwaV9pbmZvJS8sXG4gICAgICAgIGA8c2NyaXB0PndpbmRvdy5ncmFkaW9fYXBpX2luZm8gPSB7eyBncmFkaW9fYXBpX2luZm8gfCB0b29yanNvbiB9fTs8L3NjcmlwdD5gXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcGxhY2VfZ3JhZGlvX2luZm9faW5mb19odG1sLnJlcGxhY2UoXG4gICAgICAgIC8lZ3JhZGlvX2NvbmZpZyUvLFxuICAgICAgICBgPHNjcmlwdD53aW5kb3cuZ3JhZGlvX2NvbmZpZyA9IHt7IGNvbmZpZyB8IHRvb3Jqc29uIH19Ozwvc2NyaXB0PmBcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVfY2RuX2VudHJ5KHtcbiAgdmVyc2lvbixcbiAgY2RuX2Jhc2Vcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcImdlbmVyYXRlLWNkbi1lbnRyeVwiLFxuICAgIGVuZm9yY2U6IFwicG9zdFwiLFxuICAgIHdyaXRlQnVuZGxlKGNvbmZpZywgYnVuZGxlKSB7XG4gICAgICBpZiAoIWNvbmZpZy5kaXIgfHwgIWJ1bmRsZVtcImluZGV4Lmh0bWxcIl0gfHwgYnVuZGxlW1wiaW5kZXguaHRtbFwiXS50eXBlICE9PSBcImFzc2V0XCIpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGJ1bmRsZVtcImluZGV4Lmh0bWxcIl0uc291cmNlO1xuICAgICAgY29uc3QgdHJlZSA9IHBhcnNlKHNvdXJjZSk7XG4gICAgICBjb25zdCBzY3JpcHQgPSBBcnJheS5mcm9tKFxuICAgICAgICB0cmVlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRbdHlwZT1tb2R1bGVdXCIpXG4gICAgICApLmZpbmQoKG5vZGUpID0+IG5vZGUuYXR0cmlidXRlcy5zcmM/LmluY2x1ZGVzKFwiYXNzZXRzXCIpKTtcbiAgICAgIGNvbnN0IG91dHB1dF9sb2NhdGlvbiA9IGpvaW4oY29uZmlnLmRpciwgXCJncmFkaW8uanNcIik7XG4gICAgICB3cml0ZUZpbGVTeW5jKG91dHB1dF9sb2NhdGlvbiwgbWFrZV9lbnRyeShzY3JpcHQ/LmF0dHJpYnV0ZXMuc3JjIHx8IFwiXCIpKTtcbiAgICAgIGlmICghc2NyaXB0KSByZXR1cm47XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZF9odG1sID0gYnVuZGxlW1wiaW5kZXguaHRtbFwiXS5zb3VyY2Uuc3Vic3RyaW5nKDAsIHNjcmlwdD8ucmFuZ2VbMF0pICsgYDxzY3JpcHQgdHlwZT1cIm1vZHVsZVwiIGNyb3Nzb3JpZ2luIHNyYz1cIiR7Y2RuX2Jhc2V9LyR7dmVyc2lvbn0vZ3JhZGlvLmpzXCI+PC9zY3JpcHQ+YCArIGJ1bmRsZVtcImluZGV4Lmh0bWxcIl0uc291cmNlLnN1YnN0cmluZyhcbiAgICAgICAgc2NyaXB0Py5yYW5nZVsxXSxcbiAgICAgICAgc291cmNlLmxlbmd0aFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHNoYXJlX2h0bWxfbG9jYXRpb24gPSBqb2luKGNvbmZpZy5kaXIsIFwic2hhcmUuaHRtbFwiKTtcbiAgICAgIHdyaXRlRmlsZVN5bmMoc2hhcmVfaHRtbF9sb2NhdGlvbiwgdHJhbnNmb3JtZWRfaHRtbCk7XG4gICAgfVxuICB9O1xufVxudmFyIFJFX1NWRUxURV9JTVBPUlQgPSAvaW1wb3J0XFxzKyhbXFx3Knt9LFxcc10rKVxccytmcm9tXFxzK1snXCJdKHN2ZWx0ZXxzdmVsdGVcXC9pbnRlcm5hbClbJ1wiXS9nO1xuZnVuY3Rpb24gZ2VuZXJhdGVfZGV2X2VudHJ5KHsgZW5hYmxlIH0pIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcImdlbmVyYXRlLWRldi1lbnRyeVwiLFxuICAgIHRyYW5zZm9ybShjb2RlLCBpZCkge1xuICAgICAgaWYgKCFlbmFibGUpIHJldHVybjtcbiAgICAgIGNvbnN0IG5ld19jb2RlID0gY29kZS5yZXBsYWNlKFJFX1NWRUxURV9JTVBPUlQsIChzdHIsICQxLCAkMikgPT4ge1xuICAgICAgICByZXR1cm4gYGNvbnN0ICR7JDEucmVwbGFjZSgvXFwqIGFzIC8sIFwiXCIpLnJlcGxhY2UoLyBhcyAvZywgXCI6IFwiKX0gPSB3aW5kb3cuX19ncmFkaW9fX3N2ZWx0ZV9faW50ZXJuYWw7YDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29kZTogbmV3X2NvZGUsXG4gICAgICAgIG1hcDogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBtYWtlX2VudHJ5KHNjcmlwdCkge1xuICByZXR1cm4gYGltcG9ydChcIiR7c2NyaXB0fVwiKTtcbmA7XG59XG5mdW5jdGlvbiBoYW5kbGVfY2VfY3NzKCkge1xuICByZXR1cm4ge1xuICAgIGVuZm9yY2U6IFwicG9zdFwiLFxuICAgIG5hbWU6IFwiY3VzdG9tLWVsZW1lbnQtY3NzXCIsXG4gICAgd3JpdGVCdW5kbGUoY29uZmlnLCBidW5kbGUpIHtcbiAgICAgIGxldCBmaWxlX3RvX2luc2VydCA9IHtcbiAgICAgICAgZmlsZW5hbWU6IFwiXCIsXG4gICAgICAgIHNvdXJjZTogXCJcIlxuICAgICAgfTtcbiAgICAgIGlmICghY29uZmlnLmRpciB8fCAhYnVuZGxlW1wiaW5kZXguaHRtbFwiXSB8fCBidW5kbGVbXCJpbmRleC5odG1sXCJdLnR5cGUgIT09IFwiYXNzZXRcIilcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gYnVuZGxlKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gYnVuZGxlW2tleV07XG4gICAgICAgIGlmIChjaHVuay50eXBlID09PSBcImNodW5rXCIpIHtcbiAgICAgICAgICBjb25zdCBfY2h1bmsgPSBjaHVuaztcbiAgICAgICAgICBjb25zdCBmb3VuZCA9IF9jaHVuay5jb2RlPy5pbmRleE9mKFwiRU5UUllfQ1NTXCIpO1xuICAgICAgICAgIGlmIChmb3VuZCA+IC0xKVxuICAgICAgICAgICAgZmlsZV90b19pbnNlcnQgPSB7XG4gICAgICAgICAgICAgIGZpbGVuYW1lOiBqb2luKGNvbmZpZy5kaXIsIGtleSksXG4gICAgICAgICAgICAgIHNvdXJjZTogX2NodW5rLmNvZGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHRyZWUgPSBwYXJzZShidW5kbGVbXCJpbmRleC5odG1sXCJdLnNvdXJjZSk7XG4gICAgICBjb25zdCB7IHN0eWxlLCBmb250cyB9ID0gQXJyYXkuZnJvbShcbiAgICAgICAgdHJlZS5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9c3R5bGVzaGVldF1cIilcbiAgICAgICkucmVkdWNlKFxuICAgICAgICAoYWNjLCBuZXh0KSA9PiB7XG4gICAgICAgICAgaWYgKC8uKlxcL2luZGV4KC4qPylcXC5jc3MvLnRlc3QobmV4dC5hdHRyaWJ1dGVzLmhyZWYpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5hY2MsIHN0eWxlOiBuZXh0IH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IC4uLmFjYywgZm9udHM6IFsuLi5hY2MuZm9udHMsIG5leHQuYXR0cmlidXRlcy5ocmVmXSB9O1xuICAgICAgICB9LFxuICAgICAgICB7IGZvbnRzOiBbXSwgc3R5bGU6IHZvaWQgMCB9XG4gICAgICApO1xuICAgICAgd3JpdGVGaWxlU3luYyhcbiAgICAgICAgZmlsZV90b19pbnNlcnQuZmlsZW5hbWUsXG4gICAgICAgIGZpbGVfdG9faW5zZXJ0LnNvdXJjZS5yZXBsYWNlKFwiX19FTlRSWV9DU1NfX1wiLCBzdHlsZS5hdHRyaWJ1dGVzLmhyZWYpLnJlcGxhY2UoXG4gICAgICAgICAgJ1wiX19GT05UU19DU1NfX1wiJyxcbiAgICAgICAgICBgWyR7Zm9udHMubWFwKChmKSA9PiBgXCIke2Z9XCJgKS5qb2luKFwiLFwiKX1dYFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc3Qgc2hhcmVfaHRtbF9sb2NhdGlvbiA9IGpvaW4oY29uZmlnLmRpciwgXCJzaGFyZS5odG1sXCIpO1xuICAgICAgY29uc3Qgc2hhcmVfaHRtbCA9IHJlYWRGaWxlU3luYyhzaGFyZV9odG1sX2xvY2F0aW9uLCBcInV0ZjhcIik7XG4gICAgICBjb25zdCBzaGFyZV90cmVlID0gcGFyc2Uoc2hhcmVfaHRtbCk7XG4gICAgICBjb25zdCBub2RlID0gQXJyYXkuZnJvbShcbiAgICAgICAgc2hhcmVfdHJlZS5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9c3R5bGVzaGVldF1cIilcbiAgICAgICkuZmluZCgobm9kZTIpID0+IC8uKlxcL2luZGV4KC4qPylcXC5jc3MvLnRlc3Qobm9kZTIuYXR0cmlidXRlcy5ocmVmKSk7XG4gICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkX2h0bWwgPSBzaGFyZV9odG1sLnN1YnN0cmluZygwLCBub2RlLnJhbmdlWzBdKSArIHNoYXJlX2h0bWwuc3Vic3RyaW5nKG5vZGUucmFuZ2VbMV0sIHNoYXJlX2h0bWwubGVuZ3RoKTtcbiAgICAgIHdyaXRlRmlsZVN5bmMoc2hhcmVfaHRtbF9sb2NhdGlvbiwgdHJhbnNmb3JtZWRfaHRtbCk7XG4gICAgfVxuICB9O1xufVxudmFyIF9fZmlsZW5hbWUgPSB1cmwuZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fZGlybmFtZSA9IHVybC5maWxlVVJMVG9QYXRoKG5ldyBVUkwoXCIuXCIsIGltcG9ydC5tZXRhLnVybCkpO1xuZnVuY3Rpb24gZ2V0X2V4cG9ydF9wYXRoKHBhdGgsIHJvb3QsIHBrZ19qc29uKSB7XG4gIGlmICghcGtnX2pzb24uZXhwb3J0cykgcmV0dXJuIGZhbHNlO1xuICBpZiAodHlwZW9mIHBrZ19qc29uLmV4cG9ydHNbYCR7cGF0aH1gXSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIHRydWU7XG4gIGNvbnN0IF9wYXRoID0gam9pbihyb290LCBcIi4uXCIsIGAke3BrZ19qc29uLmV4cG9ydHNbYCR7cGF0aH1gXX1gKTtcbiAgcmV0dXJuIGV4aXN0c1N5bmMoX3BhdGgpO1xufVxudmFyIGlnbm9yZV9saXN0ID0gW1xuICBcInRvb3RpbHNcIixcbiAgXCJfY2RuLXRlc3RcIixcbiAgXCJfc3BhY2VzLXRlc3RcIixcbiAgXCJfd2Vic2l0ZVwiLFxuICBcImFwcFwiLFxuICBcImF0b21zXCIsXG4gIFwiZmFsbGJhY2tcIixcbiAgXCJpY29uc1wiLFxuICBcImxpdGVcIixcbiAgXCJwcmV2aWV3XCIsXG4gIFwic2ltcGxlZHJvcGRvd25cIixcbiAgXCJzaW1wbGVpbWFnZVwiLFxuICBcInNpbXBsZXRleHRib3hcIixcbiAgXCJzdG9yeWJvb2tcIixcbiAgXCJ0aGVtZVwiLFxuICBcInRpbWVzZXJpZXNcIixcbiAgXCJ0b29sdGlwXCIsXG4gIFwidXBsb2FkXCIsXG4gIFwidXRpbHNcIixcbiAgXCJ3YXNtXCJcbl07XG5mdW5jdGlvbiBnZW5lcmF0ZV9jb21wb25lbnRfaW1wb3J0cygpIHtcbiAgY29uc3QgZXhwb3J0cyA9IHJlYWRkaXJTeW5jKGpvaW4oX19kaXJuYW1lLCBcIi4uXCIsIFwiLi5cIikpLm1hcCgoZGlyKSA9PiB7XG4gICAgaWYgKGlnbm9yZV9saXN0LmluY2x1ZGVzKGRpcikpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKCFzdGF0U3luYyhqb2luKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIsIGRpcikpLmlzRGlyZWN0b3J5KCkpIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3QgcGFja2FnZV9qc29uX3BhdGggPSBqb2luKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIsIGRpciwgXCJwYWNrYWdlLmpzb25cIik7XG4gICAgaWYgKGV4aXN0c1N5bmMocGFja2FnZV9qc29uX3BhdGgpKSB7XG4gICAgICBjb25zdCBwYWNrYWdlX2pzb24gPSBKU09OLnBhcnNlKFxuICAgICAgICByZWFkRmlsZVN5bmMocGFja2FnZV9qc29uX3BhdGgsIFwidXRmOFwiKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9leHBvcnRfcGF0aChcIi5cIiwgcGFja2FnZV9qc29uX3BhdGgsIHBhY2thZ2VfanNvbik7XG4gICAgICBjb25zdCBleGFtcGxlID0gZ2V0X2V4cG9ydF9wYXRoKFxuICAgICAgICBcIi4vZXhhbXBsZVwiLFxuICAgICAgICBwYWNrYWdlX2pzb25fcGF0aCxcbiAgICAgICAgcGFja2FnZV9qc29uXG4gICAgICApO1xuICAgICAgY29uc3QgYmFzZSA9IGdldF9leHBvcnRfcGF0aChcIi4vYmFzZVwiLCBwYWNrYWdlX2pzb25fcGF0aCwgcGFja2FnZV9qc29uKTtcbiAgICAgIGlmICghY29tcG9uZW50ICYmICFleGFtcGxlKSByZXR1cm4gdm9pZCAwO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcGFja2FnZV9qc29uLm5hbWUsXG4gICAgICAgIGNvbXBvbmVudCxcbiAgICAgICAgZXhhbXBsZSxcbiAgICAgICAgYmFzZVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSkuZmlsdGVyKCh4KSA9PiB4ICE9PSB2b2lkIDApO1xuICBjb25zdCBpbXBvcnRzID0gZXhwb3J0cy5yZWR1Y2UoKGFjYywgX2V4cG9ydCkgPT4ge1xuICAgIGlmICghX2V4cG9ydCkgcmV0dXJuIGFjYztcbiAgICBjb25zdCBleGFtcGxlID0gX2V4cG9ydC5leGFtcGxlID8gYGV4YW1wbGU6ICgpID0+IGltcG9ydChcIiR7X2V4cG9ydC5uYW1lfS9leGFtcGxlXCIpLFxuYCA6IFwiXCI7XG4gICAgY29uc3QgYmFzZSA9IF9leHBvcnQuYmFzZSA/IGBiYXNlOiAoKSA9PiBpbXBvcnQoXCIke19leHBvcnQubmFtZX0vYmFzZVwiKSxcbmAgOiBcIlwiO1xuICAgIHJldHVybiBgJHthY2N9XCIke19leHBvcnQubmFtZS5yZXBsYWNlKFwiQGdyYWRpby9cIiwgXCJcIil9XCI6IHtcblx0XHRcdCR7YmFzZX1cblx0XHRcdCR7ZXhhbXBsZX1cblx0XHRcdGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KFwiJHtfZXhwb3J0Lm5hbWV9XCIpXG5cdFx0XHR9LFxuYDtcbiAgfSwgXCJcIik7XG4gIHJldHVybiBpbXBvcnRzO1xufVxuZnVuY3Rpb24gbG9hZF92aXJ0dWFsX2NvbXBvbmVudF9sb2FkZXIobW9kZSkge1xuICBjb25zdCBsb2FkZXJfcGF0aCA9IGpvaW4oX19kaXJuYW1lLCBcImNvbXBvbmVudF9sb2FkZXIuanNcIik7XG4gIGxldCBjb21wb25lbnRfbWFwID0gXCJcIjtcbiAgaWYgKG1vZGUgPT09IFwidGVzdFwiKSB7XG4gICAgY29tcG9uZW50X21hcCA9IGBcblx0XHRjb25zdCBjb21wb25lbnRfbWFwID0ge1xuXHRcdFx0XCJ0ZXN0LWNvbXBvbmVudC1vbmVcIjoge1xuXHRcdFx0XHRjb21wb25lbnQ6ICgpID0+IGltcG9ydChcIkBncmFkaW8tdGVzdC90ZXN0LW9uZVwiKSxcblx0XHRcdFx0ZXhhbXBsZTogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby10ZXN0L3Rlc3Qtb25lL2V4YW1wbGVcIilcblx0XHRcdH0sXG5cdFx0XHRcImRhdGFzZXRcIjoge1xuXHRcdFx0XHRjb21wb25lbnQ6ICgpID0+IGltcG9ydChcIkBncmFkaW8tdGVzdC90ZXN0LXR3b1wiKSxcblx0XHRcdFx0ZXhhbXBsZTogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby10ZXN0L3Rlc3QtdHdvL2V4YW1wbGVcIilcblx0XHRcdH0sXG5cdFx0XHRcImltYWdlXCI6IHtcblx0XHRcdFx0Y29tcG9uZW50OiAoKSA9PiBpbXBvcnQoXCJAZ3JhZGlvL2ltYWdlXCIpLFxuXHRcdFx0XHRleGFtcGxlOiAoKSA9PiBpbXBvcnQoXCJAZ3JhZGlvL2ltYWdlL2V4YW1wbGVcIiksXG5cdFx0XHRcdGJhc2U6ICgpID0+IGltcG9ydChcIkBncmFkaW8vaW1hZ2UvYmFzZVwiKVxuXHRcdFx0fSxcblx0XHRcdFwiYXVkaW9cIjoge1xuXHRcdFx0XHRjb21wb25lbnQ6ICgpID0+IGltcG9ydChcIkBncmFkaW8vYXVkaW9cIiksXG5cdFx0XHRcdGV4YW1wbGU6ICgpID0+IGltcG9ydChcIkBncmFkaW8vYXVkaW8vZXhhbXBsZVwiKSxcblx0XHRcdFx0YmFzZTogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby9hdWRpby9iYXNlXCIpXG5cdFx0XHR9LFxuXHRcdFx0XCJ2aWRlb1wiOiB7XG5cdFx0XHRcdGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby92aWRlb1wiKSxcblx0XHRcdFx0ZXhhbXBsZTogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby92aWRlby9leGFtcGxlXCIpLFxuXHRcdFx0XHRiYXNlOiAoKSA9PiBpbXBvcnQoXCJAZ3JhZGlvL3ZpZGVvL2Jhc2VcIilcblx0XHRcdH0sXG5cdFx0XHQvLyBcInRlc3QtY29tcG9uZW50LW9uZVwiOiB7XG5cdFx0XHQvLyBcdGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KFwiQGdyYWRpby10ZXN0L3Rlc3Qtb25lXCIpLFxuXHRcdFx0Ly8gXHRleGFtcGxlOiAoKSA9PiBpbXBvcnQoXCJAZ3JhZGlvLXRlc3QvdGVzdC1vbmUvZXhhbXBsZVwiKVxuXHRcdFx0Ly8gfSxcblx0XHR9O1xuXHRcdGA7XG4gIH0gZWxzZSB7XG4gICAgY29tcG9uZW50X21hcCA9IGBcblx0XHRjb25zdCBjb21wb25lbnRfbWFwID0ge1xuXHRcdFx0JHtnZW5lcmF0ZV9jb21wb25lbnRfaW1wb3J0cygpfVxuXHRcdH07XG5cdFx0YDtcbiAgfVxuICByZXR1cm4gYCR7Y29tcG9uZW50X21hcH1cblxuJHtyZWFkRmlsZVN5bmMobG9hZGVyX3BhdGgsIFwidXRmOFwiKX1gO1xufVxuZnVuY3Rpb24gaW5qZWN0X2NvbXBvbmVudF9sb2FkZXIoeyBtb2RlIH0pIHtcbiAgY29uc3Qgdl9pZCA9IFwidmlydHVhbDpjb21wb25lbnQtbG9hZGVyXCI7XG4gIGNvbnN0IHJlc29sdmVkX3ZfaWQgPSBcIlxcMFwiICsgdl9pZDtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcImluamVjdC1jb21wb25lbnQtbG9hZGVyXCIsXG4gICAgZW5mb3JjZTogXCJwcmVcIixcbiAgICByZXNvbHZlSWQoaWQpIHtcbiAgICAgIGlmIChpZCA9PT0gdl9pZCkgcmV0dXJuIHJlc29sdmVkX3ZfaWQ7XG4gICAgfSxcbiAgICBsb2FkKGlkKSB7XG4gICAgICB0aGlzLmFkZFdhdGNoRmlsZShqb2luKF9fZGlybmFtZSwgXCJjb21wb25lbnRfbG9hZGVyLmpzXCIpKTtcbiAgICAgIGlmIChpZCA9PT0gcmVzb2x2ZWRfdl9pZCkge1xuICAgICAgICByZXR1cm4gbG9hZF92aXJ0dWFsX2NvbXBvbmVudF9sb2FkZXIobW9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZV9zdmVsdGUoZW5hYmxlKSB7XG4gIHJldHVybiB7XG4gICAgZW5mb3JjZTogXCJwcmVcIixcbiAgICBuYW1lOiBcInJlc29sdmUtc3ZlbHRlXCIsXG4gICAgYXN5bmMgcmVzb2x2ZUlkKGlkKSB7XG4gICAgICBpZiAoIWVuYWJsZSkgcmV0dXJuO1xuICAgICAgaWYgKGlkID09PSBcIi4vc3ZlbHRlL3N2ZWx0ZS5qc1wiIHx8IGlkID09PSBcInN2ZWx0ZVwiIHx8IGlkID09PSBcInN2ZWx0ZS9pbnRlcm5hbFwiKSB7XG4gICAgICAgIGNvbnN0IG1vZCA9IGpvaW4oXG4gICAgICAgICAgX19kaXJuYW1lLFxuICAgICAgICAgIFwiLi5cIixcbiAgICAgICAgICBcIi4uXCIsXG4gICAgICAgICAgXCIuLlwiLFxuICAgICAgICAgIFwiZ3JhZGlvXCIsXG4gICAgICAgICAgXCJ0ZW1wbGF0ZXNcIixcbiAgICAgICAgICBcImZyb250ZW5kXCIsXG4gICAgICAgICAgXCJhc3NldHNcIixcbiAgICAgICAgICBcInN2ZWx0ZVwiLFxuICAgICAgICAgIFwic3ZlbHRlLmpzXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IG1vZCwgZXh0ZXJuYWw6IFwiYWJzb2x1dGVcIiB9O1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG1vY2tfbW9kdWxlcygpIHtcbiAgY29uc3Qgdl9pZF8xID0gXCJAZ3JhZGlvLXRlc3QvdGVzdC1vbmVcIjtcbiAgY29uc3Qgdl9pZF8yID0gXCJAZ3JhZGlvLXRlc3QvdGVzdC10d29cIjtcbiAgY29uc3Qgdl9pZF8xX2V4YW1wbGUgPSBcIkBncmFkaW8tdGVzdC90ZXN0LW9uZS9leGFtcGxlXCI7XG4gIGNvbnN0IHZfaWRfMl9leGFtcGxlID0gXCJAZ3JhZGlvLXRlc3QvdGVzdC10d28vZXhhbXBsZVwiO1xuICBjb25zdCByZXNvbHZlZF92X2lkID0gXCJcXDBcIiArIHZfaWRfMTtcbiAgY29uc3QgcmVzb2x2ZWRfdl9pZF8yID0gXCJcXDBcIiArIHZfaWRfMjtcbiAgY29uc3QgcmVzb2x2ZWRfdl9pZF8xX2V4YW1wbGUgPSBcIlxcMFwiICsgdl9pZF8xX2V4YW1wbGU7XG4gIGNvbnN0IHJlc29sdmVkX3ZfaWRfMl9leGFtcGxlID0gXCJcXDBcIiArIHZfaWRfMl9leGFtcGxlO1xuICBjb25zdCBmYWxsYmFja19leGFtcGxlID0gXCJAZ3JhZGlvL2ZhbGxiYWNrL2V4YW1wbGVcIjtcbiAgY29uc3QgcmVzb2x2ZWRfZmFsbGJhY2tfZXhhbXBsZSA9IFwiXFwwXCIgKyBmYWxsYmFja19leGFtcGxlO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IFwibW9jay1tb2R1bGVzXCIsXG4gICAgZW5mb3JjZTogXCJwcmVcIixcbiAgICByZXNvbHZlSWQoaWQpIHtcbiAgICAgIGlmIChpZCA9PT0gdl9pZF8xKSByZXR1cm4gcmVzb2x2ZWRfdl9pZDtcbiAgICAgIGlmIChpZCA9PT0gdl9pZF8yKSByZXR1cm4gcmVzb2x2ZWRfdl9pZF8yO1xuICAgICAgaWYgKGlkID09PSB2X2lkXzFfZXhhbXBsZSkgcmV0dXJuIHJlc29sdmVkX3ZfaWRfMV9leGFtcGxlO1xuICAgICAgaWYgKGlkID09PSB2X2lkXzJfZXhhbXBsZSkgcmV0dXJuIHJlc29sdmVkX3ZfaWRfMl9leGFtcGxlO1xuICAgICAgaWYgKGlkID09PSBmYWxsYmFja19leGFtcGxlKSByZXR1cm4gcmVzb2x2ZWRfZmFsbGJhY2tfZXhhbXBsZTtcbiAgICB9LFxuICAgIGxvYWQoaWQpIHtcbiAgICAgIGlmIChpZCA9PT0gcmVzb2x2ZWRfdl9pZCB8fCBpZCA9PT0gcmVzb2x2ZWRfdl9pZF8yIHx8IGlkID09PSByZXNvbHZlZF92X2lkXzFfZXhhbXBsZSB8fCBpZCA9PT0gcmVzb2x2ZWRfdl9pZF8yX2V4YW1wbGUgfHwgaWQgPT09IHJlc29sdmVkX2ZhbGxiYWNrX2V4YW1wbGUpIHtcbiAgICAgICAgcmV0dXJuIGBleHBvcnQgZGVmYXVsdCB7fWA7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IHtcbiAgZ2VuZXJhdGVfY2RuX2VudHJ5LFxuICBnZW5lcmF0ZV9kZXZfZW50cnksXG4gIGhhbmRsZV9jZV9jc3MsXG4gIGluamVjdF9jb21wb25lbnRfbG9hZGVyLFxuICBpbmplY3RfZWpzLFxuICBtb2NrX21vZHVsZXMsXG4gIHJlc29sdmVfc3ZlbHRlXG59O1xuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUF3VSxTQUFTLGlCQUFpQjtBQUNsVyxTQUFTLG9CQUFvQjs7O0FDQTdCLFNBQVMsYUFBYTtBQUN0QixTQUFTLFlBQVk7QUFFckIsWUFBWSxTQUFTO0FBQ3JCLFNBQVMsYUFBYSxZQUFZLGNBQWMsZ0JBQWdCO0FBTHdJLElBQU0sMkNBQTJDO0FBMkh6UCxJQUFJLGFBQWlCLGtCQUFjLHdDQUFlO0FBQ2xELElBQUksWUFBZ0Isa0JBQWMsSUFBSSxJQUFJLEtBQUssd0NBQWUsQ0FBQztBQUMvRCxTQUFTLGdCQUFnQixNQUFNLE1BQU0sVUFBVTtBQUM3QyxNQUFJLENBQUMsU0FBUztBQUFTLFdBQU87QUFDOUIsTUFBSSxPQUFPLFNBQVMsUUFBUSxHQUFHLElBQUksRUFBRSxNQUFNO0FBQVUsV0FBTztBQUM1RCxRQUFNLFFBQVEsS0FBSyxNQUFNLE1BQU0sR0FBRyxTQUFTLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFO0FBQy9ELFNBQU8sV0FBVyxLQUFLO0FBQ3pCO0FBQ0EsSUFBSSxjQUFjO0FBQUEsRUFDaEI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFDQSxTQUFTLDZCQUE2QjtBQUNwQyxRQUFNLFVBQVUsWUFBWSxLQUFLLFdBQVcsTUFBTSxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUTtBQUNwRSxRQUFJLFlBQVksU0FBUyxHQUFHO0FBQUcsYUFBTztBQUN0QyxRQUFJ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
