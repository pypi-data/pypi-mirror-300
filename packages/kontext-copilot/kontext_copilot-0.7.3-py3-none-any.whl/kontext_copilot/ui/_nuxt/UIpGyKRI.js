import{e as V,an as Y,f as Z,s as w,o as l,h as b,w as x,b as o,j as s,c as _,F as k,d as B,t as f,k as N,a as e,i as z,_ as M,W as q,l as E,au as ee,at as H,r as A,ar as F,J as D,av as j,K as U,a7 as P,n as O,aw as R,as as G,ab as K,S as L,aj as te,ax as se,q as ne,U as le,ay as oe,a2 as ae,A as ie,az as T,aA as de,aB as re}from"./CMhNC8Lg.js";import{_ as me}from"./B5PkttyH.js";import{_ as J,u as ce}from"./CbFGs04G.js";const ue={class:"d-flex flex-column cursor-pointer"},pe={class:"d-flex gap-3"},_e={class:"fw-bold"},fe={class:"text-muted"},ve=V({__name:"model-selector",props:{simple:{type:Boolean,default:!1}},setup($,{expose:n}){const{models:u,defaultModel:r,setDefaultModel:p,getModels:a}=Y(),d=t=>{p(t)};Z(()=>{a()});const m=w(()=>{var t;return(t=r.value)==null?void 0:t.name});return n({selectedModelName:m}),(t,y)=>{const h=M,c=q,i=E,S=ee;return l(),b(S,{size:"sm"},{default:x(()=>[o(i,{variant:$.simple?"link":"outline-secondary",size:"sm"},{"button-content":x(()=>[s(r)?(l(),_(k,{key:0},[B(f(s(r).name)+" "+f(s(r).details.parameterSize)+" ",1),o(h,{name:"material-symbols:arrow-drop-down"})],64)):(l(),_(k,{key:1},[B(" Loading ")],64))]),default:x(()=>[(l(!0),_(k,null,N(s(u),v=>(l(),b(c,{key:v.name,class:"border-bottom",onClick:g=>d(v)},{default:x(()=>{var g;return[e("div",ue,[e("div",pe,[e("span",_e,f(v.name)+" "+f(v.details.parameterSize),1),((g=s(r))==null?void 0:g.name)===v.name?(l(),b(h,{key:0,name:"material-symbols:check",class:"text-primary"})):z("",!0)]),e("div",fe," family: "+f(v.details.family)+"; quantization: "+f(v.details.quantizationLevel)+"; format: "+f(v.details.format),1)])]}),_:2},1032,["onClick"]))),128))]),_:1},8,["variant"])]),_:1})}}}),he={class:"nav-item"},ge={class:"ms-1"},be={class:"nav flex-column ms-3"},xe={class:"ms-1"},ye=V({__name:"nav-item",props:{id:{},to:{},icon:{},text:{},children:{},flat:{type:Boolean},hidden:{type:Boolean}},setup($){const n=$,u=H(),r=A(!1),p=A(!1),a=w(()=>{var c;return n.children&&((c=n.children)==null?void 0:c.length)>0}),d="collapse-"+n.id;F(()=>{var c;r.value=u.path===n.to,p.value=((c=n.children)==null?void 0:c.some(i=>u.path===i.to))??!1});const m=A(!1),t=w(()=>m.value?"material-symbols:keyboard-arrow-down":"material-symbols:keyboard-arrow-up"),y=()=>{m.value=!1},h=()=>{m.value=!0};return(c,i)=>{const S=W,v=M,g=O,C=R,Q=me,X=D("b-toggle");return l(),_("li",he,[s(a)?(l(),_(k,{key:0},[c.flat?(l(),_(k,{key:0},[(l(!0),_(k,null,N(n.children,I=>(l(),b(S,j({key:I.id,ref_for:!0},I),null,16))),128)),i[0]||(i[0]=e("hr",null,null,-1))],64)):(l(),_(k,{key:1},[U((l(),b(g,{class:P(["nav-link d-flex align-items-center mx-2 mb-1",{active:s(p)}])},{default:x(()=>[o(v,{name:c.icon,size:"20"},null,8,["name"]),e("span",ge,f(c.text),1),o(v,{name:s(t),size:"20",class:"ms-auto"},null,8,["name"])]),_:1},8,["class"])),[[X,d]]),(l(),b(C,{id:d,key:c.id,ref:"collapseEl",visible:"",onShown:y,onHidden:h},{default:x(()=>[e("ul",be,[(l(!0),_(k,null,N(n.children,I=>(l(),b(S,j({key:I.id,ref_for:!0},I),null,16))),128))])]),_:1}))],64))],64)):(l(),b(Q,{key:1,to:c.to,class:P(["nav-link d-flex align-items-center mx-2 mb-1",{active:s(r)}])},{default:x(()=>[o(v,{name:c.icon,size:"20"},null,8,["name"]),e("span",xe,f(c.text),1)]),_:1},8,["to","class"]))])}}}),W=J(ye,[["__scopeId","data-v-2b0a715d"]]),ke={class:"nav nav-pills flex-column mb-auto flex-fill mt-3"},we=V({__name:"panel",setup($){const u=G().navItems;return(r,p)=>{const a=W;return l(),_("ul",ke,[(l(!0),_(k,null,N(s(u).filter(d=>!d.hidden),d=>(l(),b(a,j({key:d.id,ref_for:!0},d),null,16))),128))])}}}),$e={class:"d-flex justify-content-between align-items-center"},Se={class:"col-md-4"},Be={class:"d-flex justify-content-between align-items-center"},Te={class:"col-md-4"},Ve={class:"d-flex justify-content-between align-items-center"},Ce={class:"col-md-4"},Ie={class:"d-flex justify-content-between align-items-center"},Le={class:"col-md-4"},Ne={class:"d-flex justify-content-between align-items-center"},ze={class:"col-md-4"},Me={class:"d-flex justify-content-between align-items-center"},Ae={class:"col-md-4"},Ue={class:"d-flex justify-content-between align-items-center"},je={class:"col-md-4"},De=V({__name:"settings-panel",setup($){const n=K(),u=w({get:()=>n.value.llmTemperature,set:m=>{n.value.llmTemperature=Number(m)}}),r=w({get:()=>n.value.llmTopK,set:m=>{n.value.llmTopK=Number(m)}}),p=w({get:()=>n.value.llmTopP,set:m=>{n.value.llmTopP=Number(m)}}),a=w({get:()=>n.value.llmSeed,set:m=>{n.value.llmSeed=Number(m)}}),d=w({get:()=>(n==null?void 0:n.value.llmApiKey)??"",set:m=>{n.value&&(n.value.llmApiKey=m)}});return(m,t)=>{const y=te,h=se,c=ve;return s(n)?(l(),_(k,{key:0},[e("div",$e,[t[6]||(t[6]=e("div",{class:"col-md-8"},[e("h6",null,"Temperature"),e("span",{class:"text-muted"},"Higher temperatures lead to more diverse and creative outputs, while lower temperatures result in more conservative and predictable responses.")],-1)),e("div",Se,[o(y,{id:"temperatureRange",modelValue:s(u),"onUpdate:modelValue":t[0]||(t[0]=i=>L(u)?u.value=i:null),type:"range",min:"0",max:"1",step:"0.1",number:""},null,8,["modelValue"]),B(" "+f(s(u)),1)])]),t[13]||(t[13]=e("hr",null,null,-1)),e("div",Be,[t[7]||(t[7]=e("div",{class:"col-md-8"},[e("h6",null,"Seed"),e("span",{class:"text-muted"},"Used to initialize model's random number generator.")],-1)),e("div",Te,[o(y,{id:"seed",modelValue:s(a),"onUpdate:modelValue":t[1]||(t[1]=i=>L(a)?a.value=i:null),type:"range",min:"0",max:"100",step:"1",number:""},null,8,["modelValue"]),B(" "+f(s(a)),1)])]),t[14]||(t[14]=e("hr",null,null,-1)),e("div",Ve,[t[8]||(t[8]=e("div",{class:"col-md-8"},[e("h6",null,"Top K Sampling (top_k)"),e("span",{class:"text-muted"},"Limits the generation to the top k most likely next words. The model will only consider the top k words with the highest probability of occurring next in the sequence. ")],-1)),e("div",Ce,[o(y,{id:"top_k_range",modelValue:s(r),"onUpdate:modelValue":t[2]||(t[2]=i=>L(r)?r.value=i:null),type:"range",min:"0",max:"100",step:"1",number:""},null,8,["modelValue"]),B(" "+f(s(r)),1)])]),t[15]||(t[15]=e("hr",null,null,-1)),e("div",Ie,[t[9]||(t[9]=e("div",{class:"col-md-8"},[e("h6",null,"Top P Sampling (top_p)"),e("span",{class:"text-muted"},'Also known as "nucleus sampling," this parameter filters the cumulative distribution of next-word probabilities, so that the smallest set of words whose cumulative probability exceeds the threshold p is considered. ')],-1)),e("div",Le,[o(y,{id:"top_p_range",modelValue:s(p),"onUpdate:modelValue":t[3]||(t[3]=i=>L(p)?p.value=i:null),type:"range",min:"0",max:"1",step:"0.05",number:""},null,8,["modelValue"]),B(" "+f(s(p)),1)])]),t[16]||(t[16]=e("hr",null,null,-1)),e("div",Ne,[t[10]||(t[10]=e("div",{class:"col-md-8"},[e("h6",null,"Endpoint"),e("span",{class:"text-muted"},"The endpoint for Ollama or OpenAI compatible LLMs.")],-1)),e("div",ze,[o(y,{id:"endpoint",modelValue:s(n).llmEndpoint,"onUpdate:modelValue":t[4]||(t[4]=i=>s(n).llmEndpoint=i)},null,8,["modelValue"])])]),t[17]||(t[17]=e("hr",null,null,-1)),o(h),t[18]||(t[18]=e("hr",null,null,-1)),e("div",Me,[t[11]||(t[11]=e("div",{class:"col-md-8"},[e("h6",null,"API key"),e("span",{class:"text-muted"},"The API key for authenticating with OpenAI services.")],-1)),e("div",Ae,[o(y,{id:"apikey",modelValue:s(d),"onUpdate:modelValue":t[5]||(t[5]=i=>L(d)?d.value=i:null)},null,8,["modelValue"])])]),t[19]||(t[19]=e("hr",null,null,-1)),e("div",Ue,[t[12]||(t[12]=e("div",{class:"col-md-8"},[e("h6",null,"Default model"),e("span",{class:"text-muted"},"The default model name.")],-1)),e("div",je,[o(c)])])],64)):z("",!0)}}}),Ke={};function Pe($,n){const u=M,r=ne,p=De,a=le,d=D("b-modal");return l(),_(k,null,[U((l(),b(r,{variant:"link",size:"sm",class:"d-flex align-items-center",title:"LLMs settings"},{default:x(()=>[o(u,{name:"material-symbols:neurology-outline",size:"20"})]),_:1})),[[d,void 0,void 0,{llmsSettingsModal:!0}]]),o(a,{id:"llmsSettingsModal",title:"LLMs settings","ok-only":"",size:"lg"},{default:x(()=>[o(p)]),_:1})],64)}const qe=J(Ke,[["render",Pe]]),Ee={class:"d-flex align-items-center cursor-pointer"},He=V({__name:"theme-toggle",props:{simple:{type:Boolean}},setup($){const n="btn-theme-toogle-"+oe(),u=ae({selector:"html",storageKey:"theme"}),r=K(),p=w(()=>r.value.generalTheme),a=w(()=>!r);ie(p,h=>{h&&(u.value=h)});const d=A([{key:"light",name:"Light",iconName:"material-symbols:light-mode-outline-rounded"},{key:"dark",name:"Dark",iconName:"material-symbols:dark-mode-outline-rounded"},{key:"auto",name:"System",iconName:"material-symbols:brightness-auto-outline"}]),m=w(()=>d.value.find(h=>h.key===p.value)??d.value[0]),t=h=>{r.value.generalTheme=h},{simple:y}=$;return(h,c)=>{const i=M,S=q,v=E;return l(),b(v,{id:n,variant:y?"link":"outline-secondary",disabled:s(a)},{"button-content":x(()=>{var g,C;return[o(i,{name:(g=s(m))==null?void 0:g.iconName,class:"me-1"},null,8,["name"]),y?z("",!0):(l(),_(k,{key:0},[B(f((C=s(m))==null?void 0:C.name),1)],64)),o(i,{name:"material-symbols:arrow-drop-down"})]}),default:x(()=>[(l(!0),_(k,null,N(s(d),g=>(l(),b(S,{key:g.key,disabled:g.key===s(p),onClick:C=>t(g.key)},{default:x(()=>[e("span",Ee,[o(i,{name:g.iconName,class:"me-1"},null,8,["name"]),e("span",null,f(g.name),1),g.key===s(p)?(l(),b(i,{key:0,name:"material-symbols:check",class:"ms-auto text-primary"})):z("",!0)])]),_:2},1032,["disabled","onClick"]))),128))]),_:1},8,["variant","disabled"])}}}),Fe={class:"position-fixed d-flex overflow-x-hidden overflow-y-hidden inset-0 w-100"},Oe={class:"px-4 header-primary d-flex align-items-center flex-shrink-0 border-bottom bg-body-tertiary shadow-sm"},Re={href:"/",class:"navbar-brand"},Ge={class:"d-flex align-items-center gap-1"},Je=["src"],We={class:"d-flex flex-column w-100 flex-grow-1 flex-shrink-1 position-relative overflow-y-hidden"},Qe={class:"flex-grow-1 d-flex flex-column min-h-0"},Xe={class:"overflow-y-auto flex-grow-1 flex-shrink-1"},Ye={class:"flex-grow-1 flex-shrink-1"},Ze={class:"px-1 flex-shrink-0 border-top py-1"},et={class:"d-flex align-items-center mx-2 gap-1"},tt={class:"btn btn-circle btn-circle-nav btn-outline-secondary d-flex justify-content-center"},st={class:"fw-bold"},nt={class:"d-flex flex-grow-1 flex-shrink-1 w-100"},lt={class:"flex-column align-items-stretch position-relative w-100 flex-grow-1 flex-shrink-1 d-flex"},ot={class:"header-primary d-flex align-items-center border-bottom px-4 flex-shrink-0"},at={class:"fs-6 mb-0 pb-0 fw-bold"},it={class:"d-flex align-items-center gap-1 ms-auto"},dt=["href"],rt=["href"],mt={key:0,class:"header-secondary d-flex align-items-center border-bottom flex-shrink-0 px-4 d-grid gap-3 flex-wrap"},ct={class:"flex-grow-1 flex-shrink-1 mw-100 w-100 d-flex flex-column overflow-y-auto default-area"},ut={key:0,class:"inset-0 h-100 row g-0"},pt={class:"col-md-8 col-lg-9 d-flex flex-column overflow-y-auto h-100"},_t={class:"col-md-4 col-lg-3 p-4 border-start d-none d-md-flex flex-column overflow-y-auto h-100"},ft={key:1,class:"flex-grow-1 flex-shrink-1 d-flex flex-column overflow-y-auto"},bt=V({__name:"default-layout",setup($){const n=H(),u=G(),r=K(),p=w(()=>r.value.generalUsername.split(" ").map(a=>a[0]).join(""));return F(()=>{ce({title:n.meta.title||u.appName})}),(a,d)=>{const m=M,t=O,y=we,h=R,c=qe,i=re,S=He,v=D("b-toggle");return l(),_("div",Fe,[o(h,{id:"mainSidebar",class:"position-relative-md sidebar-col d-md-flex flex-column align-items-stretch offcanvas-md offcanvas-start border-end flex-shrink-0 bg-body shadow-sm"},{default:x(()=>[e("div",Oe,[U((l(),b(t,{class:"d-flex d-md-none text-muted me-3",href:"#"},{default:x(()=>[o(m,{name:"material-symbols:menu",size:"24"})]),_:1})),[[v,void 0,void 0,{mainSidebar:!0}]]),e("a",Re,[e("span",Ge,[e("img",{src:s(de),alt:"Kontext Logo",class:"img-fluid"},null,8,Je),d[0]||(d[0]=e("em",{class:"kontext-em h5 mb-0 fw-bold"},"Copilot",-1))])])]),e("div",We,[e("div",Qe,[e("div",Xe,[o(y,{class:"flex-grow-1 flex-shrink-1"}),e("div",Ye,[T(a.$slots,"aside")])]),e("div",Ze,[e("div",et,[e("span",tt,f(s(p)),1),e("span",st,f(s(r).generalUsername),1)])])])])]),_:3}),e("div",nt,[e("div",lt,[e("div",ot,[U((l(),b(t,{class:"d-flex d-md-none text-muted me-3",href:"#"},{default:x(()=>[o(m,{name:"material-symbols:menu",size:"24"})]),_:1})),[[v,void 0,void 0,{mainSidebar:!0}]]),e("h1",at,f(s(n).meta.title??s(n).name),1),e("div",it,[T(a.$slots,"header-tools"),o(c),e("a",{class:"btn btn-sm btn-link",href:s(u).kontextCopilotGitHubUrl,target:"_blank"},[o(m,{name:"grommet-icons:github",size:"18"})],8,dt),e("a",{class:"btn btn-sm btn-link",href:s(u).kontextDiscordUrl,target:"_blank"},d[1]||(d[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-discord",viewBox:"0 0 16 16"},[e("path",{d:"M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"})],-1)]),8,rt),o(i),o(S,{simple:""})])]),a.$slots["header-secondary"]?(l(),_("div",mt,[T(a.$slots,"header-secondary")])):z("",!0),e("div",ct,[a.$slots["secondary-sidebar"]?(l(),_("div",ut,[e("div",pt,[T(a.$slots,"default")]),e("div",_t,[T(a.$slots,"secondary-sidebar")])])):(l(),_("div",ft,[T(a.$slots,"default")]))])])])])}}});export{bt as _,ve as a,He as b,De as c};
